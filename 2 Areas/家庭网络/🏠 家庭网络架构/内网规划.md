---
tags:
  - network
  - vlan
  - ip-planning
  - home-lab
created: 2026-01-15
---

# ğŸŒ å†…ç½‘è§„åˆ’æ–¹æ¡ˆ
# Internal Network Planning

---

## ğŸ“Š æ€»ä½“æ¶æ„æ¦‚è§ˆ / Overall Architecture Overview

### ç½‘ç»œå±‚æ¬¡ç»“æ„ / Network Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº’è”ç½‘ / Internet                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   å…‰çŒ« (ONT)   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ä¸»è·¯ç”±å™¨ (GW)   â”‚  â† 192.168.1.1
              â”‚  VLAN Trunk     â”‚
              â””â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜
                  â”‚   â”‚   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚                 â”‚
    â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VLAN10  â”‚    â”‚ VLAN20  â”‚    â”‚ VLAN30  â”‚
â”‚ ä¸»ç½‘ç»œ  â”‚    â”‚ IoTç½‘ç»œ  â”‚    â”‚ æœåŠ¡å™¨  â”‚
â”‚ 192.168 â”‚    â”‚ 192.168 â”‚    â”‚ 192.168 â”‚
â”‚  .1.0/24â”‚    â”‚ .10.0/24â”‚    â”‚ .20.0/24â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ·ï¸ VLAN è§„åˆ’ / VLAN Planning

### VLAN æ¦‚è§ˆè¡¨ / VLAN Overview Table

| VLAN ID | åç§° / Name | ç”¨é€” / Purpose | å­ç½‘ / Subnet | ç½‘å…³ / Gateway | è¯´æ˜ / Description |
|---------|-------------|-----------------|----------------|-----------------|-------------------|
| VLAN1 | **Management** | ç½‘ç»œç®¡ç† | 192.168.0.0/24 | 192.168.0.1 | è®¾å¤‡ç®¡ç†ç½‘æ®µ |
| VLAN10 | **Main** | ä¸»ç½‘ç»œ | 192.168.1.0/24 | 192.168.1.1 | æ—¥å¸¸ä½¿ç”¨è®¾å¤‡ |
| VLAN20 | **IoT** | æ™ºèƒ½å®¶å±… | 192.168.10.0/24 | 192.168.10.1 | IoTè®¾å¤‡éš”ç¦» |
| VLAN30 | **Server** | æœåŠ¡å™¨åŒº | 192.168.20.0/24 | 192.168.20.1 | æœåŠ¡å™¨/NAS |
| VLAN40 | **Guest** | è®¿å®¢ç½‘ç»œ | 192.168.30.0/24 | 192.168.30.1 | è®¿å®¢ä¸“ç”¨ |
| VLAN50 | **Media** | åª’ä½“ä¸­å¿ƒ | 192.168.40.0/24 | 192.168.40.1 | æµåª’ä½“/æŠ•å± |
| VLAN99 | **DMZ** | å¯¹å¤–æœåŠ¡ | 192.168.99.0/24 | 192.168.99.1 | DMZåŒºåŸŸ |

### VLAN è¯¦ç»†é…ç½® / VLAN Detailed Configuration

#### VLAN1 - ç®¡ç†ç½‘ç»œ / Management Network

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: è·¯ç”±å™¨ã€äº¤æ¢æœºç­‰ç½‘ç»œè®¾å¤‡ç®¡ç†
  è®¿é—®: ä»…ç®¡ç†å‘˜å¯è®¿é—®
  å®‰å…¨: æœ€é«˜å®‰å…¨çº§åˆ«

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: è·¯ç”±å™¨ã€äº¤æ›æ©Ÿç­‰ç¶²çµ¡è¨­å‚™ç®¡ç†
  è¨ªå•: åƒ…ç®¡ç†å“¡å¯è¨ªå•
  å®‰å…¨: æœ€é«˜å®‰å…¨ç´šåˆ¥

English:
  Purpose: Network device management (routers, switches)
  Access: Admin only
  Security: Highest level
```

| IP åœ°å€ / IP | è®¾å¤‡ / Device | è¯´æ˜ / Notes |
|--------------|---------------|--------------|
| 192.168.0.1 | ä¸»è·¯ç”±å™¨ / Main Router | ç½‘å…³ / Gateway |
| 192.168.0.2 | äº¤æ¢æœº1 / Switch 1 | ç®¡ç† IP / Mgmt IP |
| 192.168.0.3 | äº¤æ¢æœº2 / Switch 2 | ç®¡ç† IP / Mgmt IP |
| 192.168.0.4 | AP1 | ç®¡ç† IP / Mgmt IP |
| 192.168.0.5 | AP2 | ç®¡ç† IP / Mgmt IP |

---

#### VLAN10 - ä¸»ç½‘ç»œ / Main Network

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: æ—¥å¸¸ä½¿ç”¨è®¾å¤‡ï¼ˆç”µè„‘ã€æ‰‹æœºã€å¹³æ¿ï¼‰
  è®¿é—®: å¯è®¿é—®æ‰€æœ‰ç½‘ç»œ
  æœåŠ¡: DHCPã€DNSã€NTP

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: æ—¥å¸¸ä½¿ç”¨è¨­å‚™ï¼ˆé›»è…¦ã€æ‰‹æ©Ÿã€å¹³æ¿ï¼‰
  è¨ªå•: å¯è¨ªå•æ‰€æœ‰ç¶²çµ¡
  æœå‹™: DHCPã€DNSã€NTP

English:
  Purpose: Daily use devices (PC, phones, tablets)
  Access: All networks
  Services: DHCP, DNS, NTP
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.1.1 | ç½‘å…³ / Gateway |
| 192.168.1.2 - 192.168.1.99 | DHCP åŠ¨æ€æ±  / DHCP Pool |
| 192.168.1.100 - 192.168.1.199 | é™æ€åˆ†é… / Static Assignment |
| 192.168.1.200 - 192.168.1.254 | ä¿ç•™ / Reserved |

**å›ºå®šè®¾å¤‡åˆ†é… / Static Device Assignment:**

| è®¾å¤‡ / Device | IP åœ°å€ / IP | MAC åœ°å€ / MAC |
|---------------|--------------|-----------------|
| ç”µè„‘1 / PC1 | 192.168.1.100 | `XX:XX:XX:XX:XX:01` |
| ç”µè„‘2 / PC2 | 192.168.1.101 | `XX:XX:XX:XX:XX:02` |
| æ‰‹æœº1 / Phone1 | 192.168.1.102 | `XX:XX:XX:XX:XX:03` |
| å¹³æ¿ / Tablet | 192.168.1.103 | `XX:XX:XX:XX:XX:04` |
| æ™ºèƒ½ç”µè§† / Smart TV | 192.168.1.104 | `XX:XX:XX:XX:XX:05` |

---

#### VLAN20 - IoT ç½‘ç»œ / IoT Network

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: æ™ºèƒ½å®¶å±…è®¾å¤‡ï¼ˆä¼ æ„Ÿå™¨ã€æ‘„åƒå¤´ã€æ™ºèƒ½æ’åº§ï¼‰
  è®¿é—®: ä»…äº’è”ç½‘ï¼Œéš”ç¦»ä¸»ç½‘ç»œ
  å®‰å…¨: å—é™è®¿é—®ï¼Œé˜»æ­¢è®¾å¤‡é—´é€šä¿¡

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: æ™ºèƒ½å®¶å±…è¨­å‚™ï¼ˆå‚³æ„Ÿå™¨ã€æ”åƒé ­ã€æ™ºèƒ½æ’åº§ï¼‰
  è¨ªå•: åƒ…äº’è¯ç¶²ï¼Œéš”é›¢ä¸»ç¶²çµ¡
  å®‰å…¨: å—é™è¨ªå•ï¼Œé˜»æ­¢è¨­å‚™é–“é€šä¿¡

English:
  Purpose: Smart home devices (sensors, cameras, smart plugs)
  Access: Internet only, isolated from main network
  Security: Restricted access, prevent device-to-device communication
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.10.1 | ç½‘å…³ / Gateway |
| 192.168.10.2 - 192.168.10.200 | DHCP æ±  / DHCP Pool |
| 192.168.10.201 - 192.168.10.254 | ä¿ç•™ / Reserved |

**IoT è®¾å¤‡åˆ†ç±» / IoT Device Classification:**

| è®¾å¤‡ç±»å‹ / Type | IP æ®µ / IP Range | ç¤ºä¾‹ / Examples |
|----------------|------------------|-----------------|
| æ™ºèƒ½æ’åº§ / Smart Plugs | 192.168.10.10-29 | ç±³å®¶æ™ºèƒ½æ’åº§ã€æ¶‚é¸¦è®¾å¤‡ |
| ä¼ æ„Ÿå™¨ / Sensors | 192.168.10.30-59 | æ¸©æ¹¿åº¦ã€é—¨çª—ä¼ æ„Ÿå™¨ |
| æ‘„åƒå¤´ / Cameras | 192.168.10.60-79 | å°ç±³æ‘„åƒå¤´ã€æµ·åº·å¨è§† |
| æ™ºèƒ½ç¯å…· / Smart Lights | 192.168.10.80-99 | Yeelightã€é£åˆ©æµ¦Hue |
| ç©ºè°ƒ/ç”µå™¨ / AC/Appliances | 192.168.10.100-119 | ç¾çš„ç©ºè°ƒã€æ™ºèƒ½å†°ç®± |
| å…¶ä»– IoT / Other IoT | 192.168.10.120-199 | æ‰«åœ°æœºå™¨äººã€é—¨é” |

---

#### VLAN30 - æœåŠ¡å™¨åŒº / Server Network

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: æœåŠ¡å™¨ã€NASã€å¼€å‘ç¯å¢ƒ
  è®¿é—®: ç®¡ç†å‘˜è®¿é—®ï¼Œæä¾›æœåŠ¡
  æœåŠ¡: æ–‡ä»¶å…±äº«ã€WebæœåŠ¡ã€æ•°æ®åº“

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: æœå‹™å™¨ã€NASã€é–‹ç™¼ç’°å¢ƒ
  è¨ªå•: ç®¡ç†å“¡è¨ªå•ï¼Œæä¾›æœå‹™
  æœå‹™: æ–‡ä»¶å…±äº«ã€Webæœå‹™ã€æ•¸æ“šåº«

English:
  Purpose: Servers, NAS, dev environment
  Access: Admin access, providing services
  Services: File sharing, web services, databases
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.20.1 | ç½‘å…³ / Gateway |
| 192.168.20.2 - 192.168.20.50 | é™æ€æœåŠ¡å™¨æ±  / Server Pool |
| 192.168.20.51 - 192.168.20.99 | å®¹å™¨/è™šæ‹Ÿæœºæ±  / Container/VM Pool |
| 192.168.20.100 - 192.168.20.254 | ä¿ç•™ / Reserved |

**æœåŠ¡å™¨è®¾å¤‡åˆ†é… / Server Device Assignment:**

| è®¾å¤‡ / Device | IP åœ°å€ / IP | ç«¯å£ / Ports | è¯´æ˜ / Notes |
|---------------|--------------|--------------|--------------|
| NAS / Storage | 192.168.20.2 | 80, 443, 22, 445, 5001 | æ–‡ä»¶å­˜å‚¨ / File storage |
| ä¸»æœåŠ¡å™¨ / Main Server | 192.168.20.3 | 22, 80, 443, 3306, 6379 | åº”ç”¨æœåŠ¡ / App services |
| å¼€å‘æœåŠ¡å™¨ / Dev Server | 192.168.20.4 | 22, 8080, 3000, 5000 | å¼€å‘ç¯å¢ƒ / Dev environment |
| æ•°æ®åº“æœåŠ¡å™¨ / DB Server | 192.168.20.5 | 3306, 5432, 27017 | æ•°æ®åº“ / Database |
| ç›‘æ§æœåŠ¡å™¨ / Monitor Server | 192.168.20.6 | 9090, 3000 | ç³»ç»Ÿç›‘æ§ / System monitoring |
| å¤‡ä»½æœåŠ¡å™¨ / Backup Server | 192.168.20.7 | 22, 873 | æ•°æ®å¤‡ä»½ / Data backup |

**å®¹å™¨/è™šæ‹Ÿæœº IP åˆ†é… / Container/VM IP Assignment:**

| å®¹å™¨ / Container | IP åœ°å€ / IP | ç”¨é€” / Purpose |
|-----------------|--------------|----------------|
| Home Assistant | 192.168.20.51 | æ™ºèƒ½å®¶å±…ä¸­å¿ƒ |
| Plex | 192.168.20.52 | åª’ä½“æœåŠ¡å™¨ |
| Jellyfin | 192.168.20.53 | åª’ä½“æœåŠ¡å™¨ |
| Nextcloud | 192.168.20.54 | äº‘å­˜å‚¨ |
| GitLab | 192.168.20.55 | ä»£ç ä»“åº“ |
| Nginx Proxy | 192.168.20.56 | åå‘ä»£ç† |
| Pi-hole | 192.168.20.57 | DNS å¹¿å‘Šæ‹¦æˆª |
| Portainer | 192.168.20.58 | å®¹å™¨ç®¡ç† |
| Grafana | 192.168.20.59 | æ•°æ®å¯è§†åŒ– |

---

#### VLAN40 - è®¿å®¢ç½‘ç»œ / Guest Network

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: è®¿å®¢ä¸“ç”¨ï¼Œéš”ç¦»å†…ç½‘
  è®¿é—®: ä»…äº’è”ç½‘ï¼Œæ— æ³•è®¿é—®å†…ç½‘è®¾å¤‡
  é™åˆ¶: å¸¦å®½é™åˆ¶ï¼Œä¸Šç½‘æ—¶é—´é™åˆ¶

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: è¨ªå®¢å°ˆç”¨ï¼Œéš”é›¢å…§ç¶²
  è¨ªå•: åƒ…äº’è¯ç¶²ï¼Œç„¡æ³•è¨ªå•å…§ç¶²è¨­å‚™
  é™åˆ¶: å¸¶å¯¬é™åˆ¶ï¼Œä¸Šç¶²æ™‚é–“é™åˆ¶

English:
  Purpose: Guest access, isolated from internal network
  Access: Internet only, no internal network access
  Restrictions: Bandwidth limit, time restrictions
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.30.1 | ç½‘å…³ / Gateway |
| 192.168.30.2 - 192.168.30.150 | DHCP æ±  / DHCP Pool |
| 192.168.30.151 - 192.168.30.254 | ä¿ç•™ / Reserved |

**è®¿å®¢ç½‘ç»œç­–ç•¥ / Guest Network Policy:**

| ç­–ç•¥ / Policy | é…ç½® / Configuration |
|----------------|---------------------|
| å¸¦å®½é™åˆ¶ / Bandwidth Limit | ä¸‹è¡Œ 50Mbps / ä¸Šè¡Œ 10Mbps |
| æ—¶é—´é™åˆ¶ / Time Restriction | æ¯æ—¥ 22:00 - 06:00 ç¦æ­¢ |
| è®¾å¤‡æ•°é‡é™åˆ¶ / Device Limit | æœ€å¤š 5 å°è®¾å¤‡ |
| è®¿é—®éš”ç¦» / Access Isolation | è®¾å¤‡é—´æ— æ³•äº’é€š |
| å¯†ç å®šæœŸæ›´æ¢ / Password Rotation | æ¯å‘¨æ›´æ¢ |

---

#### VLAN50 - åª’ä½“ä¸­å¿ƒ / Media Center

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: æµåª’ä½“æœåŠ¡ã€æŠ•å±è®¾å¤‡
  è®¿é—®: å¯è®¿é—®åª’ä½“æœåŠ¡å™¨
  ä¼˜åŒ–: æµåª’ä½“ä¼˜å…ˆçº§ï¼Œä½å»¶è¿Ÿ

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: æµåª’é«”æœå‹™ã€æŠ•å±è¨­å‚™
  è¨ªå•: å¯è¨ªå•åª’é«”æœå‹™å™¨
  å„ªåŒ–: æµåª’é«”å„ªå…ˆç´šï¼Œä½å»¶é²

English:
  Purpose: Streaming services, casting devices
  Access: Can access media servers
  Optimization: Streaming priority, low latency
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.40.1 | ç½‘å…³ / Gateway |
| 192.168.40.2 - 192.168.40.50 | æµåª’ä½“è®¾å¤‡ / Streaming devices |
| 192.168.40.51 - 192.168.40.254 | ä¿ç•™ / Reserved |

**åª’ä½“è®¾å¤‡åˆ†é… / Media Device Assignment:**

| è®¾å¤‡ / Device | IP åœ°å€ / IP | è¯´æ˜ / Notes |
|---------------|--------------|--------------|
| æ™ºèƒ½ç”µè§† / Smart TV | 192.168.40.10 | ä¸»ç”µè§† |
| æŠ•å±è®¾å¤‡ / Chromecast | 192.168.40.11 | æŠ•å±æ¥æ”¶å™¨ |
| Apple TV | 192.168.40.12 | Apple ç”Ÿæ€ |
| NVIDIA Shield | 192.168.40.13 | æ¸¸æˆæµåª’ä½“ |
| å›éŸ³å£ / Soundbar | 192.168.40.14 | éŸ³å“è®¾å¤‡ |

---

#### VLAN99 - DMZ åŒºåŸŸ / DMZ Zone

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ç”¨é€”: å¯¹å¤–æœåŠ¡åŒºåŸŸï¼Œä¸å†…ç½‘éš”ç¦»
  è®¿é—®: å¯è¢«å¤–ç½‘è®¿é—®ï¼Œå—é™è®¿é—®å†…ç½‘
  å®‰å…¨: ä¸¥æ ¼é˜²ç«å¢™è§„åˆ™ï¼Œå®šæœŸå®¡è®¡

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ç”¨é€”: å°å¤–æœå‹™å€åŸŸï¼Œèˆ‡å…§ç¶²éš”é›¢
  è¨ªå•: å¯è¢«å¤–ç¶²è¨ªå•ï¼Œå—é™è¨ªå•å…§ç¶²
  å®‰å…¨: åš´æ ¼é˜²ç«ç‰†è¦å‰‡ï¼Œå®šæœŸå¯©è¨ˆ

English:
  Purpose: External service zone, isolated from internal network
  Access: Accessible from internet, restricted internal access
  Security: Strict firewall rules, regular auditing
```

| IP æ®µ / IP Range | ç”¨é€” / Usage |
|------------------|--------------|
| 192.168.99.1 | ç½‘å…³ / Gateway |
| 192.168.99.2 - 192.168.99.50 | DMZ æœåŠ¡å™¨ / DMZ Servers |
| 192.168.99.51 - 192.168.99.254 | ä¿ç•™ / Reserved |

**DMZ æœåŠ¡åˆ†é… / DMZ Service Assignment:**

| æœåŠ¡ / Service | IP åœ°å€ / IP | ç«¯å£ / Ports | è¯´æ˜ / Notes |
|---------------|--------------|--------------|--------------|
| Web Server | 192.168.99.10 | 80, 443 | é™æ€ç½‘ç«™ |
| VPN Server | 192.168.99.11 | 1194, 443 | WireGuard/OpenVPN |
| Game Server | 192.168.99.12 | 25565, 7777 | Minecraftç­‰ |
| é‚®ä»¶æœåŠ¡å™¨ / Mail Server | 192.168.99.13 | 25, 587, 993, 995 | é‚®ä»¶æœåŠ¡ |

---

## ğŸŒ‰ VLAN é—´é€šä¿¡è§„åˆ™ / Inter-VLAN Communication Rules

### è®¿é—®æ§åˆ¶çŸ©é˜µ / Access Control Matrix

| æº VLAN \ ç›®æ ‡ VLAN / Source \ Dest | VLAN1 (Mgmt) | VLAN10 (Main) | VLAN20 (IoT) | VLAN30 (Server) | VLAN40 (Guest) | VLAN50 (Media) | VLAN99 (DMZ) |
|----------------------------------|-----------------|------------------|----------------|-------------------|------------------|------------------|----------------|
| **VLAN1 (Mgmt)** | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| **VLAN10 (Main)** | âŒ | âœ… | âš ï¸ åªè¯» | âœ… | âŒ | âœ… | âš ï¸ å—é™ |
| **VLAN20 (IoT)** | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| **VLAN30 (Server)** | âŒ | âœ… | âŒ | âœ… | âŒ | âœ… | âŒ |
| **VLAN40 (Guest)** | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âŒ |
| **VLAN50 (Media)** | âŒ | âœ… | âŒ | âœ… | âŒ | âœ… | âŒ |
| **VLAN99 (DMZ)** | âŒ | âŒ | âŒ | âš ï¸ ä»…VPN | âŒ | âŒ | âŒ |

**å›¾ä¾‹ / Legend:**
- âœ… å…è®¸è®¿é—® / Allowed
- âŒ æ‹’ç»è®¿é—® / Denied
- âš ï¸ å—é™è®¿é—® / Restricted

### ç‰¹æ®Šè§„åˆ™è¯´æ˜ / Special Rules Description

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:

  IoT åˆ°å…¶ä»–VLAN:
    - ä»…å…è®¸è®¿é—®äº’è”ç½‘
    - æ‹’ç»æ‰€æœ‰å†…éƒ¨VLANè®¿é—®
    - é˜»æ­¢è®¾å¤‡é—´é€šä¿¡

  Mainåˆ°Server:
    - å®Œå…¨è®¿é—®æƒé™
    - å¯è®¿é—®æ‰€æœ‰æœåŠ¡

  Mainåˆ°IoT (åªè¯»):
    - å¯æŸ¥çœ‹IoTè®¾å¤‡çŠ¶æ€
    - æ— æ³•æ§åˆ¶IoTè®¾å¤‡
    - éœ€è¦Home Assistantä¸­è½¬

  Gueståˆ°Media:
    - å…è®¸è®¿é—®åª’ä½“æœåŠ¡å™¨
    - æµåª’ä½“ä¼˜åŒ–QoS

ç¹é«”ä¸­æ–‡ / Traditional Chinese:

  IoT åˆ°å…¶ä»–VLAN:
    - åƒ…å…è¨±è¨ªå•äº’è¯ç¶²
    - æ‹’çµ•æ‰€æœ‰å…§éƒ¨VLANè¨ªå•
    - é˜»æ­¢è¨­å‚™é–“é€šä¿¡

  Mainåˆ°Server:
    - å®Œå…¨è¨ªå•æ¬Šé™
    - å¯è¨ªå•æ‰€æœ‰æœå‹™

  Mainåˆ°IoT (åªè®€):
    - å¯æŸ¥çœ‹IoTè¨­å‚™ç‹€æ…‹
    - ç„¡æ³•æ§åˆ¶IoTè¨­å‚™
    - éœ€è¦Home Assistantä¸­è½‰

  Gueståˆ°Media:
    - å…è¨±è¨ªå•åª’é«”æœå‹™å™¨
    - æµåª’é«”å„ªåŒ–QoS

English:

  IoT to other VLANs:
    - Internet access only
    - Deny all internal VLAN access
    - Block device-to-device communication

  Main to Server:
    - Full access permissions
    - Access all services

  Main to IoT (Read-only):
    - View IoT device status
    - Cannot control IoT devices
    - Require Home Assistant relay

  Guest to Media:
    - Allow media server access
    - Streaming QoS optimization
```

---

## ğŸ“‹ é˜²ç«å¢™è§„åˆ™é…ç½® / Firewall Rules Configuration

### OpenWrt é˜²ç«å¢™é…ç½®ç¤ºä¾‹ / OpenWrt Firewall Example

```bash
# VLAN é˜²ç«å¢™è§„åˆ™ / VLAN Firewall Rules

# ============ VLAN å®šä¹‰ / VLAN Definitions ============

config zone
    option name 'mgmt'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan1'

config zone
    option name 'main'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan10'

config zone
    option name 'iot'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan20'

config zone
    option name 'server'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan30'

config zone
    option name 'guest'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan40'

config zone
    option name 'media'
    option input 'ACCEPT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan50'

config zone
    option name 'dmz'
    option input 'REJECT'
    option output 'ACCEPT'
    option forward 'REJECT'
    list network 'lan99'

# ============ è½¬å‘è§„åˆ™ / Forwarding Rules ============

# Management åˆ°æ‰€æœ‰VLAN
config forwarding
    option src 'mgmt'
    option dest 'main'

config forwarding
    option src 'mgmt'
    option dest 'iot'

config forwarding
    option src 'mgmt'
    option dest 'server'

config forwarding
    option src 'mgmt'
    option dest 'guest'

config forwarding
    option src 'mgmt'
    option dest 'media'

config forwarding
    option src 'mgmt'
    option dest 'dmz'

# Main åˆ° Server å’Œ Media
config forwarding
    option src 'main'
    option dest 'server'

config forwarding
    option src 'main'
    option dest 'media'

# Server åˆ° Main å’Œ Media
config forwarding
    option src 'server'
    option dest 'main'

config forwarding
    option src 'server'
    option dest 'media'

# Guest åˆ° Media (ä»…æµåª’ä½“)
config forwarding
    option src 'guest'
    option dest 'media'

# ============ ç‰¹æ®Šé™åˆ¶è§„åˆ™ / Special Restriction Rules ============

# IoT åªèƒ½è®¿é—®äº’è”ç½‘
config rule
    option name 'Allow-IoT-to-Internet'
    option src 'iot'
    option dest 'wan'
    option proto 'all'
    option target 'ACCEPT'

# IoT è®¾å¤‡é—´éš”ç¦»
config rule
    option name 'Block-IoT-to-IoT'
    option src 'iot'
    option dest 'iot'
    option proto 'all'
    option target 'REJECT'

# Main åˆ° IoT åªè¯» (ç¤ºä¾‹: é˜»æ­¢å†™æ“ä½œ)
config rule
    option name 'Main-to-IoT-Read-Only'
    option src 'main'
    option dest 'iot'
    option proto 'tcp'
    option dest_port '80 443'
    option target 'ACCEPT'

# Guest å¸¦å®½é™åˆ¶
config rule
    option name 'Guest-Bandwidth-Limit'
    option src 'guest'
    option dest '*'
    option proto 'all'
    option target 'ACCEPT'
    option extra '-m limit --limit 50/second'
```

---

## ğŸ“¡ DNS å’Œ DHCP é…ç½® / DNS and DHCP Configuration

### ä¸»DNSæœåŠ¡å™¨ / Primary DNS Server

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  ä¸»DNS: 192.168.1.1 (ä¸»è·¯ç”±å™¨)
  å¤‡ç”¨DNS: 192.168.20.57 (Pi-holeå¹¿å‘Šæ‹¦æˆª)
  ä¸Šæ¸¸DNS: 223.5.5.5, 119.29.29.29

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  ä¸»DNS: 192.168.1.1 (ä¸»è·¯ç”±å™¨)
  å‚™ç”¨DNS: 192.168.20.57 (Pi-holeå»£å‘Šæ””æˆª)
  ä¸ŠéŠDNS: 223.5.5.5, 119.29.29.29

English:
  Primary DNS: 192.168.1.1 (Main router)
  Secondary DNS: 192.168.20.57 (Pi-hole adblock)
  Upstream DNS: 223.5.5.5, 119.29.29.29
```

### DHCP é…ç½®æ‘˜è¦ / DHCP Configuration Summary

| VLAN | èµ·å§‹IP / Start IP | ç»“æŸIP / End IP | ç§ŸæœŸ / Lease Time | DNS / DNS Server |
|-------|-------------------|-----------------|-------------------|-----------------|
| VLAN10 | 192.168.1.2 | 192.168.1.99 | 12h | 192.168.1.1, 223.5.5.5 |
| VLAN20 | 192.168.10.2 | 192.168.10.200 | 24h | 192.168.10.1 |
| VLAN30 | 192.168.30.2 | 192.168.30.150 | 6h | 192.168.30.1 |
| VLAN40 | 192.168.40.2 | 192.168.40.50 | 12h | 192.168.40.1 |

### DHCP ä¿ç•™é…ç½® / DHCP Reservation Configuration

```bash
# /etc/config/dhcp - é™æ€åˆ†é…ç¤ºä¾‹ / Static Assignment Example

# ============ Main Network (VLAN10) ============
config host
    option name 'pc-livingroom'
    option ip '192.168.1.100'
    option mac 'AA:BB:CC:DD:EE:01'

config host
    option name 'pc-study'
    option ip '192.168.1.101'
    option mac 'AA:BB:CC:DD:EE:02'

# ============ IoT Network (VLAN20) ============
config host
    option name 'xiaomi-camera-gate'
    option ip '192.168.10.60'
    option mac 'AA:BB:CC:DD:EE:10'

config host
    option name 'yeelight-livingroom'
    option ip '192.168.10.80'
    option mac 'AA:BB:CC:DD:EE:11'

# ============ Server Network (VLAN30) ============
config host
    option name 'nas-main'
    option ip '192.168.20.2'
    option mac 'AA:BB:CC:DD:EE:20'

config host
    option name 'server-main'
    option ip '192.168.20.3'
    option mac 'AA:BB:CC:DD:EE:21'
```

---

## ğŸš€ å®æ–½æ­¥éª¤ / Implementation Steps

### é˜¶æ®µ1: åŸºç¡€ç½‘ç»œ / Phase 1: Basic Network

**ç®€ä½“ä¸­æ–‡ / Simplified Chinese:**
1. é…ç½®ä¸»è·¯ç”±å™¨ VLAN1 å’Œ VLAN10
2. æµ‹è¯•ä¸»ç½‘ç»œè¿é€šæ€§
3. é…ç½® DHCP å’Œ DNS

**ç¹é«”ä¸­æ–‡ / Traditional Chinese:**
1. é…ç½®ä¸»è·¯ç”±å™¨ VLAN1 å’Œ VLAN10
2. æ¸¬è©¦ä¸»ç¶²çµ¡é€£é€šæ€§
3. é…ç½® DHCP å’Œ DNS

**English:**
1. Configure main router VLAN1 and VLAN10
2. Test main network connectivity
3. Configure DHCP and DNS

### é˜¶æ®µ2: IoT éš”ç¦» / Phase 2: IoT Isolation

**ç®€ä½“ä¸­æ–‡ / Simplified Chinese:**
1. é…ç½® VLAN20 (IoT)
2. è¿ç§» IoT è®¾å¤‡åˆ°æ–°VLAN
3. é…ç½®é˜²ç«å¢™éš”ç¦»è§„åˆ™
4. éªŒè¯ IoT è®¾å¤‡åŠŸèƒ½æ­£å¸¸

**ç¹é«”ä¸­æ–‡ / Traditional Chinese:**
1. é…ç½® VLAN20 (IoT)
2. é·ç§» IoT è¨­å‚™åˆ°æ–°VLAN
3. é…ç½®é˜²ç«ç‰†éš”é›¢è¦å‰‡
4. é©—è­‰ IoT è¨­å‚™åŠŸèƒ½æ­£å¸¸

**English:**
1. Configure VLAN20 (IoT)
2. Migrate IoT devices to new VLAN
3. Configure firewall isolation rules
4. Verify IoT devices work correctly

### é˜¶æ®µ3: æœåŠ¡å™¨åŒº / Phase 3: Server Zone

**ç®€ä½“ä¸­æ–‡ / Simplified Chinese:**
1. é…ç½® VLAN30 (Server)
2. åˆ†é…é™æ€IPç»™æœåŠ¡å™¨
3. é…ç½®æœåŠ¡å™¨é—´é€šä¿¡
4. è®¾ç½®æœåŠ¡ç«¯å£è½¬å‘

**ç¹é«”ä¸­æ–‡ / Traditional Chinese:**
1. é…ç½® VLAN30 (Server)
2. åˆ†é…éœæ…‹IPçµ¦æœå‹™å™¨
3. é…ç½®æœå‹™å™¨é–“é€šä¿¡
4. è¨­ç½®æœå‹™ç«¯å£è½‰ç™¼

**English:**
1. Configure VLAN30 (Server)
2. Assign static IPs to servers
3. Configure inter-server communication
4. Set up service port forwarding

### é˜¶æ®µ4: è®¿å®¢å’Œåª’ä½“ / Phase 4: Guest and Media

**ç®€ä½“ä¸­æ–‡ / Simplified Chinese:**
1. é…ç½® VLAN40 (Guest) å’Œ VLAN50 (Media)
2. é…ç½®è®¿å®¢ç½‘ç»œé™åˆ¶
3. é…ç½®åª’ä½“ç½‘ç»œQoS
4. æµ‹è¯•æµåª’ä½“åŠŸèƒ½

**ç¹é«”ä¸­æ–‡ / Traditional Chinese:**
1. é…ç½® VLAN40 (Guest) å’Œ VLAN50 (Media)
2. é…ç½®è¨ªå®¢ç¶²çµ¡é™åˆ¶
3. é…ç½®åª’é«”ç¶²çµ¡QoS
4. æ¸¬è©¦æµåª’é«”åŠŸèƒ½

**English:**
1. Configure VLAN40 (Guest) and VLAN50 (Media)
2. Configure guest network restrictions
3. Configure media network QoS
4. Test streaming functionality

### é˜¶æ®µ5: DMZ åŒºåŸŸ / Phase 5: DMZ Zone

**ç®€ä½“ä¸­æ–‡ / Simplified Chinese:**
1. é…ç½® VLAN99 (DMZ)
2. éƒ¨ç½²å¯¹å¤–æœåŠ¡åˆ°DMZ
3. é…ç½®ä¸¥æ ¼é˜²ç«å¢™è§„åˆ™
4. å®šæœŸå®‰å…¨å®¡è®¡

**ç¹é«”ä¸­æ–‡ / Traditional Chinese:**
1. é…ç½® VLAN99 (DMZ)
2. éƒ¨ç½²å°å¤–æœå‹™åˆ°DMZ
3. é…ç½®åš´æ ¼é˜²ç«ç‰†è¦å‰‡
4. å®šæœŸå®‰å…¨å¯©è¨ˆ

**English:**
1. Configure VLAN99 (DMZ)
2. Deploy external services to DMZ
3. Configure strict firewall rules
4. Regular security audits

---

## ğŸ“Š ç½‘ç»œç›‘æ§ / Network Monitoring

### ç›‘æ§æŒ‡æ ‡ / Monitoring Metrics

| æŒ‡æ ‡ / Metric | å·¥å…· / Tool | é˜ˆå€¼ / Threshold |
|----------------|--------------|------------------|
| å¸¦å®½ä½¿ç”¨ / Bandwidth | ntopng, iftop | >80% æŠ¥è­¦ |
| è®¾å¤‡åœ¨çº¿ / Device Online | Zabbix, Grafana | ç¦»çº¿ >5åˆ†é’Ÿ |
| å»¶è¿Ÿ / Latency | Smokeping | >100ms æŠ¥è­¦ |
| VLAN æµé‡ / VLAN Traffic | vnStat | å¼‚å¸¸æµé‡æŠ¥è­¦ |
| ç«¯å£æ‰«æ / Port Scan | Fail2ban | >10æ¬¡/åˆ†é’Ÿ |

### ç›‘æ§çœ‹æ¿ / Monitoring Dashboard

```yaml
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
  Grafana ä»ªè¡¨æ¿:
    - æ•´ä½“ç½‘ç»œæµé‡
    - å„ VLAN æµé‡ç»Ÿè®¡
    - è®¾å¤‡åœ¨çº¿çŠ¶æ€
    - å¸¦å®½åˆ©ç”¨ç‡
    - å¼‚å¸¸äº‹ä»¶æ—¶é—´çº¿

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
  Grafana å„€è¡¨æ¿:
    - æ•´é«”ç¶²çµ¡æµé‡
    - å„ VLAN æµé‡çµ±è¨ˆ
    - è¨­å‚™åœ¨ç·šç‹€æ…‹
    - å¸¶å¯¬åˆ©ç”¨ç‡
    - ç•°å¸¸äº‹ä»¶æ™‚é–“ç·š

English:
  Grafana Dashboard:
    - Overall network traffic
    - Per-VLAN traffic statistics
    - Device online status
    - Bandwidth utilization
    - Anomaly event timeline
```

---

## ğŸ“š å‚è€ƒèµ„æº / References

- [VLAN è®¾è®¡æœ€ä½³å®è·µ](https://www.cisco.com/c/en/us/solutions/collateral/enterprise-networks/vlan-design-guide.html)
- [OpenWrt VLAN é…ç½®](https://openwrt.org/docs/guide-user/network/vlan/switch_configuration)
- [å®¶åº­ç½‘ç»œå®‰å…¨æŒ‡å—](https://www.nist.gov/publications/guidelines-small-businesses-it-security)

---

## ğŸ“ æ›´æ–°æ—¥å¿— / Changelog

| æ—¥æœŸ / Date | ç‰ˆæœ¬ / Version | è¯´æ˜ / Description |
|-------------|----------------|-------------------|
| 2026-01-15 | 1.0.0 | åˆå§‹ç‰ˆæœ¬ / Initial release |

---

*ä½¿ç”¨ç®€ä½“ä¸­æ–‡ã€ç¹é«”ä¸­æ–‡ã€è‹±æ–‡ç»´æŠ¤ / Maintained in Simplified Chinese, Traditional Chinese, English*
