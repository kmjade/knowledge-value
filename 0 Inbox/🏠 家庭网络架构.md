---
tags:
  - network
  - infrastructure
  - home-lab
created: 2026-01-15
---

# ğŸ  å®¶åº­ç½‘ç»œæ¶æ„å®æ–½æ–¹æ¡ˆ
# Home Network Architecture Implementation Plan

---

## ğŸ“Š ç½‘ç»œéœ€æ±‚åˆ†æ / Network Requirements Analysis

### è®¾å¤‡æ¸…å• / Device Inventory

| è®¾å¤‡ç±»å‹ / Type | æ•°é‡ / Qty | è¯´æ˜ / Description |
|----------------|------------|-------------------|
| å…‰çŒ« (ONT) | 1 | 4å£ï¼Œè¿è¥å•†æä¾› / 4-port, ISP provided |
| ä¸»è·¯ç”±å™¨ | 1 | PPPoE æ‹¨å·ï¼ŒDHCP æœåŠ¡å™¨ / PPPoE dial, DHCP server |
| ä»è·¯ç”±å™¨ | 1 | AP æ¨¡å¼ï¼Œæ‰©å±•è¦†ç›– / AP mode, extend coverage |
| NAS/å­˜å‚¨ | 1+ | å›ºå®š IPï¼Œæ–‡ä»¶å…±äº« / Static IP, file sharing |
| æœåŠ¡å™¨ | 1+ | å›ºå®š IPï¼Œå¼€å‘ç¯å¢ƒ / Static IP, dev environment |
| æ™ºèƒ½å®¶å±… | å¤š | IoT å­ç½‘éš”ç¦» / IoT subnet isolation |
| å¸¸è§„è®¾å¤‡ | å¤š | ä¸»ç½‘æ®µæ¥å…¥ / Main subnet access |

### ç½‘ç»œéœ€æ±‚ / Network Requirements

| éœ€æ±‚ / Requirement | ä¼˜å…ˆçº§ / Priority |
|--------------------|--------------------|
| é«˜é€Ÿç¨³å®šä¸Šç½‘ | â­â­â­â­â­ |
| NAS/æœåŠ¡å™¨è¿œç¨‹è®¿é—® | â­â­â­â­ |
| æ™ºèƒ½å®¶å±…éš”ç¦» | â­â­â­ |
| è¦†ç›–å…¨å±‹ Wi-Fi | â­â­â­â­ |
| è®¾å¤‡é—´å¿«é€Ÿäº’é€š | â­â­â­ |

---

## ğŸ—ï¸ ç½‘ç»œæ‹“æ‰‘è®¾è®¡ / Network Topology Design

### ç‰©ç†æ‹“æ‰‘ / Physical Topology

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      äº’è”ç½‘ / Internet                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   å…‰çŒ« (ONT)   â”‚
              â”‚   4å£å…‰çŒ«     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                      â”‚    â”‚
           ISP æä¾›       â”‚    â”‚
           ç§æœ‰IP       â”‚    â”‚
                      â”‚    â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                      â”‚
             â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ä¸»è·¯ç”±å™¨     â”‚     â”‚  ä»è·¯ç”±å™¨ (AP)  â”‚
    â”‚  Main Router   â”‚     â”‚  Secondary AP  â”‚
    â”‚                â”‚     â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  WANå£   â”‚  â”‚     â”‚  â”‚  WANå£   â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                â”‚     â”‚                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ LANå£1   â”‚â—„â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”‚ LANå£    â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚                â”‚
    â”‚  â”‚ LANå£2   â”‚â”€â”¼â”€â”€â”€â”€â–ºâ”‚  Wi-Fi è¦†ç›–    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  Wi-Fi Cover   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚                â”‚
    â”‚  â”‚ LANå£3   â”‚â”€â”¼â”€â”€â”€â”€â–ºâ”‚ IoT è®¾å¤‡      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚  IoT Devices   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚  â”‚ LANå£4   â”‚â”€â”¼â”€â”€â”€â”€â–º
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚     â”‚  æœ‰çº¿è®¾å¤‡      â”‚
    â”‚  Wi-Fi 2.4G/5Gâ”‚     â”‚  Wired Devices â”‚
    â”‚                â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ IP åœ°å€è§„åˆ’ / IP Address Planning

### ä¸»ç½‘æ®µ (Main Subnet) - 192.168.1.0/24

| IP åœ°å€ / IP Address | è®¾å¤‡ / Device | è¯´æ˜ / Description |
|---------------------|---------------|-------------------|
| 192.168.1.1 | ä¸»è·¯ç”±å™¨ / Main Router | ç½‘å…³ï¼ŒDHCP æœåŠ¡å™¨ / Gateway, DHCP |
| 192.168.1.2-192.168.1.99 | åŠ¨æ€ DHCP / Dynamic Pool | å¸¸è§„è®¾å¤‡ / Regular devices |
| 192.168.1.100 | NAS/å­˜å‚¨ / NAS Storage | å›ºå®š IP / Static IP |
| 192.168.1.101 | æœåŠ¡å™¨ / Server | å›ºå®š IP / Static IP |
| 192.168.1.102 | ä»è·¯ç”±å™¨ (AP) / Secondary AP | å›ºå®š IP / Static IP |
| 192.168.1.103-192.168.1.200 | ä¿ç•™ / Reserved | å…¶ä»–æœåŠ¡å™¨è®¾å¤‡ / Other servers |
| 192.168.1.201-192.168.1.254 | é™æ€åˆ†é… / Static Pool | æ‰‹åŠ¨é…ç½®è®¾å¤‡ / Manual config |

### IoT å­ç½‘ (IoT Subnet) - 192.168.10.0/24 (å¯é€‰)

| IP åœ°å€ / IP Address | è®¾å¤‡ / Device | è¯´æ˜ / Description |
|---------------------|---------------|-------------------|
| 192.168.10.1 | ä¸»è·¯ç”±å™¨ VLAN10 | IoT ç½‘å…³ / IoT Gateway |
| 192.168.10.2-192.168.1.254 | æ™ºèƒ½å®¶å±… / Smart Home | IoT è®¾å¤‡æ±  / IoT devices |

---

## âš™ï¸ è®¾å¤‡é…ç½®æ–¹æ¡ˆ / Device Configuration

### å…‰çŒ«é…ç½® / ONT Configuration

#### ç®€ä½“ä¸­æ–‡
1. **æ¡¥æ¥æ¨¡å¼ï¼ˆæ¨èï¼‰**
   - å…³é—­å…‰çŒ«çš„ DHCP å’Œè·¯ç”±åŠŸèƒ½
   - å…‰çŒ«ä»…ä½œä¸ºå…‰ç”µè½¬æ¢è®¾å¤‡
   - PPPoE æ‹¨å·ç”±ä¸»è·¯ç”±å™¨å®Œæˆ

2. **è·¯ç”±æ¨¡å¼ï¼ˆå¤‡é€‰ï¼‰**
   - å…‰çŒ«è¿›è¡Œ PPPoE æ‹¨å·
   - ä¸»è·¯ç”±å™¨è¿æ¥å…‰çŒ« LAN å£
   - éœ€è¦é…ç½® DMZ æˆ–ç«¯å£è½¬å‘

#### Traditional Chinese
1. **æ©‹æ¥æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰**
   - é—œé–‰å…‰è²“çš„ DHCP å’Œè·¯ç”±åŠŸèƒ½
   - å…‰è²“åƒ…ä½œç‚ºå…‰é›»è½‰æ›è¨­å‚™
   - PPPoE æ’¥è™Ÿç”±ä¸»è·¯ç”±å™¨å®Œæˆ

2. **è·¯ç”±æ¨¡å¼ï¼ˆå‚™é¸ï¼‰**
   - å…‰è²“é€²è¡Œ PPPoE æ’¥è™Ÿ
   - ä¸»è·¯ç”±å™¨é€£æ¥å…‰è²“ LAN å£
   - éœ€è¦é…ç½® DMZ æˆ–ç«¯å£è½‰ç™¼

#### English
1. **Bridge Mode (Recommended)**
   - Disable ONT's DHCP and routing
   - ONT acts as optical-to-electrical converter only
   - PPPoE dialing handled by main router

2. **Router Mode (Alternative)**
   - ONT handles PPPoE dialing
   - Main router connects to ONT LAN port
   - Requires DMZ or port forwarding

---

### ä¸»è·¯ç”±å™¨é…ç½® / Main Router Configuration

#### åŸºç¡€ç½‘ç»œè®¾ç½® / Basic Network Settings

```yaml
# ç½‘ç»œé…ç½® / Network Configuration
wan:
  type: pppoe           # PPPoE æ‹¨å·
  username: "ISPè´¦å·"    # ISP Account
  password: "ISPå¯†ç "   # ISP Password
  mtu: 1492             # MTU è®¾ç½®

lan:
  ip: 192.168.1.1
  netmask: 255.255.255.0
  dhcp:
    start: 192.168.1.2
    limit: 98
    leasetime: 12h

wireless:
  radio0:
    band: 2.4GHz
    channel: auto
    ssid: "Home_2.4G"
    encryption: wpa2-psk
    key: "YourPassword123"

  radio1:
    band: 5GHz
    channel: auto
    ssid: "Home_5G"
    encryption: wpa2-psk
    key: "YourPassword123"
```

#### DNS è®¾ç½® / DNS Settings

```
ä¸»è¦ DNS / Primary DNS:   223.5.5.5  (é˜¿é‡Œäº‘ DNS / Alibaba)
å¤‡ç”¨ DNS / Secondary DNS: 119.29.29.29 (è…¾è®¯ DNS / Tencent)
æˆ– / Or:
ä¸»è¦ DNS / Primary DNS:   1.1.1.1     (Cloudflare)
å¤‡ç”¨ DNS / Secondary DNS: 8.8.8.8     (Google)
```

#### é™æ€ IP åˆ†é… / Static IP Assignment

| MAC åœ°å€ / MAC | è®¾å¤‡ / Device | å›ºå®š IP / Static IP |
|---------------|---------------|--------------------|
| `AA:BB:CC:DD:EE:01` | NAS | 192.168.1.100 |
| `AA:BB:CC:DD:EE:02` | æœåŠ¡å™¨ | 192.168.1.101 |
| `AA:BB:CC:DD:EE:03` | ä»è·¯ç”±å™¨ | 192.168.1.102 |

---

### ä»è·¯ç”±å™¨ (AP æ¨¡å¼) é…ç½® / Secondary AP Configuration

#### AP æ¨¡å¼è®¾ç½® / AP Mode Settings

```
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
1. å°†ä»è·¯ç”±å™¨è¿æ¥åˆ°ä¸»è·¯ç”±å™¨çš„ LAN å£
2. å…³é—­ä»è·¯ç”±å™¨çš„ DHCP åŠŸèƒ½
3. è®¾ç½®ä¸ä¸»ç½‘æ®µä¸åŒçš„ LAN IP (192.168.1.102)
4. é…ç½®ç›¸åŒæˆ–ç±»ä¼¼çš„ Wi-Fi SSID å’Œå¯†ç 
5. è®¾ç½®ä¸åŒçš„ä¿¡é“ä»¥å‡å°‘å¹²æ‰°

ç¹é«”ä¸­æ–‡ / Traditional Chinese:
1. å°‡å¾è·¯ç”±å™¨é€£æ¥åˆ°ä¸»è·¯ç”±å™¨çš„ LAN å£
2. é—œé–‰å¾è·¯ç”±å™¨çš„ DHCP åŠŸèƒ½
3. è¨­ç½®èˆ‡ä¸»ç¶²æ®µä¸åŒçš„ LAN IP (192.168.1.102)
4. é…ç½®ç›¸åŒæˆ–é¡ä¼¼çš„ Wi-Fi SSID å’Œå¯†ç¢¼
5. è¨­ç½®ä¸åŒçš„ä¿¡é“ä»¥æ¸›å°‘å¹²æ“¾

English:
1. Connect secondary router to main router's LAN port
2. Disable DHCP on secondary router
3. Set different LAN IP (192.168.1.102) within main subnet
4. Configure same or similar Wi-Fi SSID and password
5. Set different channels to reduce interference
```

#### å…·ä½“é…ç½®æ­¥éª¤ / Configuration Steps

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 1 / Step 1: ç‰©ç†è¿æ¥ / Physical Connection           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…‰çŒ« LAN1 â”€â”€â”€â”€â”€â”€â”€â”€â–º ä¸»è·¯ç”±å™¨ WAN                         â”‚
â”‚  å…‰çŒ« LAN2 â”€â”€â”€â”€â”€â”€â”€â”€â–º ä¸»è·¯ç”±å™¨ LAN (æ¡¥æ¥æ¨¡å¼)              â”‚
â”‚  ä¸»è·¯ç”±å™¨ LAN â”€â”€â”€â”€â”€â–º ä»è·¯ç”±å™¨ LAN (AP æ¨¡å¼)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 2 / Step 2: ä»è·¯ç”±å™¨ AP æ¨¡å¼ / AP Mode             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ç™»å½•ä»è·¯ç”±å™¨ç®¡ç†ç•Œé¢                                 â”‚
â”‚  2. æ‰¾åˆ°"å·¥ä½œæ¨¡å¼"æˆ–"è·¯ç”±/AP"é€‰é¡¹                        â”‚
â”‚  3. é€‰æ‹©"AP æ¨¡å¼"æˆ–"æ¥å…¥ç‚¹æ¨¡å¼"                          â”‚
â”‚  4. ä¿å­˜è®¾ç½®å¹¶é‡å¯                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 3 / Step 3: ç½‘ç»œè®¾ç½® / Network Settings            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. è®¾ç½® LAN IP: 192.168.1.102                          â”‚
â”‚  2. å…³é—­ DHCP æœåŠ¡å™¨                                      â”‚
â”‚  3. è®¾ç½®ç›¸åŒ SSID: "Home_2.4G", "Home_5G"                â”‚
â”‚  4. è®¾ç½®ç›¸åŒå¯†ç                                           â”‚
â”‚  5. 2.4G ä¿¡é“: 1 æˆ– 6 æˆ– 11                            â”‚
â”‚  6. 5G ä¿¡é“: ä¸ä¸»è·¯ç”±å™¨ä¸åŒ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” å®‰å…¨é…ç½® / Security Configuration

### é˜²ç«å¢™è§„åˆ™ / Firewall Rules

```yaml
# ç®€ä½“ä¸­æ–‡ / Simplified Chinese
firewall:
  # é»˜è®¤ç­–ç•¥
  default_input: ACCEPT      # é»˜è®¤æ¥å—å…¥ç«™
  default_output: ACCEPT     # é»˜è®¤æ¥å—å‡ºç«™
  default_forward: REJECT    # é»˜è®¤æ‹’ç»è½¬å‘

  # å…è®¸çš„è§„åˆ™
  rules:
    - name: "å…è®¸å±€åŸŸç½‘è®¿é—®"
      src: "192.168.1.0/24"
      dest: "192.168.1.1"
      action: ACCEPT

    - name: "å…è®¸å·²å»ºç«‹çš„è¿æ¥"
      state: "ESTABLISHED,RELATED"
      action: ACCEPT

    - name: "å…è®¸ ICMP"
      proto: "icmp"
      action: ACCEPT

# Traditional Chinese / ç¹é«”ä¸­æ–‡
firewall:
  # é è¨­ç­–ç•¥
  default_input: ACCEPT
  default_output: ACCEPT
  default_forward: REJECT

  # å…è¨±çš„è¦å‰‡
  rules:
    - name: "å…è¨±å€åŸŸç¶²è¨ªå•"
      src: "192.168.1.0/24"
      dest: "192.168.1.1"
      action: ACCEPT

    - name: "å…è¨±å·²å»ºç«‹çš„é€£æ¥"
      state: "ESTABLISHED,RELATED"
      action: ACCEPT

    - name: "å…è¨± ICMP"
      proto: "icmp"
      action: ACCEPT

# English
firewall:
  # Default policies
  default_input: ACCEPT
  default_output: ACCEPT
  default_forward: REJECT

  # Allowed rules
  rules:
    - name: "Allow LAN access"
      src: "192.168.1.0/24"
      dest: "192.168.1.1"
      action: ACCEPT

    - name: "Allow established connections"
      state: "ESTABLISHED,RELATED"
      action: ACCEPT

    - name: "Allow ICMP"
      proto: "icmp"
      action: ACCEPT
```

### ç«¯å£è½¬å‘ / Port Forwarding

| æœåŠ¡ / Service | å¤–éƒ¨ç«¯å£ / External Port | å†…éƒ¨ IP / Internal IP | å†…éƒ¨ç«¯å£ / Internal Port |
|----------------|------------------------|-----------------------|------------------------|
| NAS Web | 80 | 192.168.1.100 | 80 |
| NAS SSH | 2222 | 192.168.1.100 | 22 |
| æœåŠ¡å™¨ SSH | 2201 | 192.168.1.101 | 22 |
| æœåŠ¡å™¨ Web | 8080 | 192.168.1.101 | 80 |

---

## ğŸ”§ é«˜çº§é…ç½® / Advanced Configuration

### VLAN é…ç½®ï¼ˆå¯é€‰ï¼‰ / VLAN Configuration (Optional)

```yaml
# ä¸ºæ™ºèƒ½å®¶å±…åˆ›å»ºç‹¬ç«‹ VLAN
# Create separate VLAN for smart home devices

vlan_config:
  VLAN10_IoT:
    id: 10
    name: "IoT_Network"
    subnet: "192.168.10.0/24"
    gateway: "192.168.10.1"
    dhcp:
      start: "192.168.10.2"
      end: "192.168.10.254"

  # VLAN è®¿é—®è§„åˆ™
  # VLAN access rules
  firewall:
    - name: "IoT to Internet"
      src: "192.168.10.0/24"
      dest: "any"
      action: ACCEPT

    - name: "Block IoT to Main LAN"
      src: "192.168.10.0/24"
      dest: "192.168.1.0/24"
      action: REJECT
```

### QoS é…ç½® / QoS Configuration

```yaml
# æµé‡ä¼˜å…ˆçº§è®¾ç½®
# Traffic priority settings

qos:
  # æ¸¸æˆ / Gaming
  gaming:
    priority: highest
    ports: ["27015-27030", "3478-3480"]

  # è§†é¢‘æµåª’ä½“ / Video Streaming
  streaming:
    priority: high
    ports: ["80", "443"]

  # æ–‡ä»¶ä¸‹è½½ / File Download
  download:
    priority: low
    limit: "50%"

  # ä¸Šä¼ é™åˆ¶ / Upload Limit
  upload:
    max_bandwidth: "80%"
```

---

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å• / Configuration Checklist

### å…‰çŒ« (ONT) / å…‰è²“
- [ ] åˆ‡æ¢åˆ°æ¡¥æ¥æ¨¡å¼ / åˆ‡æ›åˆ°æ©‹æ¥æ¨¡å¼ / Switch to bridge mode
- [ ] ç¡®è®¤è¿è¥å•†è´¦å·ä¿¡æ¯ / ç¢ºèªé‹ç‡Ÿå•†è³¬è™Ÿä¿¡æ¯ / Verify ISP account info

### ä¸»è·¯ç”±å™¨ / Main Router
- [ ] PPPoE æ‹¨å·é…ç½® / PPPoE æ’¥è™Ÿé…ç½® / PPPoE dialing configured
- [ ] LAN IP è®¾ç½® (192.168.1.1) / LAN IP è¨­ç½®
- [ ] DHCP æœåŠ¡å™¨å¯ç”¨ / DHCP æœå‹™å™¨å•Ÿç”¨ / DHCP server enabled
- [ ] Wi-Fi SSID å’Œå¯†ç  / Wi-Fi SSID å’Œå¯†ç¢¼ / Wi-Fi credentials set
- [ ] DNS æœåŠ¡å™¨é…ç½® / DNS æœå‹™å™¨é…ç½® / DNS servers configured
- [ ] é˜²ç«å¢™è§„åˆ™è®¾ç½® / é˜²ç«ç‰†è¦å‰‡è¨­ç½® / Firewall rules set
- [ ] é™æ€ IP åˆ†é… / éœæ…‹ IP åˆ†é… / Static IP assignments

### ä»è·¯ç”±å™¨ (AP) / Secondary Router
- [ ] è¿æ¥åˆ°ä¸»è·¯ç”±å™¨ LAN å£ / é€£æ¥åˆ°ä¸»è·¯ç”±å™¨ LAN å£
- [ ] AP æ¨¡å¼å¯ç”¨ / AP æ¨¡å¼å•Ÿç”¨ / AP mode enabled
- [ ] DHCP åŠŸèƒ½å…³é—­ / DHCP åŠŸèƒ½é—œé–‰ / DHCP disabled
- [ ] LAN IP è®¾ç½® (192.168.1.102) / LAN IP è¨­ç½®
- [ ] Wi-Fi ä¸ä¸»è·¯ç”±å™¨ç›¸åŒ / Wi-Fi èˆ‡ä¸»è·¯ç”±å™¨ç›¸åŒ
- [ ] ä¿¡é“ä¼˜åŒ– / ä¿¡é“å„ªåŒ– / Channel optimized

### æœåŠ¡å™¨å’Œ NAS / Servers and NAS
- [ ] é™æ€ IP é…ç½® / éœæ…‹ IP é…ç½® / Static IP configured
- [ ] ç½‘ç»œè¿é€šæ€§æµ‹è¯• / ç¶²çµ¡é€£é€šæ€§æ¸¬è©¦ / Connectivity tested
- [ ] ç«¯å£è½¬å‘è®¾ç½® / ç«¯å£è½‰ç™¼è¨­ç½® / Port forwarding configured

---

## ğŸ› æ•…éšœæ’é™¤ / Troubleshooting

### å¸¸è§é—®é¢˜ / Common Issues

#### é—®é¢˜ 1: æ— æ³•ä¸Šç½‘ / Issue 1: No Internet Access

```
ç®€ä½“ä¸­æ–‡ / Simplified Chinese:
è¯Šæ–­æ­¥éª¤:
1. æ£€æŸ¥å…‰çŒ«ç”µæºå’Œå…‰ä¿¡å·
2. ç¡®è®¤ PPPoE æ‹¨å·æ˜¯å¦æˆåŠŸ
3. æ£€æŸ¥ DNS è®¾ç½®
4. é‡å¯è®¾å¤‡

è§£å†³æ–¹æ¡ˆ:
- å…‰çŒ«æ‹¨å·: è”ç³»è¿è¥å•†
- è·¯ç”±å™¨æ‹¨å·: æ£€æŸ¥è´¦å·å¯†ç 
- DNS é—®é¢˜: æ›´æ¢ä¸º 223.5.5.5 / 8.8.8.8

Traditional Chinese / ç¹é«”ä¸­æ–‡:
è¨ºæ–·æ­¥é©Ÿ:
1. æª¢æŸ¥å…‰è²“é›»æºå’Œå…‰ä¿¡è™Ÿ
2. ç¢ºèª PPPoE æ’¥è™Ÿæ˜¯å¦æˆåŠŸ
3. æª¢æŸ¥ DNS è¨­ç½®
4. é‡å•Ÿè¨­å‚™

è§£æ±ºæ–¹æ¡ˆ:
- å…‰è²“æ’¥è™Ÿ: è¯ç¹«é‹ç‡Ÿå•†
- è·¯ç”±å™¨æ’¥è™Ÿ: æª¢æŸ¥è³¬è™Ÿå¯†ç¢¼
- DNS å•é¡Œ: æ›´æ›ç‚º 223.5.5.5 / 8.8.8.8

English:
Troubleshooting Steps:
1. Check ONT power and optical signal
2. Verify PPPoE dialing success
3. Check DNS settings
4. Restart devices

Solutions:
- ONT dialing: Contact ISP
- Router dialing: Verify account credentials
- DNS issue: Change to 223.5.5.5 / 8.8.8.8
```

#### é—®é¢˜ 2: Wi-Fi ä¿¡å·å¼± / Issue 2: Weak Wi-Fi Signal

```
è§£å†³æ–¹æ¡ˆ / Solutions:
- è°ƒæ•´è·¯ç”±å™¨ä½ç½®ï¼Œé¿å…éšœç¢ç‰©
- ä½¿ç”¨ 5GHz é¢‘æ®µè·å¾—æ›´å¿«é€Ÿåº¦
- ä½¿ç”¨ 2.4GHz é¢‘æ®µè·å¾—æ›´å¥½è¦†ç›–
- è€ƒè™‘ Mesh ç³»ç»Ÿæˆ–å¢åŠ æ›´å¤š AP

è§£æ±ºæ–¹æ¡ˆ:
- èª¿æ•´è·¯ç”±å™¨ä½ç½®ï¼Œé¿å…éšœç¤™ç‰©
- ä½¿ç”¨ 5GHz é »æ®µç²å¾—æ›´å¿«é€Ÿåº¦
- ä½¿ç”¨ 2.4GHz é »æ®µç²å¾—æ›´å¥½è¦†è“‹
- è€ƒæ…® Mesh ç³»çµ±æˆ–å¢åŠ æ›´å¤š AP

Solutions:
- Relocate router to avoid obstacles
- Use 5GHz for faster speeds
- Use 2.4GHz for better coverage
- Consider Mesh system or add more APs
```

#### é—®é¢˜ 3: IP åœ°å€å†²çª / Issue 3: IP Address Conflict

```
è§£å†³æ–¹æ¡ˆ / Solutions:
- æ£€æŸ¥è®¾å¤‡é™æ€ IP è®¾ç½®
- æ£€æŸ¥ DHCP åœ°å€æ± 
- ä½¿ç”¨ arp -a å‘½ä»¤æŸ¥çœ‹å†²çªè®¾å¤‡
- ä¿®æ”¹å†²çªè®¾å¤‡çš„ IP åœ°å€

è§£æ±ºæ–¹æ¡ˆ:
- æª¢æŸ¥è¨­å‚™éœæ…‹ IP è¨­ç½®
- æª¢æŸ¥ DHCP åœ°å€æ± 
- ä½¿ç”¨ arp -a å‘½ä»¤æŸ¥çœ‹è¡çªè¨­å‚™
- ä¿®æ”¹è¡çªè¨­å‚™çš„ IP åœ°å€

Solutions:
- Check device static IP settings
- Check DHCP address pool
- Use arp -a to find conflicting device
- Change conflicting device's IP
```

#### é—®é¢˜ 4: NAS æ— æ³•è®¿é—® / Issue 4: NAS Cannot Be Accessed

```
è¯Šæ–­æ­¥éª¤:
1. ping NAS IP: ping 192.168.1.100
2. æ£€æŸ¥ NAS ç½‘ç»œè®¾ç½®
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
4. æ£€æŸ¥ç«¯å£è½¬å‘è®¾ç½®

è§£æ±ºæ–¹æ¡ˆ:
- ç¢ºèª NAS IP æ­£ç¢º
- æª¢æŸ¥ NAS ç¶²çµ¡è¨­ç½®
- æª¢æŸ¥é˜²ç«ç‰†è¦å‰‡
- æª¢æŸ¥ç«¯å£è½‰ç™¼è¨­ç½®

Solutions:
- Verify correct NAS IP
- Check NAS network settings
- Check firewall rules
- Check port forwarding settings
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®® / Performance Optimization

### ç½‘ç»œä¼˜åŒ– / Network Optimization

| é¡¹ç›® / Item | è¯´æ˜ / Description |
|-------------|-------------------|
| **MTU è®¾ç½®** | ä¸€èˆ¬è®¾ç½®ä¸º 1492 (PPPoE) æˆ– 1500 |
| **ä¿¡é“é€‰æ‹©** | 2.4G ä½¿ç”¨ 1/6/11ï¼Œé¿å…é‚»é“å¹²æ‰° |
| **QoS ä¼˜å…ˆçº§** | æ¸¸æˆ > æµåª’ä½“ > æµè§ˆ > ä¸‹è½½ |
| **DNS é€‰æ‹©** | ä¼˜å…ˆä½¿ç”¨å›½å†… DNSï¼Œé™ä½å»¶è¿Ÿ |
| **å®šæœŸé‡å¯** | æ¯æœˆé‡å¯è·¯ç”±å™¨ï¼Œä¿æŒç¨³å®š |

### è®¾å¤‡å»ºè®® / Device Recommendations

| ç”¨é€” / Use Case | æ¨è / Recommendation |
|-----------------|---------------------|
| ä¸»è·¯ç”±å™¨ | æ”¯æŒåƒå…†ï¼Œå¸¦ USB æ¥å£ |
| ä»è·¯ç”±å™¨/AP | æ”¯æŒ 802.11ac/axï¼Œåƒå…†å£ |
| NAS | åƒå…†ç½‘å£ï¼Œæ”¯æŒ RAID |
| ç½‘çº¿ | è¶…äº”ç±» (Cat5e) æˆ–å…­ç±» (Cat6) |

---

## ğŸ”— ç›¸å…³èµ„æº / Related Resources

- [OpenWrt å®˜æ–¹æ–‡æ¡£](https://openwrt.org/docs/guide-user/start)
- [TP-Link è·¯ç”±å™¨é…ç½®](https://www.tp-link.com/support/)
- [å°ç±³è·¯ç”±å™¨å¸®åŠ©](https://miwifi.com/)
- [ç¾¤æ™– NAS é…ç½®](https://kb.synology.com/)

---

## ğŸ“ æ›´æ–°æ—¥å¿— / Changelog

| æ—¥æœŸ / Date | ç‰ˆæœ¬ / Version | è¯´æ˜ / Description |
|-------------|----------------|-------------------|
| 2026-01-15 | 1.0.0 | åˆå§‹ç‰ˆæœ¬ / Initial release |

---

*ä½¿ç”¨ç®€ä½“ä¸­æ–‡ã€ç¹é«”ä¸­æ–‡ã€è‹±æ–‡ç»´æŠ¤ / Maintained in Simplified Chinese, Traditional Chinese, English*
