{"type":"meta","id":"conv-1771459635566-xql37qhy8","title":"备份后优化","createdAt":1771459635566,"updatedAt":1771459719117,"lastResponseAt":1771459716364,"sessionId":"94631328-5013-4b63-858c-6dc91054fad4","currentNote":"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md","usage":{"model":"claude-opus-4-6","inputTokens":5464,"cacheCreationInputTokens":0,"cacheReadInputTokens":192780,"contextWindow":200000,"contextTokens":198244,"percentage":99},"titleGenerationStatus":"failed"}
{"type":"message","message":{"id":"msg-1771459653902-4ls29qzlw","role":"user","content":"备份后优化","timestamp":1771459653902,"currentNote":"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md"}}
{"type":"message","message":{"id":"msg-1771459653903-3f5htohhd","role":"assistant","content":"我来帮你备份后优化这个笔记。首先让我读取文件内容，然后进行备份和优化。我已经读取了文件内容。现在我会先备份这个文件,然后进行优化。备份已完成。现在让我优化这个文档,主要包括:\n1. 移除冗余的空行\n2. 移除不必要的外部链接标记\n3. 优化标题层级\n4. 改善可读性✅ **备份和优化已完成！**\n\n## 完成的操作：\n\n1. **备份成功**: 已创建备份文件 `6.3.1. 概述.backup.md` (14KB)\n2. **文件大小优化**: 原始文件 14KB → 优化后 12KB (节省约 14%)\n3. **优化内容**:\n   - 移除了所有 `[](...)` 链接标记\n   - 清理了多余的空行\n   - 将\"小技巧\"和\"注解\"改为引用块格式，更加醒目\n   - 统一了代码块格式\n   - 优化了标题层级和段落分隔\n   - 改善了表格和列表的可读性\n   - 添加了分隔线来区分主要章节\n\n## 文件对比：\n\n- **备份文件**: `[[6.3.1. 概述.backup.md]]` - 保留原始内容\n- **优化文件**: `[[6.3.1. 概述.md]]` - 清理后的版本\n\n优化后的文档更加整洁易读，同时保留了所有重要信息和外部链接。","timestamp":1771459653903,"toolCalls":[{"id":"call_8a5a56503caf4e9baa6eca54","name":"Read","input":{"file_path":"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md"},"status":"completed","isExpanded":false,"result":"     1→\n     2→\n     3→# 6.3.1. 概述[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id1 \"永久链接至标题\")\n     4→\n     5→本指南适用于已了解地平线入门指南内容的用户，主要介绍地平线算法工具链中训练后量化PTQ方法的原理及步骤详解、模型算子支持说明、以及模型上板运行的嵌入式应用开发说明等； 若您是第一次使用地平线算法工具链的用户，建议您跳转至 [入门指南](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_beginner/env_install.html) 章节进行学习。\n     6→\n     7→# 6.3.2. 环境安装[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id3 \"永久链接至标题\")\n     8→\n     9→本章节主要介绍地平线算法工具链完整开发环境部署方法。\n    10→\n    11→## 6.3.2.1. 交付物使用说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id4 \"永久链接至标题\")\n    12→\n    13→在进行算法工具链使用环境部署前，请下载地平线提供的 [嵌入式应用开发Sample交付包](https://pan.horizon.ai/index.php/s/iZwyzXoJLs8Btme) 到Linux开发机环境中。\n    14→\n    15→小技巧\n    16→\n    17→嵌入式应用开发Sample交付包，请在更新开发板系统后，下载当前目录中的最新版本使用。\n    18→\n    19→### 示例包源码目录结构说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id5 \"永久链接至标题\")\n    20→\n    21→解压算法工具链SDK源码包：\n    22→\n    23→tar -xvf Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X.tar.xz\n    24→\n    25→解压后的目录结构如下：\n    26→\n    27→- **ai_benchmark**: 目录下提供了常见的分类、检测和分割模型的评测示例，包括性能评测和精度评测两部分。\n    28→    \n    29→- **horizon_runtime_sample**: 目录下提供了定点模型的上板示例。\n    30→    \n    31→- **package**: 目录下包含了发布物运行的一些基础库和组件\n    32→    \n    33→    1. `board` 文件夹下为板端可执行程序。\n    34→        \n    35→    2. `host` 文件夹下为x86开发环境下的环境依赖、工具依赖以及模型推理相关的libdnn库和头文件。\n    36→        \n    37→\n    38→## 6.3.2.2. 开发机部署[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id6 \"永久链接至标题\")\n    39→\n    40→对于开发机的环境部署，地平线支持使用Docker部署方式。\n    41→\n    42→### 开发机准备[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id7 \"永久链接至标题\")\n    43→\n    44→为了顺利地使用算法工具链，地平线建议您选择的开发机应满足以下要求：\n    45→\n    46→|硬件/操作系统|要求|\n    47→|---|---|\n    48→|CPU|CPU I3以上或者同级别E3/E5的处理器|\n    49→|内存|16G或以上级别|\n    50→|GPU(可选)|CUDA11、驱动版本Linux:>= 450.80.02*<br><br>适配显卡包括但不限于：<br><br>1)GeForce RTX 3090<br><br>2)GeForce RTX 2080 Ti<br><br>3)NVIDIA TITAN V<br><br>4)Tesla V100S-PCIE-32GB|\n    51→|系统|CentOS 7、Ubuntu 18.04及以上|\n    52→\n    53→更多关于CUDA与显卡的兼容性问题请参考 [NVIDIA官网信息](https://docs.nvidia.com/deploy/cuda-compatibility/) 。\n    54→\n    55→### 使用Docker环境[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#docker \"永久链接至标题\")\n    56→\n    57→为了帮助您快速使用算法工具链，地平线提供了包含完整开发环境的Docker镜像，大大简化了环境的部署过程。\n    58→\n    59→在阅读此部分内容前，我们希望您的开发机中已经预装好了Docker的基础环境。 地平线要求的Docker基础环境信息如下：\n    60→\n    61→- Docker（>=1.12 建议安装18.03.0-ce）, 安装手册 [https://docs.docker.com/install/](https://docs.docker.com/install/)。\n    62→    \n    63→- NVIDIA Docker（2.0.3），安装手册 [NVIDIA/nvidia-docker](https://github.com/nvidia/nvidia-docker/wiki)。\n    64→    \n    65→\n    66→完成Docker环境安装后，需要将无root权限的用户添加到Docker用户组中。参考如下命令：\n    67→\n    68→sudo groupadd docker\n    69→sudo gpasswd -a ${USER} docker\n    70→sudo systemctl restart docker  # CentOS7/Ubuntu\n    71→# re-login\n    72→\n    73→请从 [地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags) ，获取模型转换编译需要使用的 **最新版本的Docker镜像**。 Docker镜像文件命名形式为 `openexplorer/ai_toolchain_centos_7_xj3:{version}`。\n    74→\n    75→小技巧\n    76→\n    77→执行命令时将 `{version}` 替换为您获取到的 **最新版本的Docker镜像** ，例如： [地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags) 中目前的最新版本为 `openexplorer/ai_toolchain_centos_7_xj3:v2.4.2`。\n    78→\n    79→本地Docker镜像包版本，可以联系地平线技术支持团队获取。\n    80→\n    81→开发机并不是必须含有GPU卡，一般使用CPU开发机加载Docker镜像即可做模型转换！\n    82→\n    83→每个镜像文件在第一次使用前，需要拉取镜像。\n    84→\n    85→- 镜像拉取命令为：\n    86→    \n    87→    docker pull openexplorer/ai_toolchain_centos_7_xj3:v2.4.2\n    88→    \n    89→\n    90→然后执行以下命令运行Docker容器。\n    91→\n    92→- CPU开发机Docker容器执行以下命令：\n    93→    \n    94→    // 运行 docker 镜像的命令\n    95→    \n    96→    export version=v2.4.2\n    97→    \n    98→    export ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n    99→    \n   100→    export dataset_path=/home/users/xxx/data/\n   101→    \n   102→    docker run -it --rm \\\n   103→      -v \"$ai_toolchain_package_path\":/open_explorer \\\n   104→      -v \"$dataset_path\":/data \\\n   105→      openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n   106→    \n   107→- GPU开发机 Docker容器执行以下命令：\n   108→    \n   109→    // 运行 docker 镜像的命令\n   110→    \n   111→    export version=v2.4.2\n   112→    \n   113→    export ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n   114→    \n   115→    export dataset_path=/home/users/xxx/data/\n   116→    \n   117→    docker run -it --runtime=nvidia -e NVIDIA_DRIVER_CAPABILITIES=compute,utility \\\n   118→      -e NVIDIA_VISIBLE_DEVICES=all --rm --shm-size=\"15g\" \\\n   119→      -v \"$ai_toolchain_package_path\":/open_explorer \\\n   120→      -v \"$dataset_path\":/data \\\n   121→      openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n   122→    \n   123→\n   124→注解\n   125→\n   126→在执行上述命令时：\n   127→\n   128→- `dataset_path` 为数据集文件目录，如果该目录不存在会导致加载问题，需要创建好后再运行命令。 您可以从 `ftp://vrftp.horizon.ai/Open_Explorer/eval_dataset` 获取数据集，然后创建该路径。\n   129→    \n   130→\n   131→至此，您已经成功通过Docker镜像进入完整的算法工具链开发环境。 您可以键入 `hb_mapper --help` 命令验证是否可以正常得到帮助信息：\n   132→\n   133→[root@d67382e74eea open_explorer]# hb_mapper --help\n   134→Usage: hb_mapper [OPTIONS] COMMAND [ARGS]...\n   135→\n   136→  hb_mapper is an offline model transform tool provided by horizon.\n   137→\n   138→Options:\n   139→  --version  Show the version and exit.\n   140→  --help     Show this message and exit.\n   141→\n   142→Commands:\n   143→  checker    check whether the model meet the requirements.\n   144→  infer      inference and dump output feature as float vector.\n   145→  makertbin  transform caffe model to quantization model, generate runtime...\n   146→\n   147→若hb_mapper工具已正常输出日志， 说明环境已安装部署完成，请到 **开发板部署** 章节，进行开发板的环境安装。\n   148→\n   149→## 6.3.2.3. 开发板部署[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id9 \"永久链接至标题\")\n   150→\n   151→开发板部署需要您按照刷机说明，将开发版镜像更新到最新版本，升级方法请参考 [系统更新](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/System_Configuration/System_Configuration.html#id2) 章节内容， 升级完成后，再将相关补充文件拷贝到开发板中即可。\n   152→\n   153→### 补充文件准备[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id11 \"永久链接至标题\")\n   154→\n   155→算法工具链的部分补充工具未包含在系统镜像中，这些工具已经放置在 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/` 安装包中， 进入到 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/board` 执行install脚本。 执行命令如下：\n   156→\n   157→bash install.sh ${board_ip}\n   158→\n   159→注解\n   160→\n   161→其中，`${board_ip}` 是您为开发板设置的IP地址，请确保在开发机上可以访问该IP。 成功安装后，重新启动开发板，在开发板上执行 `hrt_model_exec` 可以验证安装是否成功。\n   162→\n   163→## 6.3.2.4. 版本管理工具使用说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id12 \"永久链接至标题\")\n   164→\n   165→本章节主要介绍ddk_vcs版本管理工具的使用说明，便于开发者了解当前开发机环境中算法工具链依赖包的版本情况。\n   166→\n   167→工具包括以下功能：\n   168→\n   169→- ddk_vcs list;\n   170→    \n   171→- ddk_vcs install;\n   172→    \n   173→- ddk_vcs uninstall;\n   174→    \n   175→- ddk_vcs patch;\n   176→    \n   177→- ddk_vcs show;\n   178→    \n   179→\n   180→### ddk_vcs list[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-list \"永久链接至标题\")\n   181→\n   182→ddk_vcs list 用于列出已安装的软件包。\n   183→\n   184→不加参数执行此命令时，结果会展示当前已安装的各个模块的信息。使用示例如下：\n   185→\n   186→[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs list\n   187→Host package version: v2.0.3\n   188→The following packages versions\n   189→Platform        Package         Version MD5\n   190→--------------- --------------- ------- -------------\n   191→aarch_64        appsdk          032419  093e13b44e\n   192→aarch_64        dnn             1.8.1g  aff0f6f4de\n   193→x86_64_gcc5.4.0 dnn_x86         1.8.1g  e8e6bf9ed5\n   194→x86             horizon-nn      0.13.3  origin:0.13.3\n   195→x86             horizon-nn-gpu  0.13.3  origin:N/A\n   196→x86             horizon-tc-ui   1.6.4   origin:1.6.4\n   197→x86             hbdk            3.28.3  origin:3.28.3\n   198→\n   199→注解\n   200→\n   201→最后几行的origin信息会在每次使用工具链SDK包内的install脚本进行安装后更新为当前环境下的版本， 后续在使用ddk_vcs进行安装时则不会改变，只会改变Version的值。\n   202→\n   203→使用 `-p` 参数以后会显示当前可以安装的模块版本情况，可以通过 `ddk_vcs install` 进行安装，使用示例如下：\n   204→\n   205→[horizon@gpu-dev004]$ ddk_vcs list -p\n   206→Host package version: 1.5.1\n   207→The following packages versions\n   208→Platform        Local Package                 Version MD5\n   209→--------------- ----------------------------- ------- ----------\n   210→aarch_64        appsdk_1.9.0.tar.gz           1.9.0   bf01140c9d\n   211→aarch_64        bpu_predict_1.10.2.tar.gz     1.10.2  5b6e5dd6c5\n   212→aarch_64        dnn_1.1.2a.tar.gz             1.1.2a  fdb5729f4f\n   213→x86_64_gcc5.4.0 bpu_predict_1.10.2.tar.gz     1.10.2  4dbdd980a7\n   214→x86_64_gcc5.4.0 dnn_x86_1.1.2a.tar.gz         1.1.2a  5bf5fcd4fe\n   215→\n   216→### ddk_vcs install[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-install \"永久链接至标题\")\n   217→\n   218→ddk_vcs install 用于对安装包进行安装。 用户可以直接通过 `ddk_vcs install` 将对应的模块tar包进行安装。安装时需要指定对应的platform。使用示例如下：\n   219→\n   220→[horizon@gpu-dev004]$ ddk_vcs install bpu_predict_1.10.2.tar.gz -p aarch_64\n   221→bpu_predict installed successfully, version: 1.10.2, platform: aarch_64\n   222→[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs install hbdk-3.28.3-py3-none-linux_x86_64.whl  horizon_nn-0.13.3-py3-none-any.whl\n   223→hbdk-3.28.3-py3-none-linux_x86_64.whl installed successfully\n   224→horizon_nn-0.13.3-py3-none-any.whl installed successfully\n   225→\n   226→在使用 `ddk_vcs list -p` 后用户可以得到自己当前host package中各个模块包的版本信息， 然后使用 `ddk_vcs install` 可以很方便地切换各个版本，使用示例如下：\n   227→\n   228→[horizon@gpu-dev004]$ ddk_vcs install bpu_predict==1.7.2  --platform aarch_64\n   229→bpu_predict installed successfully, version: 1.7.2, platform: aarch_64\n   230→\n   231→如果本地没有对应版本可以指定安装包位置进行安装。\n   232→\n   233→### ddk_vcs uninstall[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-uninstall \"永久链接至标题\")\n   234→\n   235→ddk_vcs uninstall 用于卸载指定模块。使用示例如下：\n   236→\n   237→[horizon@gpu-dev004]$ ddk_vcs uninstall bpu_predict --platform aarch_64\n   238→Start to uninstall modules, platform: aarch_64\n   239→bpu_predict uninstalled successfully, version: 1.10.2, platform: aarch_64\n   240→\n   241→### ddk_vcs patch[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-patch \"永久链接至标题\")\n   242→\n   243→使用 `ddk_vcs patch ddk_patch.tar.gz` 可以安装预先制作好的patch包。使用示例如下：\n   244→\n   245→[horizon@gpu-dev004]$ ddk_vcs patch ddk_patch.tar.gz\n   246→bpu_predict installed successfully, version: 1.7.2_patch0, platform: aarch64\n   247→\n   248→### ddk_vcs show[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-show \"永久链接至标题\")\n   249→\n   250→ddk_vcs show 用于显示有关已安装软件包的信息。使用 `ddk_vcs show [模块名]` ，可以展示对应模块的信息。使用示例如下：\n   251→\n   252→[horizon@gpu-dev004]$ ddk_vcs show bpu_predict\n   253→Host package version 1.5.1\n   254→The following packages versions\n   255→Platform        Package     Version       MD5\n   256→--------------- ----------- ------------- ----------\n   257→aarch_64        bpu_predict 1.10.2        5b6e5dd6c5\n   258→x86_64_gcc5.4.0 bpu_predict 1.10.2_patch1 d4f8e37921\n   259→\n   260→如果2个架构内有同名依赖，可以使用 `-p/--platform` 指定架构名进行过滤。使用示例如下：\n   261→\n   262→[horizon@gpu-dev004]$ ddk_vcs show bpu_predict -p aarch_64\n   263→Host package version 1.5.1\n   264→The following packages versions\n   265→Platform Package     Version MD5\n   266→-------- ----------- ------- ----------\n   267→aarch_64 bpu_predict 1.10.2  5b6e5dd6c5\n   268→"},{"id":"call_030eef1b56384ef8b2188c12","name":"TodoWrite","input":{"todos":[{"activeForm":"正在备份原始文件","content":"备份原始文件","status":"in_progress"},{"activeForm":"正在清理冗余内容","content":"清理冗余内容(空行、链接标记)","status":"pending"},{"activeForm":"正在优化格式和结构","content":"优化格式和结构","status":"pending"},{"activeForm":"正在验证优化结果","content":"验证优化结果","status":"pending"}]},"status":"completed","isExpanded":false,"result":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"},{"id":"call_af181ea3401349de80c43784","name":"Bash","input":{"command":"cp \"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md\" \"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.backup.md\"","description":"创建备份文件"},"status":"completed","isExpanded":false,"result":"/c/Users/thinkpad/.bash_profile: line 1: $'\\377\\376export': command not found"},{"id":"call_67d58b9da2364a70a369eb8a","name":"TodoWrite","input":{"todos":[{"activeForm":"正在备份原始文件","content":"备份原始文件","status":"completed"},{"activeForm":"正在清理冗余内容","content":"清理冗余内容(空行、链接标记)","status":"in_progress"},{"activeForm":"正在优化格式和结构","content":"优化格式和结构","status":"pending"},{"activeForm":"正在验证优化结果","content":"验证优化结果","status":"pending"}]},"status":"completed","isExpanded":false,"result":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"},{"id":"call_3cb95eb1dfb24b42b935d1df","name":"Write","input":{"file_path":"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md","content":"# 6.3.1. 概述\n\n本指南适用于已了解地平线入门指南内容的用户，主要介绍地平线算法工具链中训练后量化PTQ方法的原理及步骤详解、模型算子支持说明、以及模型上板运行的嵌入式应用开发说明等。\n\n若您是第一次使用地平线算法工具链的用户，建议您跳转至[入门指南](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_beginner/env_install.html)章节进行学习。\n\n---\n\n# 6.3.2. 环境安装\n\n本章节主要介绍地平线算法工具链完整开发环境部署方法。\n\n## 6.3.2.1. 交付物使用说明\n\n在进行算法工具链使用环境部署前，请下载地平线提供的[嵌入式应用开发Sample交付包](https://pan.horizon.ai/index.php/s/iZwyzXoJLs8Btme)到Linux开发机环境中。\n\n> **小技巧**\n> 嵌入式应用开发Sample交付包，请在更新开发板系统后，下载当前目录中的最新版本使用。\n\n### 示例包源码目录结构说明\n\n解压算法工具链SDK源码包：\n\n```bash\ntar -xvf Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X.tar.xz\n```\n\n解压后的目录结构如下：\n\n- **ai_benchmark**: 目录下提供了常见的分类、检测和分割模型的评测示例，包括性能评测和精度评测两部分。\n\n- **horizon_runtime_sample**: 目录下提供了定点模型的上板示例。\n\n- **package**: 目录下包含了发布物运行的一些基础库和组件\n  - `board` 文件夹下为板端可执行程序。\n  - `host` 文件夹下为x86开发环境下的环境依赖、工具依赖以及模型推理相关的libdnn库和头文件。\n\n## 6.3.2.2. 开发机部署\n\n对于开发机的环境部署，地平线支持使用Docker部署方式。\n\n### 开发机准备\n\n为了顺利地使用算法工具链，地平线建议您选择的开发机应满足以下要求：\n\n| 硬件/操作系统 | 要求 |\n| --- | --- |\n| CPU | CPU I3以上或者同级别E3/E5的处理器 |\n| 内存 | 16G或以上级别 |\n| GPU(可选) | CUDA11、驱动版本Linux:>= 450.80.02<br><br>适配显卡包括但不限于：<br>1) GeForce RTX 3090<br>2) GeForce RTX 2080 Ti<br>3) NVIDIA TITAN V<br>4) Tesla V100S-PCIE-32GB |\n| 系统 | CentOS 7、Ubuntu 18.04及以上 |\n\n更多关于CUDA与显卡的兼容性问题请参考[NVIDIA官网信息](https://docs.nvidia.com/deploy/cuda-compatibility/)。\n\n### 使用Docker环境\n\n为了帮助您快速使用算法工具链，地平线提供了包含完整开发环境的Docker镜像，大大简化了环境的部署过程。\n\n在阅读此部分内容前，我们希望您的开发机中已经预装好了Docker的基础环境。地平线要求的Docker基础环境信息如下：\n\n- Docker（>=1.12 建议安装18.03.0-ce），安装手册[https://docs.docker.com/install/](https://docs.docker.com/install/)。\n- NVIDIA Docker（2.0.3），安装手册[NVIDIA/nvidia-docker](https://github.com/nvidia/nvidia-docker/wiki)。\n\n完成Docker环境安装后，需要将无root权限的用户添加到Docker用户组中。参考如下命令：\n\n```bash\nsudo groupadd docker\nsudo gpasswd -a ${USER} docker\nsudo systemctl restart docker  # CentOS7/Ubuntu\n# re-login\n```\n\n请从[地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags)，获取模型转换编译需要使用的**最新版本的Docker镜像**。Docker镜像文件命名形式为 `openexplorer/ai_toolchain_centos_7_xj3:{version}`。\n\n> **小技巧**\n> 执行命令时将 `{version}` 替换为您获取到的**最新版本的Docker镜像**，例如：[地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags)中目前的最新版本为 `openexplorer/ai_toolchain_centos_7_xj3:v2.4.2`。\n\n本地Docker镜像包版本，可以联系地平线技术支持团队获取。\n\n开发机并不是必须含有GPU卡，一般使用CPU开发机加载Docker镜像即可做模型转换！\n\n每个镜像文件在第一次使用前，需要拉取镜像。\n\n- 镜像拉取命令为：\n\n```bash\ndocker pull openexplorer/ai_toolchain_centos_7_xj3:v2.4.2\n```\n\n然后执行以下命令运行Docker容器。\n\n**CPU开发机Docker容器执行以下命令：**\n\n```bash\n// 运行 docker 镜像的命令\n\nexport version=v2.4.2\n\nexport ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n\nexport dataset_path=/home/users/xxx/data/\n\ndocker run -it --rm \\\n  -v \"$ai_toolchain_package_path\":/open_explorer \\\n  -v \"$dataset_path\":/data \\\n  openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n```\n\n**GPU开发机 Docker容器执行以下命令：**\n\n```bash\n// 运行 docker 镜像的命令\n\nexport version=v2.4.2\n\nexport ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n\nexport dataset_path=/home/users/xxx/data/\n\ndocker run -it --runtime=nvidia -e NVIDIA_DRIVER_CAPABILITIES=compute,utility \\\n  -e NVIDIA_VISIBLE_DEVICES=all --rm --shm-size=\"15g\" \\\n  -v \"$ai_toolchain_package_path\":/open_explorer \\\n  -v \"$dataset_path\":/data \\\n  openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n```\n\n> **注解**\n>\n> 在执行上述命令时：\n>\n> - `dataset_path` 为数据集文件目录，如果该目录不存在会导致加载问题，需要创建好后再运行命令。您可以从 `ftp://vrftp.horizon.ai/Open_Explorer/eval_dataset` 获取数据集，然后创建该路径。\n\n至此，您已经成功通过Docker镜像进入完整的算法工具链开发环境。您可以键入 `hb_mapper --help` 命令验证是否可以正常得到帮助信息：\n\n```bash\n[root@d67382e74eea open_explorer]# hb_mapper --help\nUsage: hb_mapper [OPTIONS] COMMAND [ARGS]...\n\n  hb_mapper is an offline model transform tool provided by horizon.\n\nOptions:\n  --version  Show the version and exit.\n  --help     Show this message and exit.\n\nCommands:\n  checker    check whether the model meet the requirements.\n  infer      inference and dump output feature as float vector.\n  makertbin  transform caffe model to quantization model, generate runtime...\n```\n\n若hb_mapper工具已正常输出日志，说明环境已安装部署完成，请到**开发板部署**章节，进行开发板的环境安装。\n\n## 6.3.2.3. 开发板部署\n\n开发板部署需要您按照刷机说明，将开发版镜像更新到最新版本，升级方法请参考[系统更新](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/System_Configuration/System_Configuration.html#id2)章节内容，升级完成后，再将相关补充文件拷贝到开发板中即可。\n\n### 补充文件准备\n\n算法工具链的部分补充工具未包含在系统镜像中，这些工具已经放置在 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/` 安装包中，进入到 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/board` 执行install脚本。执行命令如下：\n\n```bash\nbash install.sh ${board_ip}\n```\n\n> **注解**\n>\n> 其中，`${board_ip}` 是您为开发板设置的IP地址，请确保在开发机上可以访问该IP。成功安装后，重新启动开发板，在开发板上执行 `hrt_model_exec` 可以验证安装是否成功。\n\n## 6.3.2.4. 版本管理工具使用说明\n\n本章节主要介绍ddk_vcs版本管理工具的使用说明，便于开发者了解当前开发机环境中算法工具链依赖包的版本情况。\n\n工具包括以下功能：\n\n- ddk_vcs list\n- ddk_vcs install\n- ddk_vcs uninstall\n- ddk_vcs patch\n- ddk_vcs show\n\n### ddk_vcs list\n\nddk_vcs list 用于列出已安装的软件包。\n\n不加参数执行此命令时，结果会展示当前已安装的各个模块的信息。使用示例如下：\n\n```bash\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs list\nHost package version: v2.0.3\nThe following packages versions\nPlatform        Package         Version MD5\n--------------- --------------- ------- -------------\naarch_64        appsdk          032419  093e13b44e\naarch_64        dnn             1.8.1g  aff0f6f4de\nx86_64_gcc5.4.0 dnn_x86         1.8.1g  e8e6bf9ed5\nx86             horizon-nn      0.13.3  origin:0.13.3\nx86             horizon-nn-gpu  0.13.3  origin:N/A\nx86             horizon-tc-ui   1.6.4   origin:1.6.4\nx86             hbdk            3.28.3  origin:3.28.3\n```\n\n> **注解**\n>\n> 最后几行的origin信息会在每次使用工具链SDK包内的install脚本进行安装后更新为当前环境下的版本，后续在使用ddk_vcs进行安装时则不会改变，只会改变Version的值。\n\n使用 `-p` 参数以后会显示当前可以安装的模块版本情况，可以通过 `ddk_vcs install` 进行安装，使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs list -p\nHost package version: 1.5.1\nThe following packages versions\nPlatform        Local Package                 Version MD5\n--------------- ----------------------------- ------- ----------\naarch_64        appsdk_1.9.0.tar.gz           1.9.0   bf01140c9d\naarch_64        bpu_predict_1.10.2.tar.gz     1.10.2  5b6e5dd6c5\naarch_64        dnn_1.1.2a.tar.gz             1.1.2a  fdb5729f4f\nx86_64_gcc5.4.0 bpu_predict_1.10.2.tar.gz     1.10.2  4dbdd980a7\nx86_64_gcc5.4.0 dnn_x86_1.1.2a.tar.gz         1.1.2a  5bf5fcd4fe\n```\n\n### ddk_vcs install\n\nddk_vcs install 用于对安装包进行安装。用户可以直接通过 `ddk_vcs install` 将对应的模块tar包进行安装。安装时需要指定对应的platform。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict_1.10.2.tar.gz -p aarch_64\nbpu_predict installed successfully, version: 1.10.2, platform: aarch_64\n\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs install hbdk-3.28.3-py3-none-linux_x86_64.whl  horizon_nn-0.13.3-py3-none-any.whl\nhbdk-3.28.3-py3-none-linux_x86_64.whl installed successfully\nhorizon_nn-0.13.3-py3-none-any.whl installed successfully\n```\n\n在使用 `ddk_vcs list -p` 后用户可以得到自己当前host package中各个模块包的版本信息，然后使用 `ddk_vcs install` 可以很方便地切换各个版本，使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict==1.7.2  --platform aarch_64\nbpu_predict installed successfully, version: 1.7.2, platform: aarch_64\n```\n\n如果本地没有对应版本可以指定安装包位置进行安装。\n\n### ddk_vcs uninstall\n\nddk_vcs uninstall 用于卸载指定模块。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs uninstall bpu_predict --platform aarch_64\nStart to uninstall modules, platform: aarch_64\nbpu_predict uninstalled successfully, version: 1.10.2, platform: aarch_64\n```\n\n### ddk_vcs patch\n\n使用 `ddk_vcs patch ddk_patch.tar.gz` 可以安装预先制作好的patch包。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs patch ddk_patch.tar.gz\nbpu_predict installed successfully, version: 1.7.2_patch0, platform: aarch64\n```\n\n### ddk_vcs show\n\nddk_vcs show 用于显示有关已安装软件包的信息。使用 `ddk_vcs show [模块名]`，可以展示对应模块的信息。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict\nHost package version 1.5.1\nThe following packages versions\nPlatform        Package     Version       MD5\n--------------- ----------- ------------- ----------\naarch_64        bpu_predict 1.10.2        5b6e5dd6c5\nx86_64_gcc5.4.0 bpu_predict 1.10.2_patch1 d4f8e37921\n```\n\n如果2个架构内有同名依赖，可以使用 `-p/--platform` 指定架构名进行过滤。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict -p aarch_64\nHost package version 1.5.1\nThe following packages versions\nPlatform Package     Version MD5\n-------- ----------- ------- ----------\naarch_64 bpu_predict 1.10.2  5b6e5dd6c5\n```\n"},"status":"completed","isExpanded":false,"result":"The file 4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md has been updated successfully.","diffData":{"filePath":"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/6.3.1. 概述.md","originalContent":"\n\n# 6.3.1. 概述[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id1 \"永久链接至标题\")\n\n本指南适用于已了解地平线入门指南内容的用户，主要介绍地平线算法工具链中训练后量化PTQ方法的原理及步骤详解、模型算子支持说明、以及模型上板运行的嵌入式应用开发说明等； 若您是第一次使用地平线算法工具链的用户，建议您跳转至 [入门指南](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_beginner/env_install.html) 章节进行学习。\n\n# 6.3.2. 环境安装[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id3 \"永久链接至标题\")\n\n本章节主要介绍地平线算法工具链完整开发环境部署方法。\n\n## 6.3.2.1. 交付物使用说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id4 \"永久链接至标题\")\n\n在进行算法工具链使用环境部署前，请下载地平线提供的 [嵌入式应用开发Sample交付包](https://pan.horizon.ai/index.php/s/iZwyzXoJLs8Btme) 到Linux开发机环境中。\n\n小技巧\n\n嵌入式应用开发Sample交付包，请在更新开发板系统后，下载当前目录中的最新版本使用。\n\n### 示例包源码目录结构说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id5 \"永久链接至标题\")\n\n解压算法工具链SDK源码包：\n\ntar -xvf Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X.tar.xz\n\n解压后的目录结构如下：\n\n- **ai_benchmark**: 目录下提供了常见的分类、检测和分割模型的评测示例，包括性能评测和精度评测两部分。\n    \n- **horizon_runtime_sample**: 目录下提供了定点模型的上板示例。\n    \n- **package**: 目录下包含了发布物运行的一些基础库和组件\n    \n    1. `board` 文件夹下为板端可执行程序。\n        \n    2. `host` 文件夹下为x86开发环境下的环境依赖、工具依赖以及模型推理相关的libdnn库和头文件。\n        \n\n## 6.3.2.2. 开发机部署[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id6 \"永久链接至标题\")\n\n对于开发机的环境部署，地平线支持使用Docker部署方式。\n\n### 开发机准备[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id7 \"永久链接至标题\")\n\n为了顺利地使用算法工具链，地平线建议您选择的开发机应满足以下要求：\n\n|硬件/操作系统|要求|\n|---|---|\n|CPU|CPU I3以上或者同级别E3/E5的处理器|\n|内存|16G或以上级别|\n|GPU(可选)|CUDA11、驱动版本Linux:>= 450.80.02*<br><br>适配显卡包括但不限于：<br><br>1)GeForce RTX 3090<br><br>2)GeForce RTX 2080 Ti<br><br>3)NVIDIA TITAN V<br><br>4)Tesla V100S-PCIE-32GB|\n|系统|CentOS 7、Ubuntu 18.04及以上|\n\n更多关于CUDA与显卡的兼容性问题请参考 [NVIDIA官网信息](https://docs.nvidia.com/deploy/cuda-compatibility/) 。\n\n### 使用Docker环境[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#docker \"永久链接至标题\")\n\n为了帮助您快速使用算法工具链，地平线提供了包含完整开发环境的Docker镜像，大大简化了环境的部署过程。\n\n在阅读此部分内容前，我们希望您的开发机中已经预装好了Docker的基础环境。 地平线要求的Docker基础环境信息如下：\n\n- Docker（>=1.12 建议安装18.03.0-ce）, 安装手册 [https://docs.docker.com/install/](https://docs.docker.com/install/)。\n    \n- NVIDIA Docker（2.0.3），安装手册 [NVIDIA/nvidia-docker](https://github.com/nvidia/nvidia-docker/wiki)。\n    \n\n完成Docker环境安装后，需要将无root权限的用户添加到Docker用户组中。参考如下命令：\n\nsudo groupadd docker\nsudo gpasswd -a ${USER} docker\nsudo systemctl restart docker  # CentOS7/Ubuntu\n# re-login\n\n请从 [地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags) ，获取模型转换编译需要使用的 **最新版本的Docker镜像**。 Docker镜像文件命名形式为 `openexplorer/ai_toolchain_centos_7_xj3:{version}`。\n\n小技巧\n\n执行命令时将 `{version}` 替换为您获取到的 **最新版本的Docker镜像** ，例如： [地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags) 中目前的最新版本为 `openexplorer/ai_toolchain_centos_7_xj3:v2.4.2`。\n\n本地Docker镜像包版本，可以联系地平线技术支持团队获取。\n\n开发机并不是必须含有GPU卡，一般使用CPU开发机加载Docker镜像即可做模型转换！\n\n每个镜像文件在第一次使用前，需要拉取镜像。\n\n- 镜像拉取命令为：\n    \n    docker pull openexplorer/ai_toolchain_centos_7_xj3:v2.4.2\n    \n\n然后执行以下命令运行Docker容器。\n\n- CPU开发机Docker容器执行以下命令：\n    \n    // 运行 docker 镜像的命令\n    \n    export version=v2.4.2\n    \n    export ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n    \n    export dataset_path=/home/users/xxx/data/\n    \n    docker run -it --rm \\\n      -v \"$ai_toolchain_package_path\":/open_explorer \\\n      -v \"$dataset_path\":/data \\\n      openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n    \n- GPU开发机 Docker容器执行以下命令：\n    \n    // 运行 docker 镜像的命令\n    \n    export version=v2.4.2\n    \n    export ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n    \n    export dataset_path=/home/users/xxx/data/\n    \n    docker run -it --runtime=nvidia -e NVIDIA_DRIVER_CAPABILITIES=compute,utility \\\n      -e NVIDIA_VISIBLE_DEVICES=all --rm --shm-size=\"15g\" \\\n      -v \"$ai_toolchain_package_path\":/open_explorer \\\n      -v \"$dataset_path\":/data \\\n      openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n    \n\n注解\n\n在执行上述命令时：\n\n- `dataset_path` 为数据集文件目录，如果该目录不存在会导致加载问题，需要创建好后再运行命令。 您可以从 `ftp://vrftp.horizon.ai/Open_Explorer/eval_dataset` 获取数据集，然后创建该路径。\n    \n\n至此，您已经成功通过Docker镜像进入完整的算法工具链开发环境。 您可以键入 `hb_mapper --help` 命令验证是否可以正常得到帮助信息：\n\n[root@d67382e74eea open_explorer]# hb_mapper --help\nUsage: hb_mapper [OPTIONS] COMMAND [ARGS]...\n\n  hb_mapper is an offline model transform tool provided by horizon.\n\nOptions:\n  --version  Show the version and exit.\n  --help     Show this message and exit.\n\nCommands:\n  checker    check whether the model meet the requirements.\n  infer      inference and dump output feature as float vector.\n  makertbin  transform caffe model to quantization model, generate runtime...\n\n若hb_mapper工具已正常输出日志， 说明环境已安装部署完成，请到 **开发板部署** 章节，进行开发板的环境安装。\n\n## 6.3.2.3. 开发板部署[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id9 \"永久链接至标题\")\n\n开发板部署需要您按照刷机说明，将开发版镜像更新到最新版本，升级方法请参考 [系统更新](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/System_Configuration/System_Configuration.html#id2) 章节内容， 升级完成后，再将相关补充文件拷贝到开发板中即可。\n\n### 补充文件准备[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id11 \"永久链接至标题\")\n\n算法工具链的部分补充工具未包含在系统镜像中，这些工具已经放置在 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/` 安装包中， 进入到 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/board` 执行install脚本。 执行命令如下：\n\nbash install.sh ${board_ip}\n\n注解\n\n其中，`${board_ip}` 是您为开发板设置的IP地址，请确保在开发机上可以访问该IP。 成功安装后，重新启动开发板，在开发板上执行 `hrt_model_exec` 可以验证安装是否成功。\n\n## 6.3.2.4. 版本管理工具使用说明[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#id12 \"永久链接至标题\")\n\n本章节主要介绍ddk_vcs版本管理工具的使用说明，便于开发者了解当前开发机环境中算法工具链依赖包的版本情况。\n\n工具包括以下功能：\n\n- ddk_vcs list;\n    \n- ddk_vcs install;\n    \n- ddk_vcs uninstall;\n    \n- ddk_vcs patch;\n    \n- ddk_vcs show;\n    \n\n### ddk_vcs list[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-list \"永久链接至标题\")\n\nddk_vcs list 用于列出已安装的软件包。\n\n不加参数执行此命令时，结果会展示当前已安装的各个模块的信息。使用示例如下：\n\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs list\nHost package version: v2.0.3\nThe following packages versions\nPlatform        Package         Version MD5\n--------------- --------------- ------- -------------\naarch_64        appsdk          032419  093e13b44e\naarch_64        dnn             1.8.1g  aff0f6f4de\nx86_64_gcc5.4.0 dnn_x86         1.8.1g  e8e6bf9ed5\nx86             horizon-nn      0.13.3  origin:0.13.3\nx86             horizon-nn-gpu  0.13.3  origin:N/A\nx86             horizon-tc-ui   1.6.4   origin:1.6.4\nx86             hbdk            3.28.3  origin:3.28.3\n\n注解\n\n最后几行的origin信息会在每次使用工具链SDK包内的install脚本进行安装后更新为当前环境下的版本， 后续在使用ddk_vcs进行安装时则不会改变，只会改变Version的值。\n\n使用 `-p` 参数以后会显示当前可以安装的模块版本情况，可以通过 `ddk_vcs install` 进行安装，使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs list -p\nHost package version: 1.5.1\nThe following packages versions\nPlatform        Local Package                 Version MD5\n--------------- ----------------------------- ------- ----------\naarch_64        appsdk_1.9.0.tar.gz           1.9.0   bf01140c9d\naarch_64        bpu_predict_1.10.2.tar.gz     1.10.2  5b6e5dd6c5\naarch_64        dnn_1.1.2a.tar.gz             1.1.2a  fdb5729f4f\nx86_64_gcc5.4.0 bpu_predict_1.10.2.tar.gz     1.10.2  4dbdd980a7\nx86_64_gcc5.4.0 dnn_x86_1.1.2a.tar.gz         1.1.2a  5bf5fcd4fe\n\n### ddk_vcs install[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-install \"永久链接至标题\")\n\nddk_vcs install 用于对安装包进行安装。 用户可以直接通过 `ddk_vcs install` 将对应的模块tar包进行安装。安装时需要指定对应的platform。使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict_1.10.2.tar.gz -p aarch_64\nbpu_predict installed successfully, version: 1.10.2, platform: aarch_64\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs install hbdk-3.28.3-py3-none-linux_x86_64.whl  horizon_nn-0.13.3-py3-none-any.whl\nhbdk-3.28.3-py3-none-linux_x86_64.whl installed successfully\nhorizon_nn-0.13.3-py3-none-any.whl installed successfully\n\n在使用 `ddk_vcs list -p` 后用户可以得到自己当前host package中各个模块包的版本信息， 然后使用 `ddk_vcs install` 可以很方便地切换各个版本，使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict==1.7.2  --platform aarch_64\nbpu_predict installed successfully, version: 1.7.2, platform: aarch_64\n\n如果本地没有对应版本可以指定安装包位置进行安装。\n\n### ddk_vcs uninstall[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-uninstall \"永久链接至标题\")\n\nddk_vcs uninstall 用于卸载指定模块。使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs uninstall bpu_predict --platform aarch_64\nStart to uninstall modules, platform: aarch_64\nbpu_predict uninstalled successfully, version: 1.10.2, platform: aarch_64\n\n### ddk_vcs patch[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-patch \"永久链接至标题\")\n\n使用 `ddk_vcs patch ddk_patch.tar.gz` 可以安装预先制作好的patch包。使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs patch ddk_patch.tar.gz\nbpu_predict installed successfully, version: 1.7.2_patch0, platform: aarch64\n\n### ddk_vcs show[](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_intermediate/env_install.html#ddk-vcs-show \"永久链接至标题\")\n\nddk_vcs show 用于显示有关已安装软件包的信息。使用 `ddk_vcs show [模块名]` ，可以展示对应模块的信息。使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict\nHost package version 1.5.1\nThe following packages versions\nPlatform        Package     Version       MD5\n--------------- ----------- ------------- ----------\naarch_64        bpu_predict 1.10.2        5b6e5dd6c5\nx86_64_gcc5.4.0 bpu_predict 1.10.2_patch1 d4f8e37921\n\n如果2个架构内有同名依赖，可以使用 `-p/--platform` 指定架构名进行过滤。使用示例如下：\n\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict -p aarch_64\nHost package version 1.5.1\nThe following packages versions\nPlatform Package     Version MD5\n-------- ----------- ------- ----------\naarch_64 bpu_predict 1.10.2  5b6e5dd6c5\n","newContent":"# 6.3.1. 概述\n\n本指南适用于已了解地平线入门指南内容的用户，主要介绍地平线算法工具链中训练后量化PTQ方法的原理及步骤详解、模型算子支持说明、以及模型上板运行的嵌入式应用开发说明等。\n\n若您是第一次使用地平线算法工具链的用户，建议您跳转至[入门指南](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/ai_toolchain_develop/horizon_beginner/env_install.html)章节进行学习。\n\n---\n\n# 6.3.2. 环境安装\n\n本章节主要介绍地平线算法工具链完整开发环境部署方法。\n\n## 6.3.2.1. 交付物使用说明\n\n在进行算法工具链使用环境部署前，请下载地平线提供的[嵌入式应用开发Sample交付包](https://pan.horizon.ai/index.php/s/iZwyzXoJLs8Btme)到Linux开发机环境中。\n\n> **小技巧**\n> 嵌入式应用开发Sample交付包，请在更新开发板系统后，下载当前目录中的最新版本使用。\n\n### 示例包源码目录结构说明\n\n解压算法工具链SDK源码包：\n\n```bash\ntar -xvf Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X.tar.xz\n```\n\n解压后的目录结构如下：\n\n- **ai_benchmark**: 目录下提供了常见的分类、检测和分割模型的评测示例，包括性能评测和精度评测两部分。\n\n- **horizon_runtime_sample**: 目录下提供了定点模型的上板示例。\n\n- **package**: 目录下包含了发布物运行的一些基础库和组件\n  - `board` 文件夹下为板端可执行程序。\n  - `host` 文件夹下为x86开发环境下的环境依赖、工具依赖以及模型推理相关的libdnn库和头文件。\n\n## 6.3.2.2. 开发机部署\n\n对于开发机的环境部署，地平线支持使用Docker部署方式。\n\n### 开发机准备\n\n为了顺利地使用算法工具链，地平线建议您选择的开发机应满足以下要求：\n\n| 硬件/操作系统 | 要求 |\n| --- | --- |\n| CPU | CPU I3以上或者同级别E3/E5的处理器 |\n| 内存 | 16G或以上级别 |\n| GPU(可选) | CUDA11、驱动版本Linux:>= 450.80.02<br><br>适配显卡包括但不限于：<br>1) GeForce RTX 3090<br>2) GeForce RTX 2080 Ti<br>3) NVIDIA TITAN V<br>4) Tesla V100S-PCIE-32GB |\n| 系统 | CentOS 7、Ubuntu 18.04及以上 |\n\n更多关于CUDA与显卡的兼容性问题请参考[NVIDIA官网信息](https://docs.nvidia.com/deploy/cuda-compatibility/)。\n\n### 使用Docker环境\n\n为了帮助您快速使用算法工具链，地平线提供了包含完整开发环境的Docker镜像，大大简化了环境的部署过程。\n\n在阅读此部分内容前，我们希望您的开发机中已经预装好了Docker的基础环境。地平线要求的Docker基础环境信息如下：\n\n- Docker（>=1.12 建议安装18.03.0-ce），安装手册[https://docs.docker.com/install/](https://docs.docker.com/install/)。\n- NVIDIA Docker（2.0.3），安装手册[NVIDIA/nvidia-docker](https://github.com/nvidia/nvidia-docker/wiki)。\n\n完成Docker环境安装后，需要将无root权限的用户添加到Docker用户组中。参考如下命令：\n\n```bash\nsudo groupadd docker\nsudo gpasswd -a ${USER} docker\nsudo systemctl restart docker  # CentOS7/Ubuntu\n# re-login\n```\n\n请从[地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags)，获取模型转换编译需要使用的**最新版本的Docker镜像**。Docker镜像文件命名形式为 `openexplorer/ai_toolchain_centos_7_xj3:{version}`。\n\n> **小技巧**\n> 执行命令时将 `{version}` 替换为您获取到的**最新版本的Docker镜像**，例如：[地平线 docker hub](https://hub.docker.com/r/openexplorer/ai_toolchain_centos_7_xj3/tags)中目前的最新版本为 `openexplorer/ai_toolchain_centos_7_xj3:v2.4.2`。\n\n本地Docker镜像包版本，可以联系地平线技术支持团队获取。\n\n开发机并不是必须含有GPU卡，一般使用CPU开发机加载Docker镜像即可做模型转换！\n\n每个镜像文件在第一次使用前，需要拉取镜像。\n\n- 镜像拉取命令为：\n\n```bash\ndocker pull openexplorer/ai_toolchain_centos_7_xj3:v2.4.2\n```\n\n然后执行以下命令运行Docker容器。\n\n**CPU开发机Docker容器执行以下命令：**\n\n```bash\n// 运行 docker 镜像的命令\n\nexport version=v2.4.2\n\nexport ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n\nexport dataset_path=/home/users/xxx/data/\n\ndocker run -it --rm \\\n  -v \"$ai_toolchain_package_path\":/open_explorer \\\n  -v \"$dataset_path\":/data \\\n  openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n```\n\n**GPU开发机 Docker容器执行以下命令：**\n\n```bash\n// 运行 docker 镜像的命令\n\nexport version=v2.4.2\n\nexport ai_toolchain_package_path=/home/users/xxx/ai_toolchain_package\n\nexport dataset_path=/home/users/xxx/data/\n\ndocker run -it --runtime=nvidia -e NVIDIA_DRIVER_CAPABILITIES=compute,utility \\\n  -e NVIDIA_VISIBLE_DEVICES=all --rm --shm-size=\"15g\" \\\n  -v \"$ai_toolchain_package_path\":/open_explorer \\\n  -v \"$dataset_path\":/data \\\n  openexplorer/ai_toolchain_centos_7_xj3:\"${version}\"\n```\n\n> **注解**\n>\n> 在执行上述命令时：\n>\n> - `dataset_path` 为数据集文件目录，如果该目录不存在会导致加载问题，需要创建好后再运行命令。您可以从 `ftp://vrftp.horizon.ai/Open_Explorer/eval_dataset` 获取数据集，然后创建该路径。\n\n至此，您已经成功通过Docker镜像进入完整的算法工具链开发环境。您可以键入 `hb_mapper --help` 命令验证是否可以正常得到帮助信息：\n\n```bash\n[root@d67382e74eea open_explorer]# hb_mapper --help\nUsage: hb_mapper [OPTIONS] COMMAND [ARGS]...\n\n  hb_mapper is an offline model transform tool provided by horizon.\n\nOptions:\n  --version  Show the version and exit.\n  --help     Show this message and exit.\n\nCommands:\n  checker    check whether the model meet the requirements.\n  infer      inference and dump output feature as float vector.\n  makertbin  transform caffe model to quantization model, generate runtime...\n```\n\n若hb_mapper工具已正常输出日志，说明环境已安装部署完成，请到**开发板部署**章节，进行开发板的环境安装。\n\n## 6.3.2.3. 开发板部署\n\n开发板部署需要您按照刷机说明，将开发版镜像更新到最新版本，升级方法请参考[系统更新](https://developer.d-robotics.cc/api/v1/fileData/documents_pi/System_Configuration/System_Configuration.html#id2)章节内容，升级完成后，再将相关补充文件拷贝到开发板中即可。\n\n### 补充文件准备\n\n算法工具链的部分补充工具未包含在系统镜像中，这些工具已经放置在 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/` 安装包中，进入到 `Ai_Toolchain_Package-release-vX.X.X-OE-vX.X.X/package/board` 执行install脚本。执行命令如下：\n\n```bash\nbash install.sh ${board_ip}\n```\n\n> **注解**\n>\n> 其中，`${board_ip}` 是您为开发板设置的IP地址，请确保在开发机上可以访问该IP。成功安装后，重新启动开发板，在开发板上执行 `hrt_model_exec` 可以验证安装是否成功。\n\n## 6.3.2.4. 版本管理工具使用说明\n\n本章节主要介绍ddk_vcs版本管理工具的使用说明，便于开发者了解当前开发机环境中算法工具链依赖包的版本情况。\n\n工具包括以下功能：\n\n- ddk_vcs list\n- ddk_vcs install\n- ddk_vcs uninstall\n- ddk_vcs patch\n- ddk_vcs show\n\n### ddk_vcs list\n\nddk_vcs list 用于列出已安装的软件包。\n\n不加参数执行此命令时，结果会展示当前已安装的各个模块的信息。使用示例如下：\n\n```bash\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs list\nHost package version: v2.0.3\nThe following packages versions\nPlatform        Package         Version MD5\n--------------- --------------- ------- -------------\naarch_64        appsdk          032419  093e13b44e\naarch_64        dnn             1.8.1g  aff0f6f4de\nx86_64_gcc5.4.0 dnn_x86         1.8.1g  e8e6bf9ed5\nx86             horizon-nn      0.13.3  origin:0.13.3\nx86             horizon-nn-gpu  0.13.3  origin:N/A\nx86             horizon-tc-ui   1.6.4   origin:1.6.4\nx86             hbdk            3.28.3  origin:3.28.3\n```\n\n> **注解**\n>\n> 最后几行的origin信息会在每次使用工具链SDK包内的install脚本进行安装后更新为当前环境下的版本，后续在使用ddk_vcs进行安装时则不会改变，只会改变Version的值。\n\n使用 `-p` 参数以后会显示当前可以安装的模块版本情况，可以通过 `ddk_vcs install` 进行安装，使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs list -p\nHost package version: 1.5.1\nThe following packages versions\nPlatform        Local Package                 Version MD5\n--------------- ----------------------------- ------- ----------\naarch_64        appsdk_1.9.0.tar.gz           1.9.0   bf01140c9d\naarch_64        bpu_predict_1.10.2.tar.gz     1.10.2  5b6e5dd6c5\naarch_64        dnn_1.1.2a.tar.gz             1.1.2a  fdb5729f4f\nx86_64_gcc5.4.0 bpu_predict_1.10.2.tar.gz     1.10.2  4dbdd980a7\nx86_64_gcc5.4.0 dnn_x86_1.1.2a.tar.gz         1.1.2a  5bf5fcd4fe\n```\n\n### ddk_vcs install\n\nddk_vcs install 用于对安装包进行安装。用户可以直接通过 `ddk_vcs install` 将对应的模块tar包进行安装。安装时需要指定对应的platform。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict_1.10.2.tar.gz -p aarch_64\nbpu_predict installed successfully, version: 1.10.2, platform: aarch_64\n\n[horizon@gpu-dev067 ai_toolchain]$ ddk_vcs install hbdk-3.28.3-py3-none-linux_x86_64.whl  horizon_nn-0.13.3-py3-none-any.whl\nhbdk-3.28.3-py3-none-linux_x86_64.whl installed successfully\nhorizon_nn-0.13.3-py3-none-any.whl installed successfully\n```\n\n在使用 `ddk_vcs list -p` 后用户可以得到自己当前host package中各个模块包的版本信息，然后使用 `ddk_vcs install` 可以很方便地切换各个版本，使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs install bpu_predict==1.7.2  --platform aarch_64\nbpu_predict installed successfully, version: 1.7.2, platform: aarch_64\n```\n\n如果本地没有对应版本可以指定安装包位置进行安装。\n\n### ddk_vcs uninstall\n\nddk_vcs uninstall 用于卸载指定模块。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs uninstall bpu_predict --platform aarch_64\nStart to uninstall modules, platform: aarch_64\nbpu_predict uninstalled successfully, version: 1.10.2, platform: aarch_64\n```\n\n### ddk_vcs patch\n\n使用 `ddk_vcs patch ddk_patch.tar.gz` 可以安装预先制作好的patch包。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs patch ddk_patch.tar.gz\nbpu_predict installed successfully, version: 1.7.2_patch0, platform: aarch64\n```\n\n### ddk_vcs show\n\nddk_vcs show 用于显示有关已安装软件包的信息。使用 `ddk_vcs show [模块名]`，可以展示对应模块的信息。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict\nHost package version 1.5.1\nThe following packages versions\nPlatform        Package     Version       MD5\n--------------- ----------- ------------- ----------\naarch_64        bpu_predict 1.10.2        5b6e5dd6c5\nx86_64_gcc5.4.0 bpu_predict 1.10.2_patch1 d4f8e37921\n```\n\n如果2个架构内有同名依赖，可以使用 `-p/--platform` 指定架构名进行过滤。使用示例如下：\n\n```bash\n[horizon@gpu-dev004]$ ddk_vcs show bpu_predict -p aarch_64\nHost package version 1.5.1\nThe following packages versions\nPlatform Package     Version MD5\n-------- ----------- ------- ----------\naarch_64 bpu_predict 1.10.2  5b6e5dd6c5\n```\n"}},{"id":"call_551fd1eccaca404cad851924","name":"TodoWrite","input":{"todos":[{"activeForm":"正在备份原始文件","content":"备份原始文件","status":"completed"},{"activeForm":"正在清理冗余内容","content":"清理冗余内容(空行、链接标记)","status":"completed"},{"activeForm":"正在优化格式和结构","content":"优化格式和结构","status":"completed"},{"activeForm":"正在验证优化结果","content":"验证优化结果","status":"in_progress"}]},"status":"completed","isExpanded":false,"result":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"},{"id":"call_31b1c0b69ab74c4692f005ff","name":"Bash","input":{"command":"ls -lh \"4 Archives/6 APPLIED SCIENCES. MEDICINE. TECHNOLOGY/62 Engineering/UGV01-X3/6. 算法工具链开发指南/\" | grep \"概述\"","description":"验证备份和优化文件"},"status":"completed","isExpanded":false,"result":"/c/Users/thinkpad/.bash_profile: line 1: $'\\377\\376export': command not found\n\n-rw-r--r-- 1 thinkpad 197121 3.5K  2月 19 08:03 6.2.1. 概述.md\n-rw-r--r-- 1 thinkpad 197121  14K  2月 19 08:07 6.3.1. 概述.backup.md\n-rw-r--r-- 1 thinkpad 197121  12K  2月 19 08:08 6.3.1. 概述.md"},{"id":"call_941bd88ccf194fd3817cd706","name":"TodoWrite","input":{"todos":[{"activeForm":"正在备份原始文件","content":"备份原始文件","status":"completed"},{"activeForm":"正在清理冗余内容","content":"清理冗余内容(空行、链接标记)","status":"completed"},{"activeForm":"正在优化格式和结构","content":"优化格式和结构","status":"completed"},{"activeForm":"正在验证优化结果","content":"验证优化结果","status":"completed"}]},"status":"completed","isExpanded":false,"result":"Todos have been modified successfully. Ensure that you continue to use the todo list to track your progress. Please proceed with the current tasks if applicable"}],"contentBlocks":[{"type":"text","content":"我来帮你备份后优化这个笔记。首先让我读取文件内容，然后进行备份和优化。"},{"type":"tool_use","toolId":"call_8a5a56503caf4e9baa6eca54"},{"type":"text","content":"我已经读取了文件内容。现在我会先备份这个文件,然后进行优化。"},{"type":"tool_use","toolId":"call_030eef1b56384ef8b2188c12"},{"type":"tool_use","toolId":"call_af181ea3401349de80c43784"},{"type":"tool_use","toolId":"call_67d58b9da2364a70a369eb8a"},{"type":"text","content":"备份已完成。现在让我优化这个文档,主要包括:\n1. 移除冗余的空行\n2. 移除不必要的外部链接标记\n3. 优化标题层级\n4. 改善可读性"},{"type":"tool_use","toolId":"call_3cb95eb1dfb24b42b935d1df"},{"type":"tool_use","toolId":"call_551fd1eccaca404cad851924"},{"type":"tool_use","toolId":"call_31b1c0b69ab74c4692f005ff"},{"type":"tool_use","toolId":"call_941bd88ccf194fd3817cd706"},{"type":"text","content":"✅ **备份和优化已完成！**\n\n## 完成的操作：\n\n1. **备份成功**: 已创建备份文件 `6.3.1. 概述.backup.md` (14KB)\n2. **文件大小优化**: 原始文件 14KB → 优化后 12KB (节省约 14%)\n3. **优化内容**:\n   - 移除了所有 `[](...)` 链接标记\n   - 清理了多余的空行\n   - 将\"小技巧\"和\"注解\"改为引用块格式，更加醒目\n   - 统一了代码块格式\n   - 优化了标题层级和段落分隔\n   - 改善了表格和列表的可读性\n   - 添加了分隔线来区分主要章节\n\n## 文件对比：\n\n- **备份文件**: `[[6.3.1. 概述.backup.md]]` - 保留原始内容\n- **优化文件**: `[[6.3.1. 概述.md]]` - 清理后的版本\n\n优化后的文档更加整洁易读，同时保留了所有重要信息和外部链接。"}]}}