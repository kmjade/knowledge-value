---
title: 批量操作
aliases:
  - Batch Operations
  - 批量处理
tags:
  - quick-action
  - batch
---

> [!note] 批量操作系统 / Batch Operations System
> 高效处理多个 InBox 文件的批量操作功能

---

## 操作类型 / Operation Types
---

### 批量移动

一次性移动多个文件到指定 PARA 分类：

```dataview
TABLE WITHOUT ID
  operation as "操作",
  description as "说明",
  command as "命令"
FROM ""
WHERE contains(tags, "batch-operation")
```

| 操作 | 说明 | 命令示例 |
|------|------|---------|
| 移动到 Projects | 移动到项目文件夹 | `/批量移动: 1 Projects` |
| 移动到 Areas | 移动到领域文件夹 | `/批量移动: 2 Areas` |
| 移动到 Resources | 移动到资源文件夹 | `/批量移动: 3 Resources` |
| 移动到 Archives | 移动到归档文件夹 | `/批量移动: 4 Archives` |

### 批量添加标签

为多个文件同时添加标签：

```
/批量加标签: #completed - 2024-W3
```

为本周所有文件添加 `#completed` 和 `#2024-W3` 标签。

### 批量删除标签

```
/批量删标签: #todo
```

删除所有文件的 `#todo` 标签。

### 批量重命名

根据规则批量重命名文件：

```
/批量重命名: prefix-[日期]-原名
```

### 批量创建链接

在指定文件中批量创建指向多个文件的链接：

```
/批量链接: [[汇总笔记.md]] - from: "0 Personals/📥 00_InBox"
```

---

## 选择方式 / Selection Methods
---

### 按文件夹选择

```
/批量操作: folder - "0 Personals/📥 00_InBox/0-待办"
```

### 按标签选择

```
/批量操作: tag - #todo
```

### 按时间选择

```
/批量操作: time - "2024-01-15..2024-01-20"
```

### 按条件选择

```
/批量操作: where - file.mtime > date(subdays, -7) AND contains(tags, "#urgent")
```

### 手动选择

交互式选择多个文件：

```
/批量操作: select
```

系统会显示可选择的文件列表，用户勾选后执行操作。

---

## 批量工作流 / Batch Workflows
---

### 快速清理流程

```
/批量清理
```

执行以下操作：
1. 标记超过 14 天的文件
2. 提供处理建议（归档/分类/删除）
3. 用户确认后批量执行

### 定期整理流程

```
/批量整理
```

执行以下操作：
1. 分析所有 InBox 文件
2. 按智能分类结果分组
3. 显示各组预览
4. 批量移动到对应 PARA 分类

### 标签规范化

```
/规范化标签
```

执行以下操作：
1. 查找所有使用频率低的标签（< 2 次）
2. 查找同义词标签（如 `#todo` 和 `#待办`）
3. 提供合并建议
4. 批量合并标签

---

## 预览与确认 / Preview & Confirm
---

### 操作预览

在执行批量操作前，系统会显示：

```
┌────────────────────────────────────────┐
│  📋 批量操作预览                      │
├────────────────────────────────────────┤
│  操作类型: 移动到 Projects             │
│  影响文件: 15 个                      │
├────────────────────────────────────────┤
│  文件列表:                            │
│  - [ ] 笔记1.md → 1 Projects/         │
│  - [ ] 笔记2.md → 1 Projects/         │
│  - [ ] 笔记3.md → 1 Projects/         │
│  ... (共 15 个)                       │
├────────────────────────────────────────┤
│  [ ] 全选                             │
│  [ ] 取消不想要的                     │
│  [✓] 确认执行                         │
└────────────────────────────────────────┘
```

### 执行确认

确认后，系统会：
1. 显示执行进度
2. 记录操作日志
3. 生成操作报告

---

## 操作历史 / Operation History
---

### 查看历史记录

```dataview
TABLE WITHOUT ID
  timestamp as "时间",
  operation as "操作",
  affected_files as "影响文件数",
  status as "状态"
FROM ""
WHERE contains(tags, "batch-log")
SORT timestamp DESC
LIMIT 20
```

### 操作报告

每次批量操作完成后生成报告：

```
---
title: "批量操作报告 - 2024-01-20"
timestamp: 2024-01-20T10:30:00
operation: 移动到 Projects
affected: 15
success: 15
failed: 0
details:
  - 成功: [[笔记1.md]] → [[1 Projects/笔记1.md]]
  - 成功: [[笔记2.md]] → [[1 Projects/笔记2.md]]
  ...
---
```

---

## 撤销操作 / Undo Operations
---

### 撤销最近操作

```
/撤销: 最近
```

撤销最近一次批量操作。

### 撤销指定操作

```
/撤销: [[批量操作报告 - 2024-01-20]]
```

撤销指定操作报告中的所有更改。

---

## 快捷批量命令 / Quick Batch Commands
---

### 快速归档本周完成

```
/归档本周
```

将本周所有标记为 `#completed` 的文件移动到 Archives。

### 快速添加项目标签

```
/项目标签: "公众号"
```

为所有相关文件添加 `#project-公众号` 标签。

### 快速清空 InBox

```
/清空InBox
```

将所有文件移动到临时归档位置，需要二次确认。

---

## 安全机制 / Safety Mechanisms
---

### 操作限制

- 单次操作最多处理 50 个文件
- 删除操作需要二次确认
- 移动操作前检查目标文件夹

### 备份机制

```
/批量操作: backup - true
```

执行批量操作前自动创建备份。

### 验证模式

```
/批量操作: dry-run
```

只预览不执行，用于测试操作规则。

---

> [!warning] 注意事项
> - 批量操作前务必备份
> - 使用预览功能确认操作范围
> - 复杂操作建议分批执行
> - 定期检查操作历史记录
