---
title: oh-my-opencode 故障排除
tags: [tool, ai, productivity, opencode, oh-my-opencode, troubleshooting]
created: 2026-02-16
updated: 2026-02-16
---

# oh-my-opencode 故障排除

> 常见问题及解决方案。

---

## ⚠️ 安装问题

### 1. 安装失败

**问题**：安装过程中出现错误

**解决方案**：

```bash
# 清理缓存后重试
npm cache clean --force
npx oh-my-opencode install --no-tui --claude=max20
```

### 2. 权限错误

**问题**：权限被拒绝

**解决方案**：

```bash
# Windows 以管理员身份运行
# Linux/macOS 使用 sudo
sudo npx oh-my-opencode install
```

---

## ⚠️ 认证问题

### 1. Claude 认证失败

**问题**：无法连接到 Claude

**解决方案**：

1. 检查 ANTHROPIC_API_KEY 环境变量
2. 验证 API 密钥有效
3. 重新配置：

```bash
opencode auth claude
```

### 2. 模型不可用

**问题**：选择的模型不可用

**解决方案**：

1. 检查配置中的模型名称
2. 确认订阅状态
3. 更新配置：

```json
{
  "agents": {
    "sisyphus": {
      "model": "anthropic/claude-sonnet-4-5"
    }
  }
}
```

---

## ⚠️ 性能问题

### 1. 响应缓慢

**问题**：响应时间过长

**解决方案**：

1. 检查网络连接
2. 使用更轻量的模型
3. 减少上下文大小

```bash
# 使用快速模型
quick 简单任务描述
```

### 2. 内存占用高

**问题**：内存使用过高

**解决方案**：

1. 减少并发任务数
2. 清理会话历史
3. 调整 Hooks 配置

---

## ⚠️ 配置问题

### 1. 配置文件无效

**问题**：JSON 格式错误

**解决方案**：

```bash
# 验证配置
opencode config validate

# 如果无效，使用默认配置
opencode config reset
```

### 2. Hooks 不工作

**问题**：Hook 未生效

**解决方案**：

1. 检查 Hook 是否启用

```bash
opencode hooks list
```

2. 重新加载配置

```bash
opencode reload
```

---

## ⚠️ 会话问题

### 1. 会话中断

**问题**：会话意外中断

**解决方案**：

1. 使用 session-recovery Hook 自动恢复
2. 手动恢复：

```bash
opencode session restore
```

### 2. 上下文窗口满

**问题**：达到 token 限制

**解决方案**：

1. 启用上下文压缩

```json
{
  "hooks": {
    "enabled": ["compaction-context-injector"]
  }
}
```

2. 手动清理：

```bash
opencode clear context
```

---

## ⚠️ 代理问题

### 1. 代理不可用

**问题**：指定的代理不存在

**解决方案**：

1. 查看可用代理

```bash
opencode agents list
```

2. 使用默认代理

```bash
opencode --agent sisyphus
```

### 2. 代理响应错误

**问题**：代理返回错误

**解决方案**：

1. 查看详细错误日志

```bash
opencode logs --agent sisyphus
```

2. 切换到其他代理

---

## ⚠️ MCP 问题

### 1. MCP 连接失败

**问题**：MCP 服务器无法连接

**解决方案**：

1. 检查 MCP 状态

```bash
opencode mcp list
```

2. 重新配置

```bash
opencode mcp reset
opencode mcp setup
```

### 2. 超时错误

**问题**：MCP 请求超时

**解决方案**：

增加超时时间：

```json
{
  "mcp": {
    "timeout": 60000
  }
}
```

---

## 🔧 诊断命令

### 常用诊断命令

| 命令 | 用途 |
|------|------|
| `opencode --version` | 查看版本 |
| `opencode status` | 查看状态 |
| `opencode config validate` | 验证配置 |
| `opencode hooks list` | 查看 Hooks |
| `opencode agents list` | 查看代理 |
| `opencode mcp list` | 查看 MCP |
| `opencode logs` | 查看日志 |

### 日志位置

- Windows: `%APPDATA%\opencode\logs`
- macOS/Linux: `~/.config/opencode/logs`

---

## 📞 获取帮助

### 1. 查看文档

```bash
opencode help
```

### 2. 查看 GitHub

- Issues: https://github.com/code-yeongyu/oh-my-opencode/issues
- Discussions: https://github.com/code-yeongyu/oh-my-opencode/discussions

### 3. 社区支持

- Discord: 加入 oh-my-opencode 社区
- Reddit: r/ohmyopencode

---

## ✅ 检查清单

如果遇到问题，按以下顺序检查：

- [ ] 网络连接正常
- [ ] API 密钥有效
- [ ] 配置文件正确
- [ ] Hooks 已启用
- [ ] 足够的内存
- [ ] 查看错误日志

---

## 📚 相关文档

- [[01-快速开始]] - 安装和配置
- [[02-Agent指南]] - Agent 使用
- [[03-Hooks工作流]] - Hook 系统
- [[04-MCP集成]] - MCP 集成
- [[05-技巧和最佳实践]] - 使用技巧
