# æŒ‡å—

# é…ç½®

## ğŸ“– æ¦‚è¿°

# çŸ¥è­˜åº«

## ğŸ› ï¸ ç³»çµ±è¦æ±‚

### ğŸ’» ç¡¬é«”è¦æ±‚
# é…ç½®
|------|----------|----------|------|
| **CPU** | 4æ ¸å¿ƒ | 8æ ¸å¿ƒ+ | AIæ¨ç†éœ€è¦è¾ƒå¼ºCPU |
| **è¨˜æ†¶é«”** | 8GB | 16GB+ | å¤§æ¨¡å‹éœ€è¦å……è¶³è¨˜æ†¶é«” |
| **å„²å­˜** | 20GB | 50GB+ | æ¨¡å‹å’Œå·¥å…·å„²å­˜ |
| **GPU** | å¯é€‰ | RTX 3060+ | åŠ é€Ÿä»£ç¢¼ç”Ÿæˆ |

### ğŸŒ è»Ÿé«”è¦æ±‚
# ç‰ˆæœ¬
|------|----------|------|
| **Python** | 3.8+ | OpenCodeé‹è¡Œç’°å¢ƒ |
| **Node.js** | 16+ | å‰ç«¯ç•Œé¢ |
# ç‰ˆæœ¬
| **VS Code** | 1.70+ | æ¨èIDE |

## ğŸ“¦ OpenCodeå®‰è£

### ğŸ”§ æ–¹å¼ä¸€ï¼šæºç å®‰è£

#### 1. å…‹éš†ä»“åº“
```bash
# å…‹éš†OpenCodeä»“åº“
git clone https://github.com/opencode-ai/opencode.git
cd opencode

# å‰µå»ºè™šæ‹Ÿç’°å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows
```

#### 2. å®‰è£ä¾èµ–
```bash
# å®‰è£Pythonä¾èµ–
pip install -r requirements.txt

# å®‰è£OpenCode
pip install -e .
```

# é…ç½®
```bash
# é…ç½®
opencode init --config-dir ~/.opencode

# å‰µå»ºå·¥ä½œç©ºé–“
opencode create-workspace my-project --template ai-integrated
```

### ğŸ³ æ–¹å¼äºŒï¼šDockerå®‰è£

#### 1. æ‹‰å–é•œåƒ
```bash
# æ‹‰å–OpenCode Dockeré•œåƒ
docker pull opencode-ai/opencode:latest

# é…ç½®
mkdir -p ~/.opencode/config
mkdir -p ~/.opencode/workspace
```

#### 2. å•Ÿå‹•å®¹å™¨
```bash
# å•Ÿå‹•OpenCodeå®¹å™¨
docker run -d \
  --name opencode \
  -p 8080:8080 \
  -v ~/.opencode/config:/app/config \
  -v ~/.opencode/workspace:/app/workspace \
  -v /var/run/docker.sock:/var/run/docker.sock \
  opencode-ai/opencode:latest
```

# ç®¡ç†

#### ä½¿ç”¨pipå®‰è£
```bash
# ç›´æ¥å®‰è£
pip install opencode-ai

# é©—è­‰å®‰è£
opencode --version
```

#### ä½¿ç”¨condaå®‰è£
```bash
# ä½¿ç”¨condaå®‰è£
conda install -c conda-forge opencode-ai

# æ¿€æ´»ç’°å¢ƒ
conda activate opencode
```

# é…ç½®

# é…ç½®

# é…ç½®

```yaml
# é…ç½®
version: "2.0"
profile: "default"

# æ ¸å¿ƒè¨­ç½®
core:
  workspace_dir: "~/.opencode/workspace"
  temp_dir: "~/.opencode/temp"
  log_level: "INFO"
  max_file_size: "100MB"

# é…ç½®
ai_models:
  primary: "gpt-oss:120b-cloud"
  fallback: "ollama/llama2:7b"
  local: "ollama/codellama:7b"

# ç·¨è¼¯å™¨æ•´åˆ
editor:
  default: "vscode"
  auto_save: true
  syntax_highlighting: true
  auto_complete: true

# ä»£ç¢¼ç”Ÿæˆè¨­ç½®
code_generation:
  max_tokens: 2000
  temperature: 0.3
  top_p: 0.9
  presence_penalty: 0.1
  frequency_penalty: 0.1
```

# é…ç½®

#### å‰µå»ºç’°å¢ƒå˜é‡æª”æ¡ˆ
```bash
# ~/.opencode/.env
# OpenCodeç’°å¢ƒå˜é‡

# é…ç½®
OPENCODE_API_KEY="your-api-key-here"
OPENCODE_BASE_URL="https://api.opencode.ai/v1"

# é…ç½®
OPENCODE_PRIMARY_MODEL="gpt-oss:120b-cloud"
OPENCODE_FALLBACK_MODEL="ollama/llama2:7b"

# é…ç½®
OLLAMA_HOST="localhost:11434"
OLLAMA_MODEL="codellama:7b"

# é…ç½®
VSCODE_PATH="/usr/bin/code"
DEFAULT_EDITOR="vscode"

# é…ç½®
WORKSPACE_DIR="/home/user/opencode-workspace"
TEMP_DIR="/tmp/opencode"
```

## ğŸ¤– AIæ¨¡å‹æ•´åˆ

# é…ç½®

#### GPT-oss:120b-cloudæ•´åˆ
```yaml
# é…ç½®
cloud_models:
  gpt_oss_120b:
    provider: "gpt-oss"
    model: "gpt-oss:120b-cloud"
    api_base: "https://api.gpt-oss.com/v1"
    api_key: "${OPENCODE_API_KEY}"
    max_tokens: 4096
    temperature: 0.3
    capabilities:
      - "code_generation"
      - "code_completion"
      - "code_review"
      - "documentation"
      - "debugging"
    
    # ä½¿ç”¨é™åˆ¶
    limits:
      requests_per_minute: 60
      tokens_per_minute: 120000
      context_length: 8192
    
    # æˆæœ¬æ§åˆ¶
    pricing:
      input_token_cost: 0.00001
      output_token_cost: 0.00003
      currency: "USD"
```

#### å¤šé›²ç«¯æ¨¡å‹æ”¯æŒ
```yaml
# é…ç½®
multi_cloud:
  providers:
    openai:
      models:
        - "gpt-4"
        - "gpt-3.5-turbo"
      api_key: "${OPENAI_API_KEY}"
    
    anthropic:
      models:
        - "claude-3-opus"
        - "claude-3-sonnet"
      api_key: "${ANTHROPIC_API_KEY}"
    
    google:
      models:
        - "gemini-pro"
        - "gemini-pro-vision"
      api_key: "${GOOGLE_API_KEY}"
```

# é…ç½®

#### Ollamaæ•´åˆ
```yaml
# é…ç½®
local_models:
  ollama:
    host: "${OLLAMA_HOST}"
    port: 11434
    timeout: 30
    
    models:
      codellama:
        name: "codellama:7b"
        context_length: 4096
        temperature: 0.2
        specialization: "code"
        
      llama2:
        name: "llama2:7b"
        context_length: 4096
        temperature: 0.7
        specialization: "general"
        
      mistral:
        name: "mistral:7b"
        context_length: 8192
        temperature: 0.5
        specialization: "balanced"
    
# ç®¡ç†
    management:
      auto_update: true
      cache_models: true
      max_cache_size: "10GB"
      cleanup_interval: "7d"
```

#### æœ¬åœ°æ¨¡å‹å„ªåŒ–
```yaml
# æœ¬åœ°æ¨¡å‹æ•ˆèƒ½å„ªåŒ–
optimization:
  # GPUåŠ é€Ÿ
  gpu:
    enabled: true
    device: "cuda:0"
    memory_fraction: 0.8
    precision: "fp16"
  
  # è¨˜æ†¶é«”å„ªåŒ–
  memory:
    max_batch_size: 8
    gradient_checkpointing: true
    use_cache: true
  
  # æ¨ç†å„ªåŒ–
  inference:
    use_flash_attention: true
    beam_size: 1
    early_stopping: true
```

## ğŸ”— Obsidianæ•´åˆ

# çŸ¥è­˜åº«

# é…ç½®
```yaml
# é…ç½®
obsidian:
  enabled: true
  vault_path: "/path/to/your/obsidian-vault"
  api_token: "your-obsidian-api-token"
  
  # åŒæ­¥è¨­ç½®
  sync:
    auto_sync: true
    sync_interval: 300  # 5åˆ†é’Ÿ
    conflict_resolution: "manual"
    
  # ç­†è¨˜æ¨¡æ¿
  templates:
    code_note:
      path: "Templates/Code Note"
      variables:
        - "title"
        - "language"
        - "description"
        - "tags"
    
    project_doc:
      path: "Templates/Project Documentation"
      variables:
        - "project_name"
        - "description"
        - "technologies"
        - "status"
```

#### æ™ºèƒ½ä»£ç¢¼ç­†è¨˜ç”Ÿæˆ
```python
# ä»£ç¢¼ç­†è¨˜ç”Ÿæˆè…³æœ¬
def generate_code_note(code_content, metadata):
    """
    æ ¹æ®ä»£ç¢¼å…§å®¹ç”ŸæˆObsidianç­†è¨˜
    """
    note_template = f"""
---
title: {metadata['title']}
created: {datetime.now().isoformat()}
language: {metadata['language']}
tags: {metadata['tags']}
ai_generated: true
---

# {metadata['title']}

## ğŸ“‹ ä»£ç¢¼æè¿°
{{ai_generated_description}}

## ğŸ’» ä»£ç¢¼å…§å®¹
```{metadata['language']}
{code_content}
```

## ğŸ” é—œéµè¦é»
{{ai_generated_keypoints}}

## ğŸ“š ç›¸é—œè³‡æº
{{ai_generated_resources}}

## ğŸ“ ä½¿ç”¨èªªæ˜
{{ai_generated_usage}}
"""
    return note_template
```

### ğŸ”„ åŒå‘åŒæ­¥

# çŸ¥è­˜åº«
```yaml
# é…ç½®
code_sync:
  enabled: true
  sync_directions:
    - "code_to_knowledge"
    - "knowledge_to_code"
  
  # è‡ªå‹•æå–
  auto_extract:
    functions: true
    classes: true
    comments: true
    documentation: true
    
# çŸ¥è­˜
  knowledge_graph:
    build_relationships: true
    link_similar_code: true
    suggest_related_docs: true
```

# åˆ†æ
```python
# åˆ†æ
code_analysis:
  enabled: true
  
  analysis_types:
    complexity:
      enabled: true
      algorithm: "cyclomatic"
      threshold: 10
    
    security:
      enabled: true
      check_vulnerabilities: true
      scan_dependencies: true
    
    performance:
      enabled: true
      identify_bottlenecks: true
      suggest_optimizations: true
    
    documentation:
      enabled: true
      generate_docs: true
      check_completeness: true
```

## ğŸ¨ ç·¨è¼¯å™¨æ•´åˆ

### ğŸ’» VS Codeæ•´åˆ

#### å®‰è£VS Codeæ“´å±•
```bash
# å®‰è£OpenCode VS Codeæ“´å±•
code --install-extension opencode-ai.opencode

# é©—è­‰å®‰è£
code --list-extensions | grep opencode
```

# é…ç½®
```json
// .vscode/settings.json
{
  "opencode.enabled": true,
  "opencode.autoComplete": true,
  "opencode.model": "gpt-oss:120b-cloud",
  "opencode.fallbackModel": "ollama/codellama:7b",
  "opencode.maxTokens": 2000,
  "opencode.temperature": 0.3,
  
  "opencode.obsidian.enabled": true,
  "opencode.obsidian.vaultPath": "/path/to/vault",
  "opencode.obsidian.autoSync": true,
  
  "opencode.shortcuts": {
    "generateCode": "ctrl+shift+g",
    "completeCode": "ctrl+shift+c",
    "explainCode": "ctrl+shift+e",
    "optimizeCode": "ctrl+shift+o"
  }
}
```

# é…ç½®
```json
// .vscode/keybindings.json
[
  {
    "key": "ctrl+shift+g",
    "command": "opencode.generateCode",
    "when": "editorTextFocus"
  },
  {
    "key": "ctrl+shift+c",
    "command": "opencode.completeCode",
    "when": "editorTextFocus"
  },
  {
    "key": "ctrl+shift+e",
    "command": "opencode.explainCode",
    "when": "editorTextFocus"
  }
]
```

### ğŸŒ Webç•Œé¢æ•´åˆ

#### å•Ÿå‹•WebæœåŠ¡
```bash
# å•Ÿå‹•OpenCode WebæœåŠ¡
opencode serve --port 8080 --host 0.0.0.0

# é…ç½®
opencode serve --config ~/.opencode/config.yaml
```

# é…ç½®
```yaml
# é…ç½®
web:
  enabled: true
  host: "0.0.0.0"
  port: 8080
  ssl: false
  ssl_cert: null
  ssl_key: null
  
  # ç•Œé¢è¨­ç½®
  ui:
    theme: "dark"
    language: "zh-CN"
    font_size: 14
    code_font: "Fira Code"
    
  # åŠŸèƒ½è¨­ç½®
  features:
    real_time_completion: true
    syntax_highlighting: true
    error_detection: true
    auto_save: true
```

## ğŸš€ é«˜çº§åŠŸèƒ½

### ğŸ¤– è‡ªå®šä¹‰AIåŠ©æ‰‹

#### åŠ©æ‰‹è§’è‰²å®šä¹‰
```yaml
# é…ç½®
ai_assistants:
  code_expert:
    name: "ä»£ç¢¼ä¸“å®¶"
    role: "senior_developer"
    expertise:
      - "python"
      - "javascript"
      - "java"
      - "go"
      - "rust"
    personality: "ä¸“ä¸šã€ä¸¥è°¨ã€è€å¿ƒ"
    model: "gpt-oss:120b-cloud"
    
  security_analyst:
# åˆ†æ
    role: "security_specialist"
    expertise:
      - "vulnerability_assessment"
      - "code_security"
      - "penetration_testing"
    personality: "è°¨æ…ã€ç»†è‡´ã€å…¨é¢"
    model: "gpt-oss:120b-cloud"
    
  performance_optimizer:
    name: "æ•ˆèƒ½å„ªåŒ–å¸ˆ"
    role: "optimization_expert"
    expertise:
      - "algorithm_optimization"
      - "performance_tuning"
      - "memory_optimization"
    personality: "é«˜æ•ˆã€ç²¾å‡†ã€å®ç”¨"
    model: "codellama:7b"
```

# å·¥ä½œæµ
```yaml
# å·¥ä½œæµ
workflows:
  code_review:
    steps:
      - name: "syntax_check"
        assistant: "code_expert"
        tools: ["linter", "formatter"]
      
      - name: "security_scan"
        assistant: "security_analyst"
        tools: ["vulnerability_scanner"]
      
      - name: "performance_analysis"
        assistant: "performance_optimizer"
        tools: ["profiler", "benchmark"]
    
    triggers:
      - "git_commit"
      - "file_save"
      - "manual_request"
```

# å·¥ä½œæµ

#### CI/CDæ•´åˆ
```yaml
# é…ç½®
cicd:
  enabled: true
  
  # GitHub Actionsæ•´åˆ
  github_actions:
    enabled: true
    workflow_file: ".github/workflows/opencode.yml"
    
    # è‡ªå‹•ä»£ç¢¼å¯©æŸ¥
    code_review:
      enabled: true
      trigger_on: "pull_request"
      reviewers: ["code_expert", "security_analyst"]
      
    # è‡ªå‹•æ¸¬è©¦ç”Ÿæˆ
    test_generation:
      enabled: true
      frameworks: ["pytest", "jest", "junit"]
      coverage_threshold: 80
  
  # GitLab CIæ•´åˆ
  gitlab_ci:
    enabled: false
    gitlab_ci_file: ".gitlab-ci.yml"
```

# éƒ¨ç½²
```yaml
# é…ç½®
deployment:
  enabled: true
  
# éƒ¨ç½²
  docker:
    enabled: true
    auto_build: true
    registry: "docker.io/yourusername"
    
# éƒ¨ç½²
  kubernetes:
    enabled: false
    namespace: "opencode"
    helm_chart: "./charts/opencode"
```

## ğŸ“Š æ•ˆèƒ½ç›£æ§

### ğŸ“ˆ ä½¿ç”¨çµ±è¨ˆ

# é…ç½®
```yaml
# é…ç½®
monitoring:
  enabled: true
  
  # æŒ‡æ ‡æ”¶é›†
  metrics:
    code_generation:
      - "requests_count"
      - "success_rate"
      - "average_response_time"
      - "tokens_used"
    
    system:
      - "cpu_usage"
      - "memory_usage"
      - "disk_usage"
      - "network_io"
    
    user:
      - "active_users"
      - "session_duration"
      - "feature_usage"
  
  # æ•¸æ“šå„²å­˜
  storage:
    type: "influxdb"
    host: "localhost"
    port: 8086
    database: "opencode_metrics"
    retention_policy: "30d"
```

#### æ•ˆèƒ½å„ªåŒ–
```yaml
# é…ç½®
optimization:
  # ç¼“å­˜è¨­ç½®
  cache:
    enabled: true
    type: "redis"
    host: "localhost"
    port: 6379
    ttl: 3600
    
  # è´Ÿè½½å‡è¡¡
  load_balancing:
    enabled: true
    algorithm: "round_robin"
    health_check_interval: 30
    
  # è³‡æºé™åˆ¶
  resource_limits:
    max_concurrent_requests: 100
    max_memory_usage: "8GB"
    max_cpu_usage: "80%"
```

# é…ç½®

### ğŸ›¡ï¸ å®‰å…¨è¨­ç½®

#### APIå®‰å…¨
```yaml
# é…ç½®
security:
  # è®¤è¯
  authentication:
    enabled: true
    method: "jwt"
    secret_key: "${JWT_SECRET_KEY}"
    token_expiry: 3600
    
  # æˆæƒ
  authorization:
    enabled: true
    roles:
      - "admin"
      - "developer"
      - "viewer"
    permissions:
      admin: ["read", "write", "delete", "manage"]
      developer: ["read", "write"]
      viewer: ["read"]
  
  # é€Ÿç‡é™åˆ¶
  rate_limiting:
    enabled: true
    requests_per_minute: 100
    burst_size: 20
```

#### æ•¸æ“šä¿è­·
```yaml
# é…ç½®
data_protection:
  # åŠ å¯†
  encryption:
    enabled: true
    algorithm: "AES-256-GCM"
    key_rotation: "monthly"
    
  # å‚™ä»½
  backup:
    enabled: true
    frequency: "daily"
    retention: "30d"
    encryption: true
    
  # å®¡è®¡
  audit:
    enabled: true
    log_level: "INFO"
    retention: "90d"
    events:
      - "login"
      - "code_generation"
      - "file_access"
      - "config_change"
```

## ğŸ“‹ æ•…éšœæ’é™¤

### ğŸ”§ å¸¸è§å•é¡Œ

#### é€£æ¥å•é¡Œ
```bash
# æª¢æŸ¥OpenCodeæœåŠ¡ç‹€æ…‹
opencode status

# æª¢æŸ¥æ¨¡å‹é€£æ¥
opencode test-model gpt-oss:120b-cloud

# æª¢æŸ¥Obsidiané€£æ¥
opencode test-obsidian
```

#### æ•ˆèƒ½å•é¡Œ
```bash
# æ•ˆèƒ½è¯Šæ–­
opencode diagnose --performance

# æ¸…ç†ç¼“å­˜
opencode cache clear

# é…ç½®
opencode config reset
```

### ğŸ“ æŠ€è¡“æ”¯æŒ

# é…ç½®
```yaml
# é…ç½®
logging:
  level: "INFO"
  format: "json"
  
  handlers:
    console:
      enabled: true
      level: "INFO"
    
    file:
      enabled: true
      level: "DEBUG"
      path: "/var/log/opencode/opencode.log"
      max_size: "100MB"
      backup_count: 5
    
    remote:
      enabled: false
      endpoint: "https://logs.opencode.ai"
      api_key: "${LOGGING_API_KEY}"
```

---

# é…ç½®

# é…ç½®
- [ ] OpenCodeå®‰è£å¹¶é©—è­‰
# é…ç½®
- [ ] AIæ¨¡å‹é€£æ¥å¹¶é©—è­‰
- [ ] ç·¨è¼¯å™¨æ•´åˆå¹¶æ¸¬è©¦

# é…ç½®
- [ ] Obsidianæ•´åˆå¹¶æ¸¬è©¦
# é…ç½®
# å·¥ä½œæµ
- [ ] æ•ˆèƒ½ç›£æ§å¯ç”¨

# é…ç½®
- [ ] æ•ˆèƒ½å„ªåŒ–è¨­ç½®
# é…ç½®
# é…ç½®
- [ ] å‚™ä»½å’Œæ¢å¾©è¨­ç½®

---

## ğŸ‰ ä¸‹ä¸€æ­¥

# é…ç½®

1. **ğŸ’» å‰µå»ºç¬¬ä¸€ä¸ªAIè¾…åŠ©å°ˆæ¡ˆ**
2. **ğŸ“ ç”Ÿæˆæ™ºèƒ½ä»£ç¢¼æ–‡æª”**
# çŸ¥è­˜åº«
4. **ğŸ“Š ç›£æ§ä½¿ç”¨æƒ…å†µå’Œæ•ˆèƒ½**

# æ•ˆç‡

---

# æ›´æ–°