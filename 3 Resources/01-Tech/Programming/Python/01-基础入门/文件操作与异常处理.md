---
title: æ–‡ä»¶æ“ä½œä¸å¼‚å¸¸å¤„ç†
status: active
priority: high
tags: [resource/tech/programming/python, python/file-operations, python/error-handling]
aliases: [Pythonæ–‡ä»¶å¤„ç†, Pythonå¼‚å¸¸å¤„ç†]
created: 2026-02-01
---

# æ–‡ä»¶æ“ä½œä¸å¼‚å¸¸å¤„ç†

> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡Pythonçš„æ–‡ä»¶I/Oæ“ä½œå’Œå¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œèƒ½å¤Ÿå®‰å…¨åœ°è¯»å†™æ–‡ä»¶ã€å¤„ç†é”™è¯¯æƒ…å†µã€‚

## ğŸ“š åŸºç¡€æ¦‚å¿µ

### æ–‡ä»¶æ“ä½œä¸å¼‚å¸¸å¤„ç†å…³ç³»
```mermaid
graph TB
    A[æ–‡ä»¶æ“ä½œä¸å¼‚å¸¸å¤„ç†] --> B[æ–‡ä»¶I/Oæ“ä½œ]
    A --> C[å¼‚å¸¸å¤„ç†æœºåˆ¶]
    A --> D[ä¸Šä¸‹æ–‡ç®¡ç†å™¨]
    
    B --> B1[æ–‡ä»¶è¯»å†™]
    B --> B2[è·¯å¾„æ“ä½œ]
    B --> B3[æ–‡ä»¶ç³»ç»Ÿæ“ä½œ]
    
    C --> C1[å¼‚å¸¸ç±»å‹]
    C --> C2[å¼‚å¸¸æ•è·]
    C --> C3[å¼‚å¸¸æŠ›å‡º]
    
    D --> D1[withè¯­å¥]
    D --> D2[è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨]
    D --> D3[èµ„æºç®¡ç†]
```

## ğŸ“ æ–‡ä»¶æ“ä½œ

### æ–‡ä»¶è¯»å†™åŸºç¡€

#### æ–‡ä»¶æ‰“å¼€ä¸å…³é—­
```python
# åŸºæœ¬æ–‡ä»¶æ“ä½œ
file = open('example.txt', 'r', encoding='utf-8')
content = file.read()
file.close()

# æŸ¥çœ‹æ–‡ä»¶å¯¹è±¡å±æ€§
file = open('example.txt', 'r')
print(file.name)      # æ–‡ä»¶å
print(file.mode)      # æ‰“å¼€æ¨¡å¼
print(file.closed)    # æ˜¯å¦å…³é—­
file.close()
```

#### withè¯­å¥ï¼ˆæ¨èï¼‰
```python
# ä½¿ç”¨withè¯­å¥è‡ªåŠ¨å¤„ç†æ–‡ä»¶å…³é—­
with open('example.txt', 'r', encoding='utf-8') as file:
    content = file.read()
    # æ–‡ä»¶ä¼šè‡ªåŠ¨å…³é—­ï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸

# ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶
with open('example.txt', 'r', encoding='utf-8') as file:
    content = file.read()
    print(content)

# é€è¡Œè¯»å–
with open('example.txt', 'r', encoding='utf-8') as file:
    for line in file:
        print(line.strip())  # å»é™¤è¡Œå°¾æ¢è¡Œç¬¦
```

#### æ–‡ä»¶æ‰“å¼€æ¨¡å¼
```python
# æ–‡ä»¶æ‰“å¼€æ¨¡å¼åˆ—è¡¨
modes = {
    'r': 'åªè¯»æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰',
    'w': 'å†™å…¥æ¨¡å¼ï¼ˆä¼šè¦†ç›–åŸæ–‡ä»¶ï¼‰',
    'a': 'è¿½åŠ æ¨¡å¼',
    'r+': 'è¯»å†™æ¨¡å¼',
    'w+': 'è¯»å†™æ¨¡å¼ï¼ˆä¼šè¦†ç›–åŸæ–‡ä»¶ï¼‰',
    'a+': 'è¯»å†™è¿½åŠ æ¨¡å¼',
    'b': 'äºŒè¿›åˆ¶æ¨¡å¼',
    't': 'æ–‡æœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰'
}

# äºŒè¿›åˆ¶æ¨¡å¼è¯»å†™
with open('image.jpg', 'rb') as file:
    binary_data = file.read()

with open('copy.jpg', 'wb') as file:
    file.write(binary_data)

# æ–‡æœ¬æ¨¡å¼è¯»å†™
with open('data.txt', 'w', encoding='utf-8') as file:
    file.write('Hello, Python!')
```

### æ–‡ä»¶è¯»å†™æ–¹æ³•

#### åŸºæœ¬è¯»å†™æ–¹æ³•
```python
# å†™å…¥æ–‡ä»¶
with open('output.txt', 'w', encoding='utf-8') as file:
    file.write('Hello, World!\n')
    file.write('Pythonç¼–ç¨‹\n')

# è¯»å–æ–‡ä»¶çš„ä¸åŒæ–¹å¼
with open('output.txt', 'r', encoding='utf-8') as file:
    # read() - è¯»å–æ•´ä¸ªæ–‡ä»¶
    content = file.read()
    print("read():", repr(content))
    
with open('output.txt', 'r', encoding='utf-8') as file:
    # readline() - è¯»å–ä¸€è¡Œ
    first_line = file.readline()
    print("readline():", first_line)
    
with open('output.txt', 'r', encoding='utf-8') as file:
    # readlines() - è¯»å–æ‰€æœ‰è¡Œåˆ°åˆ—è¡¨
    lines = file.readlines()
    print("readlines():", lines)
    
with open('output.txt', 'r', encoding='utf-8') as file:
    # é€è¡Œè¯»å–ï¼ˆæ¨èï¼‰
    for line in file:
        print(line.strip())
```

#### å¤§æ–‡ä»¶å¤„ç†
```python
# åˆ†å—è¯»å–å¤§æ–‡ä»¶
def read_large_file(file_path, chunk_size=1024):
    """åˆ†å—è¯»å–å¤§æ–‡ä»¶"""
    with open(file_path, 'r', encoding='utf-8') as file:
        while True:
            chunk = file.read(chunk_size)
            if not chunk:
                break
            yield chunk

# ä½¿ç”¨ç¤ºä¾‹
for chunk in read_large_file('large_file.txt'):
    print(len(chunk))  # å¤„ç†æ¯ä¸ªæ•°æ®å—

# ä½¿ç”¨ç”Ÿæˆå™¨é€è¡Œå¤„ç†
def process_lines(file_path):
    """é€è¡Œå¤„ç†æ–‡ä»¶"""
    with open(file_path, 'r', encoding='utf-8') as file:
        for line_num, line in enumerate(file, 1):
            yield line_num, line.strip()

# å¤„ç†CSVæ–‡ä»¶
def read_csv(file_path):
    """è¯»å–CSVæ–‡ä»¶"""
    with open(file_path, 'r', encoding='utf-8') as file:
        for line in file:
            # ç®€å•çš„CSVåˆ†å‰²
            fields = line.strip().split(',')
            yield fields

for fields in read_csv('data.csv'):
    print(fields)
```

### æ–‡ä»¶æŒ‡é’ˆæ“ä½œ

#### æ–‡ä»¶æŒ‡é’ˆåŸºç¡€
```python
with open('example.txt', 'r', encoding='utf-8') as file:
    # tell() - è·å–å½“å‰æŒ‡é’ˆä½ç½®
    print(f"å½“å‰ä½ç½®: {file.tell()}")
    
    # read(5) - è¯»å–5ä¸ªå­—ç¬¦
    print(file.read(5))
    print(f"å½“å‰ä½ç½®: {file.tell()}")
    
    # seek(offset, whence) - ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ
    file.seek(0)  # å›åˆ°æ–‡ä»¶å¼€å¤´
    print(f"å½“å‰ä½ç½®: {file.tell()}")
    
    file.seek(10)  # è·³è½¬åˆ°ç¬¬10ä¸ªå­—ç¬¦
    print(file.read(5))
    
    # whenceå‚æ•°: 0=æ–‡ä»¶å¼€å¤´, 1=å½“å‰ä½ç½®, 2=æ–‡ä»¶æœ«å°¾
    file.seek(-5, 2)  # è·³è½¬åˆ°æ–‡ä»¶æœ«å°¾å‰5ä¸ªå­—ç¬¦
    print(file.read())
```

### æ–‡ä»¶ç¼–ç 

#### ç¼–ç å¤„ç†
```python
# ä¸åŒç¼–ç å†™å…¥æ–‡ä»¶
text = "Hello, ä¸–ç•Œï¼"

# UTF-8ç¼–ç 
with open('utf8.txt', 'w', encoding='utf-8') as file:
    file.write(text)

# GBKç¼–ç 
with open('gbk.txt', 'w', encoding='gbk') as file:
    file.write(text)

# è¯»å–ä¸åŒç¼–ç çš„æ–‡ä»¶
with open('utf8.txt', 'r', encoding='utf-8') as file:
    print(file.read())  # æ­£ç¡®è¯»å–

# é”™è¯¯çš„ç¼–ç ä¼šå¯¼è‡´å¼‚å¸¸
try:
    with open('utf8.txt', 'r', encoding='gbk') as file:
        print(file.read())  # å¯èƒ½å‡ºé”™
except UnicodeDecodeError as e:
    print(f"ç¼–ç é”™è¯¯: {e}")
```

### è·¯å¾„æ“ä½œ

#### os.pathæ¨¡å—
```python
import os

# è·¯å¾„æ‹¼æ¥
file_path = os.path.join('folder', 'subfolder', 'file.txt')
print(file_path)  # folder/subfolder/file.txt

# è·¯å¾„åˆ†å‰²
print(os.path.split(file_path))  # ('folder/subfolder', 'file.txt')

# æ–‡ä»¶æ‰©å±•å
print(os.path.splitext('file.txt'))  # ('file', '.txt')

# ç»å¯¹è·¯å¾„
print(os.path.abspath('file.txt'))

# è·¯å¾„ä¿¡æ¯
print(os.path.exists('file.txt'))   # æ–‡ä»¶æ˜¯å¦å­˜åœ¨
print(os.path.isfile('file.txt'))   # æ˜¯å¦ä¸ºæ–‡ä»¶
print(os.path.isdir('folder'))      # æ˜¯å¦ä¸ºç›®å½•
print(os.path.getsize('file.txt'))  # æ–‡ä»¶å¤§å°

# å½“å‰å·¥ä½œç›®å½•
print(os.getcwd())  # å½“å‰ç›®å½•

# åˆ›å»ºç›®å½•
os.makedirs('new_folder/subfolder', exist_ok=True)
```

#### pathlibæ¨¡å—ï¼ˆæ¨èï¼‰
```python
from pathlib import Path

# è·¯å¾„æ“ä½œ
path = Path('folder/subfolder/file.txt')
print(path.name)      # æ–‡ä»¶å
print(path.stem)      # æ–‡ä»¶åï¼ˆæ— æ‰©å±•åï¼‰
print(path.suffix)    # æ‰©å±•å
print(path.parent)    # çˆ¶ç›®å½•

# è·¯å¾„æ‹¼æ¥
new_path = path.parent / 'new_file.txt'

# è·¯å¾„æ£€æŸ¥
print(path.exists())
print(path.is_file())
print(path.is_dir())

# åˆ›å»ºç›®å½•
Path('new_folder').mkdir(exist_ok=True)

# è¯»å†™æ–‡ä»¶
content = path.read_text(encoding='utf-8')
path.write_text('Hello', encoding='utf-8')

# éå†ç›®å½•
for file in Path('folder').iterdir():
    print(file.name)
```

### æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

#### ç›®å½•æ“ä½œ
```python
import os
import shutil

# åˆ›å»ºç›®å½•
os.mkdir('new_folder')  # åˆ›å»ºå•å±‚ç›®å½•
os.makedirs('a/b/c', exist_ok=True)  # åˆ›å»ºå¤šå±‚ç›®å½•

# åˆ é™¤ç›®å½•
os.rmdir('empty_folder')  # åˆ é™¤ç©ºç›®å½•
shutil.rmtree('folder')  # åˆ é™¤æ•´ä¸ªç›®å½•æ ‘

# é‡å‘½åæ–‡ä»¶
os.rename('old_name.txt', 'new_name.txt')

# ç§»åŠ¨æ–‡ä»¶
shutil.move('file.txt', 'new_location/file.txt')

# å¤åˆ¶æ–‡ä»¶
shutil.copy2('source.txt', 'dest.txt')  # ä¿ç•™å…ƒæ•°æ®
shutil.copyfile('source.txt', 'dest.txt')  # åªå¤åˆ¶å†…å®¹
```

#### æ–‡ä»¶æœç´¢
```python
import glob

# ä½¿ç”¨globæŸ¥æ‰¾æ–‡ä»¶
txt_files = glob.glob('*.txt')
print(txt_files)  # ['file1.txt', 'file2.txt', ...]

# é€’å½’æœç´¢
all_py_files = glob.glob('**/*.py', recursive=True)
print(all_py_files)

# ä½¿ç”¨pathlibé€’å½’æŸ¥æ‰¾
from pathlib import Path
for file in Path('.').rglob('*.py'):
    print(file)
```

## âš ï¸ å¼‚å¸¸å¤„ç†

### å¼‚å¸¸åŸºç¡€

#### å¼‚å¸¸ç±»å‹
```python
# å¸¸è§å¼‚å¸¸ç±»å‹
common_exceptions = {
    'Exception': 'æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»',
    'ValueError': 'å€¼ä¸åˆé€‚',
    'TypeError': 'ç±»å‹ä¸åŒ¹é…',
    'IndexError': 'ç´¢å¼•è¶…å‡ºèŒƒå›´',
    'KeyError': 'å­—å…¸é”®ä¸å­˜åœ¨',
    'FileNotFoundError': 'æ–‡ä»¶æœªæ‰¾åˆ°',
    'PermissionError': 'æƒé™ä¸è¶³',
    'ZeroDivisionError': 'é™¤æ•°ä¸ºé›¶',
    'AttributeError': 'å±æ€§ä¸å­˜åœ¨',
    'ImportError': 'æ¨¡å—å¯¼å…¥å¤±è´¥'
}

# å¼‚å¸¸ç¤ºä¾‹
try:
    x = int("abc")  # ValueError
except ValueError as e:
    print(f"å€¼é”™è¯¯: {e}")

try:
    numbers = [1, 2, 3]
    print(numbers[10])  # IndexError
except IndexError as e:
    print(f"ç´¢å¼•é”™è¯¯: {e}")

try:
    data = {'name': 'Alice'}
    print(data['age'])  # KeyError
except KeyError as e:
    print(f"é”®é”™è¯¯: {e}")
```

#### å¼‚å¸¸æ•è·
```python
# åŸºæœ¬å¼‚å¸¸æ•è·
try:
    result = 10 / 0
except ZeroDivisionError:
    print("é™¤æ•°ä¸èƒ½ä¸ºé›¶")

# æ•è·å¤šä¸ªå¼‚å¸¸
try:
    file = open('nonexistent.txt', 'r')
except FileNotFoundError:
    print("æ–‡ä»¶æœªæ‰¾åˆ°")
except PermissionError:
    print("æƒé™ä¸è¶³")
except Exception as e:
    print(f"å…¶ä»–é”™è¯¯: {e}")

# æ•è·æ‰€æœ‰å¼‚å¸¸ï¼ˆä¸æ¨èï¼‰
try:
    x = int("abc")
except Exception as e:
    print(f"å‘ç”Ÿé”™è¯¯: {e}")
```

#### å¼‚å¸¸å¤„ç†ç»“æ„
```python
# å®Œæ•´çš„å¼‚å¸¸å¤„ç†ç»“æ„
try:
    # å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç 
    result = 10 / int(input("è¯·è¾“å…¥é™¤æ•°: "))
except ZeroDivisionError:
    # å¤„ç†ç‰¹å®šå¼‚å¸¸
    print("é™¤æ•°ä¸èƒ½ä¸ºé›¶")
except ValueError:
    # å¤„ç†å¦ä¸€ä¸ªå¼‚å¸¸
    print("è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—")
else:
    # æ²¡æœ‰å¼‚å¸¸æ—¶æ‰§è¡Œ
    print(f"ç»“æœ: {result}")
finally:
    # æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ
    print("ç¨‹åºæ‰§è¡Œå®Œæ¯•")

# å®é™…ç¤ºä¾‹
def read_file_safely(file_path):
    """å®‰å…¨è¯»å–æ–‡ä»¶"""
    try:
        with open(file_path, 'r', encoding='utf-8') as file:
            content = file.read()
        return content
    except FileNotFoundError:
        print(f"é”™è¯¯: æ–‡ä»¶ {file_path} æœªæ‰¾åˆ°")
        return None
    except PermissionError:
        print(f"é”™è¯¯: æ²¡æœ‰æƒé™è¯»å–æ–‡ä»¶ {file_path}")
        return None
    except Exception as e:
        print(f"æœªçŸ¥é”™è¯¯: {e}")
        return None
    finally:
        print("æ–‡ä»¶è¯»å–æ“ä½œå®Œæˆ")
```

### è‡ªå®šä¹‰å¼‚å¸¸

#### å®šä¹‰å¼‚å¸¸ç±»
```python
# è‡ªå®šä¹‰å¼‚å¸¸ç±»
class CustomError(Exception):
    """è‡ªå®šä¹‰å¼‚å¸¸"""
    def __init__(self, message):
        self.message = message
        super().__init__(self.message)

class ValueTooSmallError(Exception):
    """å€¼å¤ªå°å¼‚å¸¸"""
    def __init__(self, value, minimum):
        self.value = value
        self.minimum = minimum
        super().__init__(f"å€¼ {value} å°äºæœ€å°å€¼ {minimum}")

# ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸
def validate_value(value, minimum):
    """éªŒè¯å€¼"""
    if value < minimum:
        raise ValueTooSmallError(value, minimum)
    return value

# æµ‹è¯•è‡ªå®šä¹‰å¼‚å¸¸
try:
    validate_value(5, 10)
except ValueTooSmallError as e:
    print(f"éªŒè¯å¤±è´¥: {e}")
```

#### å¼‚å¸¸é“¾
```python
# å¼‚å¸¸é“¾ï¼šä¿æŒåŸå§‹å¼‚å¸¸ä¿¡æ¯
def process_data(data):
    """å¤„ç†æ•°æ®"""
    try:
        result = int(data)
        return result * 2
    except ValueError as e:
        # ä½¿ç”¨raise fromä¿ç•™åŸå§‹å¼‚å¸¸
        raise ValueError(f"æ•°æ®å¤„ç†å¤±è´¥: {data}") from e

def main():
    """ä¸»å‡½æ•°"""
    try:
        result = process_data("abc")
    except ValueError as e:
        print(f"å‘ç”Ÿé”™è¯¯: {e}")
        print(f"åŸå§‹å¼‚å¸¸: {e.__cause__}")

main()
```

### å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ

#### å…·ä½“å¼‚å¸¸æ•è·
```python
# âŒ ä¸å¥½çš„åšæ³•ï¼šæ•è·è¿‡äºå®½æ³›
def bad_function():
    try:
        result = int(input("è¯·è¾“å…¥æ•°å­—: "))
        return result * 2
    except Exception:  # å¤ªå®½æ³›
        print("å‘ç”Ÿé”™è¯¯")
        return None

# âœ… å¥½çš„åšæ³•ï¼šæ•è·å…·ä½“å¼‚å¸¸
def good_function():
    try:
        result = int(input("è¯·è¾“å…¥æ•°å­—: "))
        return result * 2
    except ValueError:
        print("è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—")
        return None
    except KeyboardInterrupt:
        print("ç”¨æˆ·ä¸­æ–­")
        return None
```

#### é€‚å½“çš„å¼‚å¸¸å¤„ç†
```python
# âŒ ä¸å¥½çš„åšæ³•ï¼šå¿½ç•¥å¼‚å¸¸
def bad_read_file(filename):
    try:
        with open(filename) as f:
            return f.read()
    except:
        pass  # å¿½ç•¥æ‰€æœ‰å¼‚å¸¸

# âœ… å¥½çš„åšæ³•ï¼šé€‚å½“çš„å¼‚å¸¸å¤„ç†
def good_read_file(filename):
    try:
        with open(filename, 'r', encoding='utf-8') as f:
            return f.read()
    except FileNotFoundError:
        print(f"æ–‡ä»¶ {filename} ä¸å­˜åœ¨")
        return ""
    except PermissionError:
        print(f"æ²¡æœ‰æƒé™è¯»å–æ–‡ä»¶ {filename}")
        return ""
    except Exception as e:
        print(f"è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: {e}")
        return ""
```

## ğŸ”„ ä¸Šä¸‹æ–‡ç®¡ç†å™¨

### withè¯­å¥

#### åŸºæœ¬withè¯­å¥
```python
# æ–‡ä»¶æ“ä½œä½¿ç”¨withè¯­å¥
with open('example.txt', 'r', encoding='utf-8') as file:
    content = file.read()
# æ–‡ä»¶è‡ªåŠ¨å…³é—­

# å¤šä¸ªæ–‡ä»¶
with open('file1.txt', 'r') as f1, open('file2.txt', 'w') as f2:
    content = f1.read()
    f2.write(content)

# è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨
class Timer:
    """è®¡æ—¶å™¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""
    def __enter__(self):
        self.start = time.time()
        return self
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        self.end = time.time()
        self.elapsed = self.end - self.start
        print(f"æ‰§è¡Œæ—¶é—´: {self.elapsed:.4f}ç§’")
        return False  # Falseè¡¨ç¤ºä¸å¤„ç†å¼‚å¸¸

import time
with Timer():
    time.sleep(1)
    print("æ‰§è¡Œä¸­...")
```

#### è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨
```python
from contextlib import contextmanager

# ä½¿ç”¨è£…é¥°å™¨åˆ›å»ºä¸Šä¸‹æ–‡ç®¡ç†å™¨
@contextmanager
def file_writer(filename):
    """æ–‡ä»¶å†™å…¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""
    file = open(filename, 'w')
    try:
        yield file
    finally:
        file.close()

# ä½¿ç”¨è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨
with file_writer('output.txt') as f:
    f.write('Hello, World!')
# æ–‡ä»¶è‡ªåŠ¨å…³é—­

# èµ„æºç®¡ç†ä¸Šä¸‹æ–‡ç®¡ç†å™¨
class Resource:
    """èµ„æºç±»"""
    def __init__(self, name):
        self.name = name
        print(f"åˆ›å»ºèµ„æº: {name}")
    
    def __enter__(self):
        print(f"è·å–èµ„æº: {self.name}")
        return self
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        print(f"é‡Šæ”¾èµ„æº: {self.name}")
        if exc_type:
            print(f"å‘ç”Ÿå¼‚å¸¸: {exc_val}")
        return False

# ä½¿ç”¨èµ„æºç®¡ç†å™¨
with Resource("Database Connection"):
    print("ä½¿ç”¨èµ„æº...")
    # å³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œèµ„æºä¹Ÿä¼šè¢«æ­£ç¡®é‡Šæ”¾
```

## ğŸ¯ å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šæ–‡ä»¶å¤‡ä»½å·¥å…·
```python
import os
import shutil
from datetime import datetime

def backup_files(source_dir, backup_dir):
    """å¤‡ä»½æ–‡ä»¶"""
    try:
        # åˆ›å»ºå¤‡ä»½ç›®å½•
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        backup_path = os.path.join(backup_dir, f'backup_{timestamp}')
        os.makedirs(backup_path, exist_ok=True)
        
        # å¤åˆ¶æ–‡ä»¶
        for filename in os.listdir(source_dir):
            source_file = os.path.join(source_dir, filename)
            dest_file = os.path.join(backup_path, filename)
            
            if os.path.isfile(source_file):
                shutil.copy2(source_file, dest_file)
                print(f"å¤‡ä»½: {filename}")
        
        print(f"å¤‡ä»½å®Œæˆ: {backup_path}")
        return True
        
    except Exception as e:
        print(f"å¤‡ä»½å¤±è´¥: {e}")
        return False

# ä½¿ç”¨ç¤ºä¾‹
backup_files('data', 'backups')
```

### ç»ƒä¹ 2ï¼šæ—¥å¿—åˆ†æå™¨
```python
import re
from pathlib import Path

def analyze_log_file(log_path):
    """åˆ†ææ—¥å¿—æ–‡ä»¶"""
    try:
        # æ—¥å¿—ç»Ÿè®¡
        error_count = 0
        warning_count = 0
        error_messages = []
        
        # æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
        error_pattern = re.compile(r'ERROR: (.*)')
        warning_pattern = re.compile(r'WARNING: (.*)')
        
        # è¯»å–æ—¥å¿—æ–‡ä»¶
        with open(log_path, 'r', encoding='utf-8') as file:
            for line in file:
                # åŒ¹é…é”™è¯¯
                error_match = error_pattern.search(line)
                if error_match:
                    error_count += 1
                    error_messages.append(error_match.group(1))
                
                # åŒ¹é…è­¦å‘Š
                warning_match = warning_pattern.search(line)
                if warning_match:
                    warning_count += 1
        
        # è¿”å›åˆ†æç»“æœ
        return {
            'errors': error_count,
            'warnings': warning_count,
            'error_messages': error_messages[:10]  # åªè¿”å›å‰10ä¸ªé”™è¯¯
        }
        
    except FileNotFoundError:
        print(f"æ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨: {log_path}")
        return None
    except Exception as e:
        print(f"åˆ†ææ—¥å¿—æ—¶å‘ç”Ÿé”™è¯¯: {e}")
        return None

# ä½¿ç”¨ç¤ºä¾‹
result = analyze_log_file('app.log')
if result:
    print(f"é”™è¯¯æ•°: {result['errors']}")
    print(f"è­¦å‘Šæ•°: {result['warnings']}")
    print("æœ€è¿‘é”™è¯¯:")
    for msg in result['error_messages']:
        print(f"  - {msg}")
```

### ç»ƒä¹ 3ï¼šé…ç½®æ–‡ä»¶è¯»å–å™¨
```python
import configparser
from pathlib import Path

def read_config_file(config_path):
    """è¯»å–é…ç½®æ–‡ä»¶"""
    try:
        config = configparser.ConfigParser()
        
        # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if not Path(config_path).exists():
            raise FileNotFoundError(f"é…ç½®æ–‡ä»¶ä¸å­˜åœ¨: {config_path}")
        
        # è¯»å–é…ç½®æ–‡ä»¶
        config.read(config_path, encoding='utf-8')
        
        # è§£æé…ç½®
        parsed_config = {}
        for section in config.sections():
            parsed_config[section] = dict(config[section])
        
        return parsed_config
        
    except FileNotFoundError as e:
        print(e)
        return None
    except configparser.Error as e:
        print(f"é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯: {e}")
        return None
    except Exception as e:
        print(f"è¯»å–é…ç½®æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: {e}")
        return None

def write_config_file(config_path, config_dict):
    """å†™å…¥é…ç½®æ–‡ä»¶"""
    try:
        config = configparser.ConfigParser()
        
        # æ·»åŠ é…ç½®
        for section, options in config_dict.items():
            config[section] = options
        
        # å†™å…¥æ–‡ä»¶
        with open(config_path, 'w', encoding='utf-8') as file:
            config.write(file)
        
        print(f"é…ç½®æ–‡ä»¶å·²ä¿å­˜: {config_path}")
        return True
        
    except Exception as e:
        print(f"å†™å…¥é…ç½®æ–‡ä»¶æ—¶å‘ç”Ÿé”™è¯¯: {e}")
        return False

# ä½¿ç”¨ç¤ºä¾‹
config = {
    'database': {
        'host': 'localhost',
        'port': '5432',
        'name': 'mydb'
    },
    'logging': {
        'level': 'INFO',
        'file': 'app.log'
    }
}

write_config_file('config.ini', config)
parsed = read_config_file('config.ini')
print(parsed)
```

## ğŸ’¡ æœ€ä½³å®è·µ

### æ–‡ä»¶æ“ä½œå»ºè®®
- âœ… **ä½¿ç”¨withè¯­å¥**ï¼šè‡ªåŠ¨å¤„ç†æ–‡ä»¶å…³é—­
- âœ… **æŒ‡å®šç¼–ç **ï¼šæ˜ç¡®æŒ‡å®šæ–‡ä»¶ç¼–ç ï¼ˆutf-8ï¼‰
- âœ… **å¤„ç†å¤§æ–‡ä»¶**ï¼šä½¿ç”¨ç”Ÿæˆå™¨é€è¡Œæˆ–åˆ†å—å¤„ç†
- âŒ **å¿˜è®°å…³é—­æ–‡ä»¶**ï¼šé¿å…èµ„æºæ³„æ¼

### å¼‚å¸¸å¤„ç†å»ºè®®
- âœ… **æ•è·å…·ä½“å¼‚å¸¸**ï¼šä¸è¦æ•è·è¿‡äºå®½æ³›çš„å¼‚å¸¸
- âœ… **é€‚å½“çš„å¼‚å¸¸å¤„ç†**ï¼šæœ‰æ„ä¹‰çš„é”™è¯¯æ¶ˆæ¯å’Œæ¢å¤ç­–ç•¥
- âœ… **ä½¿ç”¨finally**ï¼šç¡®ä¿èµ„æºé‡Šæ”¾
- âŒ **å¿½ç•¥å¼‚å¸¸**ï¼šä¸è¦ç©ºexceptå—

### æ€§èƒ½ä¼˜åŒ–
- âœ… **æ‰¹é‡æ“ä½œ**ï¼šå‡å°‘I/Oæ“ä½œæ¬¡æ•°
- âœ… **ç¼“å†²åŒºè®¾ç½®**ï¼šé€‚å½“è°ƒæ•´è¯»å†™ç¼“å†²åŒº
- âœ… **ä½¿ç”¨ç”Ÿæˆå™¨**ï¼šå¤„ç†å¤§æ–‡ä»¶æ—¶èŠ‚çœå†…å­˜

## ğŸ”— ç›¸å…³èµ„æº

- [[åŸºç¡€è¯­æ³•ä¸æ•°æ®ç±»å‹]] - åŸºç¡€æ•°æ®ç»“æ„
- [[æ§åˆ¶æµä¸å‡½æ•°]] - æµç¨‹æ§åˆ¶
- [[å‡½æ•°é«˜çº§ç‰¹æ€§]] - ä¸Šä¸‹æ–‡ç®¡ç†å™¨
- [[æ¨¡å—ä¸åŒ…ç®¡ç†]] - æ ‡å‡†åº“ä½¿ç”¨

---
*åˆ›å»ºæ—¶é—´: 2026-02-01*  
*åˆ†ç±»: 3 Resources*
