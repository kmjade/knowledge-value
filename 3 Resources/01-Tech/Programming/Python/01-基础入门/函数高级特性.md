---
title: å‡½æ•°é«˜çº§ç‰¹æ€§
status: active
priority: high
tags: [resource/tech/programming/python, python/advanced-functions, python/decorators]
aliases: [Pythoné«˜çº§å‡½æ•°, Pythonè£…é¥°å™¨]
created: 2026-02-01
---

# å‡½æ•°é«˜çº§ç‰¹æ€§

> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡Pythonå‡½æ•°çš„é«˜çº§ç‰¹æ€§ï¼ŒåŒ…æ‹¬è£…é¥°å™¨ã€ç”Ÿæˆå™¨ã€é—­åŒ…å’Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œæå‡ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

## ğŸ“š é«˜çº§ç‰¹æ€§æ¦‚è¿°

### Pythonå‡½æ•°é«˜çº§ç‰¹æ€§æ ‘
```mermaid
graph TB
    A[Pythonå‡½æ•°é«˜çº§ç‰¹æ€§] --> B[è£…é¥°å™¨ Decorators]
    A --> C[ç”Ÿæˆå™¨ Generators]
    A --> D[é—­åŒ… Closures]
    A --> E[å‡½æ•°å¼ç¼–ç¨‹]
    
    B --> B1[å‡½æ•°è£…é¥°å™¨]
    B --> B2[ç±»è£…é¥°å™¨]
    B --> B3[å‚æ•°åŒ–è£…é¥°å™¨]
    
    C --> C1[yieldç”Ÿæˆå™¨]
    C --> C2[ç”Ÿæˆå™¨è¡¨è¾¾å¼]
    C --> C3[åç¨‹ Coroutine]
    
    D --> D1[å˜é‡æ•è·]
    D --> D2[å»¶è¿Ÿæ±‚å€¼]
    D --> D3[çŠ¶æ€ä¿æŒ]
    
    E --> E1[é«˜é˜¶å‡½æ•°]
    E --> E2[lambdaè¡¨è¾¾å¼]
    E --> E3[map/filter/reduce]
```

## ğŸ¨ è£…é¥°å™¨ï¼ˆDecoratorsï¼‰

### è£…é¥°å™¨åŸºç¡€æ¦‚å¿µ

#### ä»€ä¹ˆæ˜¯è£…é¥°å™¨
```python
# è£…é¥°å™¨æœ¬è´¨ï¼šæ¥å—å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ–°å‡½æ•°
def simple_decorator(func):
    """ç®€å•è£…é¥°å™¨"""
    def wrapper():
        print("è£…é¥°å™¨ï¼šå‡½æ•°è°ƒç”¨å‰")
        result = func()
        print("è£…é¥°å™¨ï¼šå‡½æ•°è°ƒç”¨å")
        return result
    return wrapper

@simple_decorator
def say_hello():
    print("Hello, World!")

# ç­‰ä»·äºï¼šsay_hello = simple_decorator(say_hello)
say_hello()

# è¾“å‡ºï¼š
# è£…é¥°å™¨ï¼šå‡½æ•°è°ƒç”¨å‰
# Hello, World!
# è£…é¥°å™¨ï¼šå‡½æ•°è°ƒç”¨å
```

#### è£…é¥°å™¨ä¿æŒå‡½æ•°å…ƒä¿¡æ¯
```python
from functools import wraps

def my_decorator(func):
    @wraps(func)  # ä¿ç•™åŸå‡½æ•°çš„å…ƒä¿¡æ¯
    def wrapper(*args, **kwargs):
        """åŒ…è£…å‡½æ•°çš„æ–‡æ¡£"""
        print(f"è°ƒç”¨å‡½æ•°: {func.__name__}")
        return func(*args, **kwargs)
    return wrapper

@my_decorator
def add(a, b):
    """è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ"""
    return a + b

print(add.__name__)    # è¾“å‡º: addï¼ˆè€Œä¸æ˜¯wrapperï¼‰
print(add.__doc__)     # è¾“å‡º: è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
```

### å¸¸ç”¨è£…é¥°å™¨æ¨¡å¼

#### è®¡æ—¶è£…é¥°å™¨
```python
import time
from functools import wraps

def timer_decorator(func):
    """è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´çš„è£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        execution_time = end_time - start_time
        print(f"å‡½æ•° {func.__name__} æ‰§è¡Œæ—¶é—´: {execution_time:.4f}ç§’")
        return result
    return wrapper

@timer_decorator
def slow_function():
    """æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ"""
    time.sleep(1)
    return "å®Œæˆ"

slow_function()
# è¾“å‡ºï¼šå‡½æ•° slow_function æ‰§è¡Œæ—¶é—´: 1.0002ç§’
```

#### æ—¥å¿—è£…é¥°å™¨
```python
def log_decorator(func):
    """è®°å½•å‡½æ•°è°ƒç”¨æ—¥å¿—çš„è£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"è°ƒç”¨å‡½æ•°: {func.__name__}")
        print(f"å‚æ•°: args={args}, kwargs={kwargs}")
        try:
            result = func(*args, **kwargs)
            print(f"è¿”å›å€¼: {result}")
            return result
        except Exception as e:
            print(f"å¼‚å¸¸: {e}")
            raise
    return wrapper

@log_decorator
def divide(a, b):
    """é™¤æ³•è¿ç®—"""
    return a / b

divide(10, 2)
divide(10, 0)  # ä¼šè®°å½•å¼‚å¸¸ä¿¡æ¯
```

#### ç¼“å­˜è£…é¥°å™¨
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def fibonacci(n):
    """è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆå¸¦ç¼“å­˜ï¼‰"""
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)

# ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè®¡ç®—
print(fibonacci(10))  # 55
# ç¬¬äºŒæ¬¡è°ƒç”¨ç›´æ¥ä»ç¼“å­˜è·å–ï¼ˆéå¸¸å¿«ï¼‰
print(fibonacci(10))  # 55

# æŸ¥çœ‹ç¼“å­˜ä¿¡æ¯
print(fibonacci.cache_info())
# CacheInfo(hits=1, misses=11, maxsize=128, currsize=11)

# æ¸…é™¤ç¼“å­˜
fibonacci.cache_clear()
```

#### æƒé™éªŒè¯è£…é¥°å™¨
```python
def require_permission(permission):
    """å‚æ•°åŒ–è£…é¥°å™¨ï¼šæ£€æŸ¥ç”¨æˆ·æƒé™"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # æ¨¡æ‹Ÿæƒé™æ£€æŸ¥
            user_permissions = kwargs.get('permissions', [])
            if permission in user_permissions:
                return func(*args, **kwargs)
            else:
                raise PermissionError(f"ç¼ºå°‘æƒé™: {permission}")
        return wrapper
    return decorator

@require_permission('admin')
def delete_user(user_id, permissions=[]):
    """åˆ é™¤ç”¨æˆ·"""
    print(f"åˆ é™¤ç”¨æˆ· {user_id}")
    return True

# æ­£ç¡®è°ƒç”¨
delete_user(123, permissions=['admin'])

# é”™è¯¯è°ƒç”¨ï¼ˆä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
# delete_user(123, permissions=['user'])
```

### é«˜çº§è£…é¥°å™¨æŠ€æœ¯

#### ç±»è£…é¥°å™¨
```python
class CountCalls:
    """ç±»è£…é¥°å™¨ï¼šç»Ÿè®¡å‡½æ•°è°ƒç”¨æ¬¡æ•°"""
    def __init__(self, func):
        self.func = func
        self.count = 0
    
    def __call__(self, *args, **kwargs):
        self.count += 1
        print(f"å‡½æ•° {self.func.__name__} è°ƒç”¨æ¬¡æ•°: {self.count}")
        return self.func(*args, **kwargs)

@CountCalls
def greet(name):
    """æ‰“æ‹›å‘¼"""
    return f"Hello, {name}!"

greet("Alice")  # è°ƒç”¨æ¬¡æ•°: 1
greet("Bob")    # è°ƒç”¨æ¬¡æ•°: 2
```

#### å¤šå±‚è£…é¥°å™¨
```python
def decorator1(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print("è£…é¥°å™¨1ï¼šå‰")
        result = func(*args, **kwargs)
        print("è£…é¥°å™¨1ï¼šå")
        return result
    return wrapper

def decorator2(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print("è£…é¥°å™¨2ï¼šå‰")
        result = func(*args, **kwargs)
        print("è£…é¥°å™¨2ï¼šå")
        return result
    return wrapper

@decorator1
@decorator2
def hello():
    print("Hello, World!")

hello()

# æ‰§è¡Œé¡ºåºï¼š
# è£…é¥°å™¨1ï¼šå‰
# è£…é¥°å™¨2ï¼šå‰
# Hello, World!
# è£…é¥°å™¨2ï¼šå
# è£…é¥°å™¨1ï¼šå
```

#### å¸¦å‚æ•°çš„è£…é¥°å™¨
```python
def repeat(times):
    """é‡å¤æ‰§è¡Œå‡½æ•°å¤šæ¬¡"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            results = []
            for _ in range(times):
                result = func(*args, **kwargs)
                results.append(result)
            return results
        return wrapper
    return decorator

@repeat(times=3)
def roll_dice():
    """æ·éª°å­"""
    import random
    return random.randint(1, 6)

print(roll_dice())  # ä¾‹å¦‚: [4, 2, 6]
```

## ğŸ” ç”Ÿæˆå™¨ï¼ˆGeneratorsï¼‰

### ç”Ÿæˆå™¨åŸºç¡€

#### yieldå…³é”®å­—åŸºç¡€
```python
def simple_generator():
    """ç®€å•ç”Ÿæˆå™¨"""
    yield 1
    yield 2
    yield 3

# åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡
gen = simple_generator()

# æ‰‹åŠ¨è·å–å€¼
print(next(gen))  # 1
print(next(gen))  # 2
print(next(gen))  # 3

# éå†ç”Ÿæˆå™¨
gen = simple_generator()
for value in gen:
    print(value)

# è½¬æ¢ä¸ºåˆ—è¡¨
values = list(simple_generator())
print(values)  # [1, 2, 3]
```

#### ç”Ÿæˆå™¨ä¸åˆ—è¡¨å¯¹æ¯”
```python
# åˆ—è¡¨ï¼šä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰æ•°æ®ï¼Œå ç”¨å†…å­˜
def create_list(n):
    """åˆ›å»ºåˆ—è¡¨"""
    result = []
    for i in range(n):
        result.append(i ** 2)
    return result

large_list = create_list(1000000)  # å ç”¨å¤§é‡å†…å­˜

# ç”Ÿæˆå™¨ï¼šæƒ°æ€§æ±‚å€¼ï¼ŒèŠ‚çœå†…å­˜
def create_generator(n):
    """åˆ›å»ºç”Ÿæˆå™¨"""
    for i in range(n):
        yield i ** 2

large_gen = create_generator(1000000)  # å‡ ä¹ä¸å ç”¨å†…å­˜
print(next(large_gen))  # 0
print(next(large_gen))  # 1
```

### ç”Ÿæˆå™¨åº”ç”¨åœºæ™¯

#### æ— é™åºåˆ—ç”Ÿæˆ
```python
def fibonacci_generator():
    """æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨"""
    a, b = 0, 1
    while True:
        yield a
        a, b = b, a + b

# åªç”Ÿæˆå‰10ä¸ªæ–æ³¢é‚£å¥‘æ•°
fib_gen = fibonacci_generator()
for _ in range(10):
    print(next(fib_gen), end=" ")  # 0 1 1 2 3 5 8 13 21 34
```

#### æ•°æ®æµå¤„ç†
```python
def process_data(data_stream):
    """å¤„ç†æ•°æ®æµçš„ç”Ÿæˆå™¨"""
    for item in data_stream:
        # æ•°æ®æ¸…æ´—
        if item is None:
            continue
        
        # æ•°æ®è½¬æ¢
        processed = item * 2
        
        # æ•°æ®è¿‡æ»¤
        if processed > 100:
            yield processed

# æ¨¡æ‹Ÿæ•°æ®æµ
data = [10, 20, None, 30, 40, 50, None, 60]

# ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†
for processed_data in process_data(data):
    print(processed_data)
```

#### æ–‡ä»¶è¯»å–ç”Ÿæˆå™¨
```python
def read_large_file(file_path, chunk_size=1024):
    """é€å—è¯»å–å¤§æ–‡ä»¶"""
    with open(file_path, 'r', encoding='utf-8') as file:
        while True:
            chunk = file.read(chunk_size)
            if not chunk:
                break
            yield chunk

# é€è¡Œè¯»å–æ–‡ä»¶
def read_lines(file_path):
    """é€è¡Œè¯»å–æ–‡ä»¶"""
    with open(file_path, 'r', encoding='utf-8') as file:
        for line in file:
            yield line.strip()

# ä½¿ç”¨ç¤ºä¾‹
for line in read_lines('data.txt'):
    print(line)
```

### ç”Ÿæˆå™¨è¡¨è¾¾å¼

#### åŸºæœ¬ç”Ÿæˆå™¨è¡¨è¾¾å¼
```python
# åˆ—è¡¨æ¨å¯¼å¼ï¼šåˆ›å»ºåˆ—è¡¨
squares = [x**2 for x in range(10)]
print(squares)  # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]

# ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼šåˆ›å»ºç”Ÿæˆå™¨
squares_gen = (x**2 for x in range(10))
print(list(squares_gen))  # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]

# å†…å­˜ä½¿ç”¨å¯¹æ¯”
import sys

# åˆ—è¡¨å ç”¨å†…å­˜
list_obj = [x**2 for x in range(1000000)]
print(f"åˆ—è¡¨å†…å­˜: {sys.getsizeof(list_obj)} bytes")

# ç”Ÿæˆå™¨å ç”¨å†…å­˜
gen_obj = (x**2 for x in range(1000000))
print(f"ç”Ÿæˆå™¨å†…å­˜: {sys.getsizeof(gen_obj)} bytes")  # å°å¾—å¤š
```

#### å¤æ‚ç”Ÿæˆå™¨è¡¨è¾¾å¼
```python
# å¸¦æ¡ä»¶çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼
even_numbers = (x for x in range(20) if x % 2 == 0)
print(list(even_numbers))  # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

# åµŒå¥—ç”Ÿæˆå™¨è¡¨è¾¾å¼
matrix_gen = ((i*j for j in range(3)) for i in range(3))
for row in matrix_gen:
    print(list(row))
# [0, 0, 0]
# [0, 1, 2]
# [0, 2, 4]

# ç”Ÿæˆå™¨é“¾å¼å¤„ç†
numbers = range(1, 21)

# é“¾å¼å¤„ç†ï¼šç­›é€‰ -> æ˜ å°„ -> è¿‡æ»¤
result = (
    x**2                    # å¹³æ–¹
    for x in numbers
    if x % 2 == 1           # åªå¤„ç†å¥‡æ•°
)
result = (
    x*2                     # å†ä¹˜ä»¥2
    for x in result
    if x < 200              # è¿‡æ»¤å¤§æ•°
)

print(list(result))  # [2, 18, 50, 98, 162]
```

### åç¨‹ï¼ˆCoroutinesï¼‰

#### åç¨‹åŸºç¡€
```python
def simple_coroutine():
    """ç®€å•åç¨‹"""
    print("åç¨‹å¼€å§‹")
    value = yield
    print(f"æ¥æ”¶åˆ°: {value}")
    print("åç¨‹ç»“æŸ")

# åˆ›å»ºåç¨‹
coro = simple_coroutine()

# æ¿€æ´»åç¨‹
next(coro)  # åç¨‹å¼€å§‹

# å‘é€å€¼åˆ°åç¨‹
coro.send("Hello")  # æ¥æ”¶åˆ°: Helloï¼Œåç¨‹ç»“æŸ
```

#### ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼
```python
def consumer():
    """æ¶ˆè´¹è€…åç¨‹"""
    print("æ¶ˆè´¹è€…ç­‰å¾…æ•°æ®...")
    try:
        while True:
            item = yield
            print(f"æ¶ˆè´¹è€…å¤„ç†: {item}")
    except GeneratorExit:
        print("æ¶ˆè´¹è€…å…³é—­")

def producer(consumer_coroutine):
    """ç”Ÿäº§è€…"""
    for i in range(5):
        print(f"ç”Ÿäº§è€…å‘é€: {i}")
        consumer_coroutine.send(i)
    
    # å…³é—­æ¶ˆè´¹è€…
    consumer_coroutine.close()

# åˆ›å»ºå¹¶æ¿€æ´»æ¶ˆè´¹è€…
consumer_coro = consumer()
next(consumer_coro)

# å¯åŠ¨ç”Ÿäº§è€…
producer(consumer_coro)
```

## ğŸ”„ é—­åŒ…ï¼ˆClosuresï¼‰

### é—­åŒ…åŸºç¡€

#### é—­åŒ…å®šä¹‰
```python
def make_multiplier(factor):
    """åˆ›å»ºä¹˜æ³•å™¨çš„å·¥å‚å‡½æ•°"""
    def multiply(number):
        return number * factor
    return multiply

# åˆ›å»ºä¸åŒçš„ä¹˜æ³•å™¨
double = make_multiplier(2)
triple = make_multiplier(3)

print(double(5))   # 10
print(triple(5))   # 15

# æŸ¥çœ‹é—­åŒ…å˜é‡
print(double.__closure__[0].cell_contents)  # 2
```

#### é—­åŒ…ä¿æŒçŠ¶æ€
```python
def counter():
    """è®¡æ•°å™¨é—­åŒ…"""
    count = 0
    
    def increment():
        nonlocal count  # å£°æ˜ä½¿ç”¨å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡
        count += 1
        return count
    
    return increment

# åˆ›å»ºç‹¬ç«‹çš„è®¡æ•°å™¨
counter1 = counter()
counter2 = counter()

print(counter1())  # 1
print(counter1())  # 2
print(counter2())  # 1
print(counter1())  # 3
```

### é—­åŒ…åº”ç”¨åœºæ™¯

#### æ•°æ®å°è£…
```python
def make_account(balance):
    """é“¶è¡Œè´¦æˆ·é—­åŒ…"""
    def deposit(amount):
        nonlocal balance
        balance += amount
        return balance
    
    def withdraw(amount):
        nonlocal balance
        if amount <= balance:
            balance -= amount
            return balance
        else:
            raise ValueError("ä½™é¢ä¸è¶³")
    
    def get_balance():
        return balance
    
    return {
        'deposit': deposit,
        'withdraw': withdraw,
        'get_balance': get_balance
    }

# åˆ›å»ºè´¦æˆ·
account = make_account(1000)
print(account['get_balance']())  # 1000

account['deposit'](500)
print(account['get_balance']())  # 1500

account['withdraw'](200)
print(account['get_balance']())  # 1300
```

#### å»¶è¿Ÿè®¡ç®—
```python
def lazy_evaluation(expensive_func):
    """å»¶è¿Ÿè®¡ç®—é—­åŒ…"""
    cached_value = None
    computed = False
    
    def wrapper():
        nonlocal cached_value, computed
        if not computed:
            cached_value = expensive_func()
            computed = True
        return cached_value
    
    return wrapper

# æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—
def expensive_computation():
    print("æ‰§è¡Œè€—æ—¶è®¡ç®—...")
    import time
    time.sleep(1)
    return "è®¡ç®—ç»“æœ"

# åˆ›å»ºå»¶è¿Ÿè®¡ç®—å‡½æ•°
lazy_func = lazy_evaluation(expensive_computation)

# ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šæ‰§è¡Œè®¡ç®—
print(lazy_func())  # æ‰§è¡Œè€—æ—¶è®¡ç®—...ï¼Œè®¡ç®—ç»“æœ

# ç¬¬äºŒæ¬¡è°ƒç”¨ç›´æ¥è¿”å›ç¼“å­˜ç»“æœ
print(lazy_func())  # è®¡ç®—ç»“æœï¼ˆä¸ä¼šæ‰“å°ï¼‰
```

## âš¡ å‡½æ•°å¼ç¼–ç¨‹

### é«˜é˜¶å‡½æ•°

#### mapå‡½æ•°
```python
# mapï¼šå¯¹åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°
numbers = [1, 2, 3, 4, 5]

# ä½¿ç”¨mapå¹³æ–¹æ¯ä¸ªæ•°
squared = list(map(lambda x: x**2, numbers))
print(squared)  # [1, 4, 9, 16, 25]

# ä½¿ç”¨å¤šä¸ªåºåˆ—
names = ["Alice", "Bob", "Charlie"]
ages = [25, 30, 35]
person_info = list(map(lambda n, a: f"{n}: {a}", names, ages))
print(person_info)  # ['Alice: 25', 'Bob: 30', 'Charlie: 35']
```

#### filterå‡½æ•°
```python
# filterï¼šè¿‡æ»¤åºåˆ—ä¸­çš„å…ƒç´ 
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# ç­›é€‰å¶æ•°
even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(even_numbers)  # [2, 4, 6, 8, 10]

# ç­›é€‰å¤§äº5çš„æ•°
greater_than_5 = list(filter(lambda x: x > 5, numbers))
print(greater_than_5)  # [6, 7, 8, 9, 10]
```

#### reduceå‡½æ•°
```python
from functools import reduce

# reduceï¼šå¯¹åºåˆ—è¿›è¡Œç´¯è®¡æ“ä½œ
numbers = [1, 2, 3, 4, 5]

# è®¡ç®—ä¹˜ç§¯
product = reduce(lambda x, y: x * y, numbers)
print(product)  # 120

# è®¡ç®—æœ€å¤§å€¼
maximum = reduce(lambda x, y: x if x > y else y, numbers)
print(maximum)  # 5

# å­—ç¬¦ä¸²è¿æ¥
words = ["Hello", "World", "Python"]
sentence = reduce(lambda x, y: f"{x} {y}", words)
print(sentence)  # Hello World Python
```

### lambdaè¡¨è¾¾å¼

#### lambdaåŸºç¡€
```python
# lambdaï¼šåŒ¿åå‡½æ•°
add = lambda x, y: x + y
print(add(3, 5))  # 8

# å¤šå‚æ•°lambda
power = lambda base, exponent=2: base ** exponent
print(power(3))     # 9
print(power(3, 3))  # 27

# å¤æ‚lambda
complex_func = lambda x: x**2 if x > 0 else x**3
print(complex_func(5))   # 25
print(complex_func(-5))  # -125
```

#### lambdaä¸é«˜é˜¶å‡½æ•°ç»“åˆ
```python
# æ’åº
students = [
    {"name": "Alice", "age": 25},
    {"name": "Bob", "age": 30},
    {"name": "Charlie", "age": 20}
]

# æŒ‰å¹´é¾„æ’åº
sorted_by_age = sorted(students, key=lambda x: x['age'])
print(sorted_by_age)

# æŒ‰åå­—é•¿åº¦æ’åº
sorted_by_name_length = sorted(students, key=lambda x: len(x['name']))
print(sorted_by_name_length)
```

### å‡½æ•°å¼ç¼–ç¨‹å®æˆ˜

#### æ•°æ®å¤„ç†ç®¡é“
```python
def process_data_pipeline(data):
    """æ•°æ®å¤„ç†ç®¡é“"""
    # 1. è¿‡æ»¤ç©ºå€¼
    filtered = filter(lambda x: x is not None, data)
    
    # 2. è½¬æ¢ä¸ºå¤§å†™
    uppercased = map(str.upper, filtered)
    
    # 3. è¿‡æ»¤çŸ­å­—ç¬¦ä¸²
    filtered_length = filter(lambda x: len(x) > 5, uppercased)
    
    # 4. è½¬æ¢ä¸ºåˆ—è¡¨
    return list(filtered_length)

data = ["hello", "world", None, "python", "hi", "programming"]
result = process_data_pipeline(data)
print(result)  # ['HELLO', 'WORLD', 'PYTHON', 'PROGRAMMING']
```

#### å‡½æ•°ç»„åˆ
```python
def compose(*functions):
    """å‡½æ•°ç»„åˆï¼šå°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ª"""
    def composed(x):
        for func in reversed(functions):
            x = func(x)
        return x
    return composed

# å®šä¹‰ç®€å•å‡½æ•°
add_one = lambda x: x + 1
multiply_by_two = lambda x: x * 2
subtract_five = lambda x: x - 5

# ç»„åˆå‡½æ•°
complex_operation = compose(subtract_five, multiply_by_two, add_one)
result = complex_operation(10)
# æ‰§è¡Œé¡ºåº: add_one(10) -> 11 -> multiply_by_two(11) -> 22 -> subtract_five(22) -> 17
print(result)  # 17
```

## ğŸ¯ å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šæ€§èƒ½åˆ†æè£…é¥°å™¨
```python
import time
from functools import wraps

def performance_analysis(func):
    """æ€§èƒ½åˆ†æè£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        call_count = wrapper.call_count
        wrapper.call_count += 1
        
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        
        execution_time = end_time - start_time
        
        print(f"å‡½æ•°: {func.__name__}")
        print(f"è°ƒç”¨æ¬¡æ•°: {call_count}")
        print(f"æ‰§è¡Œæ—¶é—´: {execution_time:.6f}ç§’")
        
        return result
    
    wrapper.call_count = 1
    return wrapper

@performance_analysis
def factorial(n):
    """è®¡ç®—é˜¶ä¹˜"""
    if n <= 1:
        return 1
    return n * factorial(n - 1)

# æµ‹è¯•
print(factorial(5))   # 120
print(factorial(10))  # 3628800
```

### ç»ƒä¹ 2ï¼šæ•°æ®æµç”Ÿæˆå™¨
```python
def temperature_data_generator(start_temp, days=30):
    """ç”Ÿæˆæ¸©åº¦æ•°æ®"""
    temp = start_temp
    for day in range(days):
        # æ¨¡æ‹Ÿæ¸©åº¦æ³¢åŠ¨
        import random
        change = random.uniform(-3, 3)
        temp += change
        temp = max(-20, min(40, temp))  # é™åˆ¶åœ¨-20åˆ°40åº¦ä¹‹é—´
        yield {
            'day': day + 1,
            'temperature': round(temp, 1)
        }

def analyze_temperature(temperature_gen):
    """åˆ†ææ¸©åº¦æ•°æ®"""
    temps = [data['temperature'] for data in temperature_gen]
    
    analysis = {
        'average': round(sum(temps) / len(temps), 1),
        'max': max(temps),
        'min': min(temps),
        'days': len(temps)
    }
    
    return analysis

# ä½¿ç”¨ç¤ºä¾‹
temp_gen = temperature_data_generator(20, days=30)
analysis = analyze_temperature(temp_gen)
print(analysis)
```

### ç»ƒä¹ 3ï¼šç¼“å­˜è£…é¥°å™¨å®ç°
```python
from functools import wraps

def memoize(max_size=128):
    """è‡ªå®šä¹‰ç¼“å­˜è£…é¥°å™¨"""
    def decorator(func):
        cache = {}
        
        @wraps(func)
        def wrapper(*args, **kwargs):
            # åˆ›å»ºç¼“å­˜é”®
            cache_key = (args, frozenset(kwargs.items()))
            
            # æ£€æŸ¥ç¼“å­˜
            if cache_key in cache:
                return cache[cache_key]
            
            # æ‰§è¡Œå‡½æ•°å¹¶ç¼“å­˜ç»“æœ
            result = func(*args, **kwargs)
            
            # æ£€æŸ¥ç¼“å­˜å¤§å°
            if len(cache) >= max_size:
                # ç®€å•çš„LRUç­–ç•¥ï¼šç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ 
                cache.pop(next(iter(cache)))
            
            cache[cache_key] = result
            return result
        
        wrapper.cache = cache
        return wrapper
    return decorator

@memoize(max_size=10)
def expensive_function(n):
    """æ¨¡æ‹Ÿè€—æ—¶å‡½æ•°"""
    import time
    time.sleep(0.1)  # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    return n ** 2

# æµ‹è¯•ç¼“å­˜
print(expensive_function(5))  # ç¬¬ä¸€æ¬¡ï¼šæ…¢
print(expensive_function(5))  # ç¬¬äºŒæ¬¡ï¼šå¿«ï¼ˆä»ç¼“å­˜è·å–ï¼‰
print(expensive_function.cache)  # æŸ¥çœ‹ç¼“å­˜å†…å®¹
```

## ğŸ’¡ æœ€ä½³å®è·µ

### è£…é¥°å™¨ä½¿ç”¨å»ºè®®
- âœ… **ä¿ç•™å‡½æ•°å…ƒä¿¡æ¯**ï¼šä½¿ç”¨ `@wraps(func)` ä¿æŒåŸå‡½æ•°ä¿¡æ¯
- âœ… **æ–‡æ¡£å­—ç¬¦ä¸²**ï¼šä¸ºè£…é¥°å™¨æ·»åŠ æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜
- âœ… **å‚æ•°éªŒè¯**ï¼šåœ¨è£…é¥°å™¨ä¸­éªŒè¯å‚æ•°çš„æœ‰æ•ˆæ€§
- âŒ **é¿å…è¿‡åº¦åµŒå¥—**ï¼šä¸è¦ä½¿ç”¨å¤ªå¤šå±‚è£…é¥°å™¨

### ç”Ÿæˆå™¨ä½¿ç”¨å»ºè®®
- âœ… **å¤„ç†å¤§æ•°æ®**ï¼šä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§æ–‡ä»¶æˆ–å¤§æ•°æ®é›†
- âœ… **å†…å­˜æ•ˆç‡**ï¼šåœ¨å†…å­˜æ•æ„Ÿçš„åº”ç”¨ä¸­ä½¿ç”¨ç”Ÿæˆå™¨
- âŒ **é¿å…è¿‡æ—©æ±‚å€¼**ï¼šä¸è¦è¿‡æ—©å°†ç”Ÿæˆå™¨è½¬æ¢ä¸ºåˆ—è¡¨

### é—­åŒ…ä½¿ç”¨å»ºè®®
- âœ… **æ•°æ®å°è£…**ï¼šä½¿ç”¨é—­åŒ…å°è£…ç›¸å…³æ•°æ®å’Œæ“ä½œ
- âœ… **çŠ¶æ€ä¿æŒ**ï¼šåœ¨éœ€è¦ä¿æŒçŠ¶æ€çš„åœºæ™¯ä¸­ä½¿ç”¨é—­åŒ…
- âŒ **æ³¨æ„å†…å­˜æ³„æ¼**ï¼šé¿å…åœ¨é—­åŒ…ä¸­æŒæœ‰å¤§é‡æ•°æ®

## ğŸ”— ç›¸å…³èµ„æº

- [[æ§åˆ¶æµä¸å‡½æ•°]] - å‡½æ•°åŸºç¡€çŸ¥è¯†
- [[é¢å‘å¯¹è±¡ç¼–ç¨‹]] - ç±»å’Œå¯¹è±¡
- [[æ¨¡å—ä¸åŒ…ç®¡ç†]] - ä»£ç ç»„ç»‡
- [[å¼‚æ­¥ç¼–ç¨‹]] - åç¨‹è¿›é˜¶

---
*åˆ›å»ºæ—¶é—´: 2026-02-01*  
*åˆ†ç±»: 3 Resources*
