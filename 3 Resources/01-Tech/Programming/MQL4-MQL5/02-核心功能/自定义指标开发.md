---
title: è‡ªå®šä¹‰æŒ‡æ ‡å¼€å‘
status: active
priority: high
tags: [resource/tech/programming/mql, mql4/indicators, mql4/custom-indicator]
aliases: [MQL4æŒ‡æ ‡å¼€å‘, è‡ªå®šä¹‰æŠ€æœ¯æŒ‡æ ‡]
created: 2026-02-01
---

# è‡ªå®šä¹‰æŒ‡æ ‡å¼€å‘

> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡è‡ªå®šä¹‰æŒ‡æ ‡çš„å¼€å‘æ–¹æ³•ï¼Œèƒ½å¤Ÿåˆ›å»ºå„ç§æŠ€æœ¯åˆ†ææŒ‡æ ‡å¹¶åœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºã€‚

## ğŸ“š æŒ‡æ ‡æ¦‚è¿°

### æŒ‡æ ‡åŸºæœ¬æ¦‚å¿µ
```mermaid
graph TB
    A[è‡ªå®šä¹‰æŒ‡æ ‡] --> B[ä¸»å›¾æŒ‡æ ‡]
    A --> C[å‰¯å›¾æŒ‡æ ‡]
    A --> D[æŒ‡æ ‡ç¼“å†²åŒº]
    
    B --> B1[ä»·æ ¼çº¿]
    B --> B2[ç§»åŠ¨å¹³å‡]
    B --> B3[è¶‹åŠ¿çº¿]
    
    C --> C1[æŒ¯è¡æŒ‡æ ‡]
    C --> C2[æˆäº¤é‡æŒ‡æ ‡]
    C --> C3[åŠ¨é‡æŒ‡æ ‡]
    
    D --> D1[æ•°æ®å­˜å‚¨]
    D --> D2[æ•°ç»„ç®¡ç†]
    D --> D3[ç»˜å›¾å±æ€§]
```

## ğŸ—ï¸ æŒ‡æ ‡ç»“æ„

### æŒ‡æ ‡åŸºæœ¬æ¡†æ¶

#### æŒ‡æ ‡æ¨¡æ¿
```mql4
//+------------------------------------------------------------------+
//|                                    MyFirstIndicator.mq4        |
//|                        Copyright 2026, Your Name                |
//|                                             https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright "2026, Your Name"
#property link      "https://www.mql5.com"
#property version   "1.00"
#property strict

// æŒ‡æ ‡å±æ€§
#property indicator_chart_window  // åœ¨ä¸»å›¾æ˜¾ç¤º
// #property indicator_separate_window  // åœ¨å‰¯å›¾æ˜¾ç¤º

#property indicator_buffers 1      // æŒ‡æ ‡ç¼“å†²åŒºæ•°é‡
#property indicator_plots   1      // ç»˜åˆ¶çº¿æ•°é‡

// æŒ‡æ ‡å‚æ•°
input int MAPeriod = 20;           // ç§»åŠ¨å¹³å‡å‘¨æœŸ

// æŒ‡æ ‡ç¼“å†²åŒº
double MABuffer[];

//+------------------------------------------------------------------+
//| Custom indicator initialization function                           |
//+------------------------------------------------------------------+
int OnInit()
  {
   // è®¾ç½®æŒ‡æ ‡ç¼“å†²åŒº
   SetIndexBuffer(0, MABuffer);
   
   // è®¾ç½®ç»˜åˆ¶æ ·å¼
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   
   // è®¾ç½®æŒ‡æ ‡æ ‡ç­¾
   IndicatorShortName("MA(" + IntegerToString(MAPeriod) + ")");
   SetIndexLabel(0, "MA(" + IntegerToString(MAPeriod) + ")");
   
   return(INIT_SUCCEEDED);
  }

//+------------------------------------------------------------------+
//| Custom indicator deinitialization function                         |
//+------------------------------------------------------------------+
void OnDeinit(const int reason)
  {
   // æ¸…ç†å›¾è¡¨å¯¹è±¡
   ObjectsDeleteAll(0, "MyFirstIndicator_");
   
   // æ¸…é™¤å›¾è¡¨æ–‡æœ¬
   Comment("");
  }

//+------------------------------------------------------------------+
//| Custom indicator iteration function                                |
//+------------------------------------------------------------------+
int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   // æ£€æŸ¥æ•°æ®æ˜¯å¦è¶³å¤Ÿ
   if(rates_total < MAPeriod)
      return(0);
   
   // è®¡ç®—å¼€å§‹ä½ç½®
   int start = prev_calculated;
   if(start == 0)
      start = MAPeriod - 1;
   
   // è®¡ç®—æŒ‡æ ‡å€¼
   for(int i = start; i < rates_total; i++)
     {
      double sum = 0.0;
      for(int j = 0; j < MAPeriod; j++)
        {
         sum += close[i - j];
        }
      MABuffer[i] = sum / MAPeriod;
     }
   
   return(rates_total);
  }
```

## ğŸ“Š æŒ‡æ ‡ç¼“å†²åŒº

### ç¼“å†²åŒºç®¡ç†

#### å¤šç¼“å†²åŒºæŒ‡æ ‡
```mql4
//+------------------------------------------------------------------+
//|                                    MultiLineIndicator.mq4     |
//+------------------------------------------------------------------+
#property copyright "2026, Your Name"
#property version   "1.00"
#property strict
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3

input int FastPeriod = 10;
input int SlowPeriod = 20;

// æŒ‡æ ‡ç¼“å†²åŒº
double FastMABuffer[];
double SlowMABuffer[];
double CrossBuffer[];

int OnInit()
  {
   // è®¾ç½®ç¼“å†²åŒº
   SetIndexBuffer(0, FastMABuffer);
   SetIndexBuffer(1, SlowMABuffer);
   SetIndexBuffer(2, CrossBuffer);
   
   // è®¾ç½®ç»˜åˆ¶æ ·å¼
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   SetIndexStyle(1, DRAW_LINE, STYLE_SOLID, 2, clrRed);
   SetIndexStyle(2, DRAW_ARROW, STYLE_SOLID, 2, clrGreen);
   
   // è®¾ç½®ç®­å¤´æ ·å¼
   SetIndexArrow(2, 233);
   
   // è®¾ç½®æ ‡ç­¾
   SetIndexLabel(0, "Fast MA(" + IntegerToString(FastPeriod) + ")");
   SetIndexLabel(1, "Slow MA(" + IntegerToString(SlowPeriod) + ")");
   SetIndexLabel(2, "Cross Signal");
   
   IndicatorShortName("MA Cross");
   
   return(INIT_SUCCEEDED);
  }

int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   if(rates_total < SlowPeriod)
      return(0);
   
   int start = prev_calculated;
   if(start == 0)
      start = SlowPeriod - 1;
   
   // è®¡ç®—å¿«é€ŸMA
   for(int i = start; i < rates_total; i++)
     {
      double sum = 0.0;
      for(int j = 0; j < FastPeriod; j++)
        {
         sum += close[i - j];
        }
      FastMABuffer[i] = sum / FastPeriod;
     }
   
   // è®¡ç®—æ…¢é€ŸMA
   for(int i = start; i < rates_total; i++)
     {
      double sum = 0.0;
      for(int j = 0; j < SlowPeriod; j++)
        {
         sum += close[i - j];
        }
      SlowMABuffer[i] = sum / SlowPeriod;
     }
   
   // ç»˜åˆ¶äº¤å‰ä¿¡å·
   for(int i = start + 1; i < rates_total; i++)
     {
      // é‡‘å‰
      if(FastMABuffer[i] > SlowMABuffer[i] && 
         FastMABuffer[i-1] <= SlowMABuffer[i-1])
        {
         CrossBuffer[i] = Low[i] - 10 * Point;
        }
      // æ­»å‰
      else if(FastMABuffer[i] < SlowMABuffer[i] && 
              FastMABuffer[i-1] >= SlowMABuffer[i-1])
        {
         CrossBuffer[i] = High[i] + 10 * Point;
        }
      else
        {
         CrossBuffer[i] = EMPTY_VALUE;
        }
     }
   
   return(rates_total);
  }
```

## ğŸ“ˆ ç»˜å›¾æ ·å¼

### å„ç§ç»˜åˆ¶æ–¹å¼

#### çº¿æ¡æ ·å¼
```mql4
// è®¾ç½®ä¸åŒçš„çº¿æ¡æ ·å¼
void SetupLineStyles()
  {
   // å®çº¿
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   
   // è™šçº¿
   SetIndexStyle(1, DRAW_LINE, STYLE_DASH, 2, clrRed);
   
   // ç‚¹çº¿
   SetIndexStyle(2, DRAW_LINE, STYLE_DOT, 2, clrGreen);
   
   // ç‚¹åˆ’çº¿
   SetIndexStyle(3, DRAW_LINE, STYLE_DASHDOT, 2, clrYellow);
  }
```

#### ç®­å¤´æ ·å¼
```mql4
// ä½¿ç”¨ç®­å¤´ç»˜åˆ¶ä¿¡å·
void SetupArrowIndicator()
  {
   // è®¾ç½®ç»˜åˆ¶æ–¹å¼ä¸ºç®­å¤´
   SetIndexStyle(0, DRAW_ARROW, STYLE_SOLID, 3, clrBlue);
   
   // è®¾ç½®ç®­å¤´ç±»å‹ï¼ˆ0-255ï¼‰
   SetIndexArrow(0, 233);  // 233=å‘ä¸Šç®­å¤´
   
   // è®¾ç½®æ ‡ç­¾
   SetIndexLabel(0, "Signal");
  }
```

#### æŸ±çŠ¶å›¾æ ·å¼
```mql4
// ç»˜åˆ¶æŸ±çŠ¶å›¾ï¼ˆå¦‚MACDæŸ±ï¼‰
void SetupHistogramIndicator()
  {
   // è®¾ç½®ä¸ºæŸ±çŠ¶å›¾
   SetIndexStyle(0, DRAW_HISTOGRAM, STYLE_SOLID, 2, clrBlue);
   SetIndexStyle(1, DRAW_HISTOGRAM, STYLE_SOLID, 2, clrRed);
   
   // è®¾ç½®ç©ºå€¼
   SetIndexEmptyValue(0, 0);
   SetIndexEmptyValue(1, 0);
  }
```

#### åŒºåŸŸå¡«å……
```mql4
// ç»˜åˆ¶å¡«å……åŒºåŸŸ
void SetupFillIndicator()
  {
   // è®¾ç½®ä¸¤ä¸ªçº¿ç”¨äºå¡«å……
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 1, clrBlue);
   SetIndexStyle(1, DRAW_LINE, STYLE_SOLID, 1, clrRed);
   
   // è®¾ç½®å¡«å……
   SetIndexFill(0, true);
   
   // è®¾ç½®å¡«å……é¢œè‰²
   SetIndexStyle(0, DRAW_FILLING, STYLE_SOLID, 1, clrBlue);
   SetIndexStyle(1, DRAW_FILLING, STYLE_SOLID, 1, clrRed);
  }
```

## ğŸ¯ å¸¸ç”¨æŒ‡æ ‡å®ç°

### ç§»åŠ¨å¹³å‡çº¿æŒ‡æ ‡

#### å¤šç§MAå®ç°
```mql4
//+------------------------------------------------------------------+
//|                                       MultiMAIndicator.mq4     |
//+------------------------------------------------------------------+
#property copyright "2026, Your Name"
#property version   "1.00"
#property strict
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3

input int MAPeriod = 14;
input int MAType = 0;        // 0=SMA, 1=EMA, 2=SMMA, 3=LWMA

double SMABuffer[];
double EMABuffer[];
double LWMABuffer[];

int OnInit()
  {
   SetIndexBuffer(0, SMABuffer);
   SetIndexBuffer(1, EMABuffer);
   SetIndexBuffer(2, LWMABuffer);
   
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   SetIndexStyle(1, DRAW_LINE, STYLE_SOLID, 2, clrRed);
   SetIndexStyle(2, DRAW_LINE, STYLE_SOLID, 2, clrGreen);
   
   SetIndexLabel(0, "SMA(" + IntegerToString(MAPeriod) + ")");
   SetIndexLabel(1, "EMA(" + IntegerToString(MAPeriod) + ")");
   SetIndexLabel(2, "LWMA(" + IntegerToString(MAPeriod) + ")");
   
   IndicatorShortName("Multiple MAs");
   
   return(INIT_SUCCEEDED);
  }

int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   if(rates_total < MAPeriod)
      return(0);
   
   int start = prev_calculated;
   if(start == 0)
      start = MAPeriod - 1;
   
   // SMA - ç®€å•ç§»åŠ¨å¹³å‡
   for(int i = start; i < rates_total; i++)
     {
      double sum = 0.0;
      for(int j = 0; j < MAPeriod; j++)
        {
         sum += close[i - j];
        }
      SMABuffer[i] = sum / MAPeriod;
     }
   
   // EMA - æŒ‡æ•°ç§»åŠ¨å¹³å‡
   double multiplier = 2.0 / (MAPeriod + 1.0);
   EMABuffer[start] = SMABuffer[start];  // åˆå§‹å€¼
   
   for(int i = start + 1; i < rates_total; i++)
     {
      EMABuffer[i] = (close[i] * multiplier) + (EMABuffer[i-1] * (1 - multiplier));
     }
   
   // LWMA - çº¿æ€§åŠ æƒç§»åŠ¨å¹³å‡
   for(int i = start; i < rates_total; i++)
     {
      double sum = 0.0;
      double weightSum = 0.0;
      
      for(int j = 0; j < MAPeriod; j++)
        {
         double weight = (MAPeriod - j);
         sum += close[i - j] * weight;
         weightSum += weight;
        }
      
      LWMABuffer[i] = sum / weightSum;
     }
   
   return(rates_total);
  }
```

### RSIæŒ‡æ ‡

#### ç›¸å¯¹å¼ºå¼±æŒ‡æ•°
```mql4
//+------------------------------------------------------------------+
//|                                           CustomRSI.mq4        |
//+------------------------------------------------------------------+
#property copyright "2026, Your Name"
#property version   "1.00"
#property strict
#property indicator_separate_window
#property indicator_buffers 3
#property indicator_plots   3

input int RSIPeriod = 14;
input int Overbought = 70;
input int Oversold = 30;

double RSIBuffer[];
double OverboughtBuffer[];
double OversoldBuffer[];

int OnInit()
  {
   SetIndexBuffer(0, RSIBuffer);
   SetIndexBuffer(1, OverboughtBuffer);
   SetIndexBuffer(2, OversoldBuffer);
   
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   SetIndexStyle(1, DRAW_LINE, STYLE_DOT, 1, clrRed);
   SetIndexStyle(2, DRAW_LINE, STYLE_DOT, 1, clrGreen);
   
   SetIndexLabel(0, "RSI(" + IntegerToString(RSIPeriod) + ")");
   SetIndexLabel(1, "Overbought (" + IntegerToString(Overbought) + ")");
   SetIndexLabel(2, "Oversold (" + IntegerToString(Oversold) + ")");
   
   // è®¾ç½®å›ºå®šçº§åˆ«
   SetLevelStyle(STYLE_SOLID, 1, clrSilver);
   SetLevelValue(0, Overbought);
   SetLevelValue(1, Oversold);
   
   IndicatorShortName("RSI(" + IntegerToString(RSIPeriod) + ")");
   IndicatorDigits(2);
   
   return(INIT_SUCCEEDED);
  }

int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   if(rates_total <= RSIPeriod)
      return(0);
   
   int start = prev_calculated;
   if(start == 0)
      start = RSIPeriod;
   
   // è®¡ç®—RSI
   for(int i = start; i < rates_total; i++)
     {
      double gains = 0;
      double losses = 0;
      
      // è®¡ç®—åˆå§‹å¹³å‡æ”¶ç›Šå’ŒæŸå¤±
      for(int j = i - RSIPeriod + 1; j <= i; j++)
        {
         double change = close[j] - close[j-1];
         if(change > 0)
            gains += change;
         else
            losses -= change;
        }
      
      double avgGain = gains / RSIPeriod;
      double avgLoss = losses / RSIPeriod;
      
      // è®¡ç®—RSI
      if(avgLoss == 0)
         RSIBuffer[i] = 100;
      else
        {
         double rs = avgGain / avgLoss;
         RSIBuffer[i] = 100 - (100 / (1 + rs));
        }
      
      // è®¾ç½®è¶…ä¹°è¶…å–çº§åˆ«
      OverboughtBuffer[i] = Overbought;
      OversoldBuffer[i] = Oversold;
     }
   
   return(rates_total);
  }
```

### å¸ƒæ—å¸¦æŒ‡æ ‡

#### å¸ƒæ—å¸¦å®ç°
```mql4
//+------------------------------------------------------------------+
//|                                       CustomBollinger.mq4     |
//+------------------------------------------------------------------+
#property copyright "2026, Your Name"
#property version   "1.00"
#property strict
#property indicator_chart_window
#property indicator_buffers 3
#property indicator_plots   3

input int BBPeriod = 20;
input double BBDeviations = 2.0;

double MABuffer[];
double UpperBand[];
double LowerBand[];

int OnInit()
  {
   SetIndexBuffer(0, MABuffer);
   SetIndexBuffer(1, UpperBand);
   SetIndexBuffer(2, LowerBand);
   
   SetIndexStyle(0, DRAW_LINE, STYLE_SOLID, 2, clrBlue);
   SetIndexStyle(1, DRAW_LINE, STYLE_SOLID, 1, clrRed);
   SetIndexStyle(2, DRAW_LINE, STYLE_SOLID, 1, clrRed);
   
   SetIndexLabel(0, "MA(" + IntegerToString(BBPeriod) + ")");
   SetIndexLabel(1, "Upper Band");
   SetIndexLabel(2, "Lower Band");
   
   IndicatorShortName("Bollinger Bands");
   
   return(INIT_SUCCEEDED);
  }

int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   if(rates_total < BBPeriod)
      return(0);
   
   int start = prev_calculated;
   if(start == 0)
      start = BBPeriod - 1;
   
   // è®¡ç®—ç§»åŠ¨å¹³å‡å’Œæ ‡å‡†å·®
   for(int i = start; i < rates_total; i++)
     {
      // è®¡ç®—ç§»åŠ¨å¹³å‡
      double sum = 0.0;
      for(int j = 0; j < BBPeriod; j++)
        {
         sum += close[i - j];
        }
      MABuffer[i] = sum / BBPeriod;
      
      // è®¡ç®—æ ‡å‡†å·®
      double variance = 0.0;
      for(int j = 0; j < BBPeriod; j++)
        {
         double diff = close[i - j] - MABuffer[i];
         variance += diff * diff;
        }
      double stdDev = MathSqrt(variance / BBPeriod);
      
      // è®¡ç®—ä¸Šä¸‹è½¨
      UpperBand[i] = MABuffer[i] + BBDeviations * stdDev;
      LowerBand[i] = MABuffer[i] - BBDeviations * stdDev;
     }
   
   return(rates_total);
  }
```

## ğŸ¨ å›¾è¡¨å¯¹è±¡

### åˆ›å»ºè‡ªå®šä¹‰å¯¹è±¡

#### ç»˜åˆ¶æ–‡æœ¬å’Œæ ‡ç­¾
```mql4
// åœ¨å›¾è¡¨ä¸Šç»˜åˆ¶æ–‡æœ¬
void DrawText(string name, string text, int x, int y, color clr = clrBlack)
  {
   if(ObjectFind(0, name) < 0)
     {
      ObjectCreate(0, name, OBJ_LABEL, 0, 0, 0);
     }
   
   ObjectSetString(0, name, OBJPROP_TEXT, text);
   ObjectSetInteger(0, name, OBJPROP_XDISTANCE, x);
   ObjectSetInteger(0, name, OBJPROP_YDISTANCE, y);
   ObjectSetInteger(0, name, OBJPROP_COLOR, clr);
   ObjectSetInteger(0, name, OBJPROP_FONTSIZE, 10);
   ObjectSetString(0, name, OBJPROP_FONT, "Arial");
  }

// ä½¿ç”¨ç¤ºä¾‹
void DisplayIndicatorInfo()
  {
   DrawText("IndicatorTitle", "è‡ªå®šä¹‰æŒ‡æ ‡", 10, 20, clrBlue);
   DrawText("CurrentTime", "æ—¶é—´: " + TimeToString(TimeCurrent()), 10, 40, clrBlack);
  }

void OnDeinit(const int reason)
  {
   ObjectsDeleteAll(0, "IndicatorTitle");
   ObjectsDeleteAll(0, "CurrentTime");
  }
```

#### ç»˜åˆ¶ä»·æ ¼çº¿
```mql4
// ç»˜åˆ¶æ°´å¹³ä»·æ ¼çº¿
void DrawHorizontalLine(string name, double price, color clr = clrBlue, int width = 1)
  {
   if(ObjectFind(0, name) < 0)
     {
      ObjectCreate(0, name, OBJ_HLINE, 0, 0, price);
     }
   else
     {
      ObjectSetDouble(0, name, OBJPROP_PRICE, price);
     }
   
   ObjectSetInteger(0, name, OBJPROP_COLOR, clr);
   ObjectSetInteger(0, name, OBJPROP_WIDTH, width);
   ObjectSetInteger(0, name, OBJPROP_STYLE, STYLE_SOLID);
  }

// ç»˜åˆ¶å‚ç›´æ—¶é—´çº¿
void DrawVerticalLine(string name, datetime time, color clr = clrBlue)
  {
   if(ObjectFind(0, name) < 0)
     {
      ObjectCreate(0, name, OBJ_VLINE, 0, time, 0);
     }
   else
     {
      ObjectSetInteger(0, name, OBJPROP_TIME, time);
     }
   
   ObjectSetInteger(0, name, OBJPROP_COLOR, clr);
   ObjectSetInteger(0, name, OBJPROP_WIDTH, 1);
   ObjectSetInteger(0, name, OBJPROP_STYLE, STYLE_DASH);
  }

// ä½¿ç”¨ç¤ºä¾‹
void DrawSupportResistance()
  {
   // ç»˜åˆ¶æ”¯æ’‘ä½å’Œé˜»åŠ›ä½
   double resistance = iHigh(_Symbol, PERIOD_CURRENT, 20);
   double support = iLow(_Symbol, PERIOD_CURRENT, 20);
   
   DrawHorizontalLine("Resistance", resistance, clrRed, 2);
   DrawHorizontalLine("Support", support, clrGreen, 2);
   
   // ç»˜åˆ¶å½“å‰æ—¶é—´çº¿
   DrawVerticalLine("CurrentTime", TimeCurrent(), clrBlue);
  }
```

## ğŸ¯ å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šè‡ªå®šä¹‰ä¿¡å·æŒ‡æ ‡

#### ä»»åŠ¡è¦æ±‚
```mql4
// åˆ›å»ºä¸€ä¸ªä¿¡å·æŒ‡æ ‡
// åŠŸèƒ½ï¼š
// 1. æ£€æµ‹RSIè¶…ä¹°è¶…å–
// 2. åœ¨è¶…ä¹°æ—¶æ˜¾ç¤ºå–å‡ºä¿¡å·
// 3. åœ¨è¶…å–æ—¶æ˜¾ç¤ºä¹°å…¥ä¿¡å·
```

#### å‚è€ƒä»£ç 
```mql4
//+------------------------------------------------------------------+
//|                                    SignalIndicator.mq4       |
//+------------------------------------------------------------------+
#property copyright "2026, Practice"
#property version   "1.00"
#property strict
#property indicator_chart_window
#property indicator_buffers 1
#property indicator_plots   1

input int RSIPeriod = 14;
input int OverboughtLevel = 70;
input int OversoldLevel = 30;

double SignalBuffer[];

int OnInit()
  {
   SetIndexBuffer(0, SignalBuffer);
   SetIndexStyle(0, DRAW_ARROW, STYLE_SOLID, 3, clrBlue);
   SetIndexArrow(0, 233);  // å‘ä¸Šç®­å¤´
   SetIndexLabel(0, "RSI Signal");
   
   IndicatorShortName("RSI Signal Indicator");
   
   return(INIT_SUCCEEDED);
  }

int OnCalculate(const int rates_total,
                const int prev_calculated,
                const datetime &time[],
                const double &open[],
                const double &high[],
                const double &low[],
                const double &close[],
                const long &tick_volume[],
                const long &volume[],
                const int &spread[])
  {
   if(rates_total <= RSIPeriod + 1)
      return(0);
   
   int start = prev_calculated;
   if(start == 0)
      start = RSIPeriod + 1;
   
   for(int i = start; i < rates_total; i++)
     {
      // è®¡ç®—RSI
      double rsi = iRSI(_Symbol, PERIOD_CURRENT, RSIPeriod, PRICE_CLOSE, i);
      double rsi1 = iRSI(_Symbol, PERIOD_CURRENT, RSIPeriod, PRICE_CLOSE, i+1);
      
      SignalBuffer[i] = EMPTY_VALUE;
      
      // è¶…å–å›è°ƒï¼šä¹°å…¥ä¿¡å·
      if(rsi1 < OversoldLevel && rsi >= OversoldLevel)
        {
         SignalBuffer[i] = Low[i] - 10 * Point;
        }
      // è¶…ä¹°å›è°ƒï¼šå–å‡ºä¿¡å·
      else if(rsi1 > OverboughtLevel && rsi <= OverboughtLevel)
        {
         SignalBuffer[i] = High[i] + 10 * Point;
        }
     }
   
   return(rates_total);
  }
```

## ğŸ’¡ æœ€ä½³å®è·µ

### æŒ‡æ ‡å¼€å‘å»ºè®®

#### æ€§èƒ½ä¼˜åŒ–
- âœ… **é¿å…é‡å¤è®¡ç®—**ï¼šç¼“å­˜è®¡ç®—ç»“æœ
- âœ… **é™åˆ¶è®¡ç®—èŒƒå›´**ï¼šåªè®¡ç®—å¿…è¦çš„Kçº¿
- âœ… **ä½¿ç”¨é€‚å½“çš„æ•°æ®ç±»å‹**ï¼šdoubleç”¨äºä»·æ ¼ï¼Œintç”¨äºç´¢å¼•
- âŒ **è¿‡åº¦è®¡ç®—**ï¼šé¿å…ä¸å¿…è¦çš„å¾ªç¯

#### è§†è§‰è®¾è®¡
- âœ… **é¢œè‰²é€‰æ‹©**ï¼šä½¿ç”¨å¯¹æ¯”åº¦é«˜çš„é¢œè‰²
- âœ… **çº¿æ¡ç²—ç»†**ï¼šé‡è¦çº¿æ¡ä½¿ç”¨ç²—çº¿
- âœ… **æ ‡ç­¾æ¸…æ™°**ï¼šæä¾›æ¸…æ™°çš„æ ‡ç­¾è¯´æ˜
- âŒ **è¿‡åº¦æ‹¥æŒ¤**ï¼šé¿å…å›¾è¡¨è¿‡äºå¤æ‚

## ğŸ”— ç›¸å…³èµ„æº

- [[MQL4å‡½æ•°ä¸æ§åˆ¶æµ]] - å‡½æ•°å’Œæ§åˆ¶æµ
- [[Expert AdvisoråŸºç¡€]] - EAå¼€å‘
- [[æŠ€æœ¯åˆ†æåŸºç¡€]] - æŒ‡æ ‡åŸç†
- [[å›¾è¡¨å¯¹è±¡æ“ä½œ]] - å¯¹è±¡ç®¡ç†

### å®˜æ–¹æ–‡æ¡£

- **è‡ªå®šä¹‰æŒ‡æ ‡**ï¼šhttps://www.mql5.com/en/docs/mql4/basis/indicator
- **æŒ‡æ ‡ç¼“å†²åŒº**ï¼šhttps://www.mql5.com/en/docs/mql4/basis/indicators

---
*åˆ›å»ºæ—¶é—´: 2026-02-01*  
*åˆ†ç±»: 3 Resources*
