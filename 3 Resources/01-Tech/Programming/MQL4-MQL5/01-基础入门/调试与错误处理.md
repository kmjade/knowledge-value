---
title: è°ƒè¯•ä¸é”™è¯¯å¤„ç†
status: active
priority: high
tags: [resource/tech/programming/mql, mql4/debugging, mql4/error-handling]
aliases: [MQL4è°ƒè¯•æŠ€å·§, MQL4é”™è¯¯å¤„ç†]
created: 2026-02-01
---

# è°ƒè¯•ä¸é”™è¯¯å¤„ç†

> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡MQL4çš„è°ƒè¯•æ–¹æ³•å’Œé”™è¯¯å¤„ç†æŠ€å·§ï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½å’Œè§£å†³ç¨‹åºé—®é¢˜ã€‚

## ğŸ“š è°ƒè¯•æ¦‚è¿°

### è°ƒè¯•æ–¹æ³•åˆ†ç±»
```mermaid
graph TB
    A[MQL4è°ƒè¯•æ–¹æ³•] --> B[Printè°ƒè¯•]
    A --> C[æ–­ç‚¹è°ƒè¯•]
    A --> D[æ—¥å¿—åˆ†æ]
    A --> E[é”™è¯¯å¤„ç†]
    
    B --> B1[Printå‡½æ•°]
    B --> B2[Commentæ˜¾ç¤º]
    B --> B3[Alertå¼¹çª—]
    
    C --> C1[è®¾ç½®æ–­ç‚¹]
    C --> C2[å•æ­¥æ‰§è¡Œ]
    C --> C3[å˜é‡ç›‘è§†]
    
    D --> D1[æ—¥å¿—æ–‡ä»¶]
    D --> D2[é”™è¯¯ä»£ç ]
    D --> D3[æ€§èƒ½åˆ†æ]
    
    E --> E1[é”™è¯¯æ£€æµ‹]
    E --> E2[å¼‚å¸¸å¤„ç†]
    E --> E3[é”™è¯¯æ¢å¤]
```

## ğŸ” Printè°ƒè¯•æ³•

### Printå‡½æ•°ä½¿ç”¨

#### åŸºæœ¬Printç”¨æ³•
```mql4
// åŸºæœ¬Printè¾“å‡º
void OnTick()
  {
   // è¾“å‡ºç®€å•ä¿¡æ¯
   Print("OnTickæ‰§è¡Œ");
   
   // è¾“å‡ºå˜é‡å€¼
   double price = Bid;
   Print("å½“å‰ä»·æ ¼: ", price);
   
   // è¾“å‡ºå¤šä¸ªå˜é‡
   int ticket = 12345;
   double profit = 100.50;
   Print("è®¢å•: ", ticket, " åˆ©æ¶¦: ", profit);
   
   // æ ¼å¼åŒ–è¾“å‡º
   string message = StringFormat("ä»·æ ¼: %.5f, æ‰‹æ•°: %.2f", Ask, 0.1);
   Print(message);
  }
```

#### è°ƒè¯•ä¿¡æ¯è¾“å‡º
```mql4
// å‡½æ•°å…¥å£å’Œå‡ºå£è°ƒè¯•
void MyFunction(double parameter)
  {
   Print("=== è¿›å…¥å‡½æ•° MyFunction ===");
   Print("å‚æ•°: ", parameter);
   
   // å‡½æ•°é€»è¾‘
   double result = parameter * 2;
   Print("è®¡ç®—ç»“æœ: ", result);
   
   Print("=== é€€å‡ºå‡½æ•° MyFunction ===");
   return;
  }

// æ¡ä»¶è°ƒè¯•
void ConditionalDebug()
  {
   bool debugMode = true;  // è°ƒè¯•å¼€å…³
   
   if(debugMode)
     {
      Print("è°ƒè¯•ä¿¡æ¯: å½“å‰çŠ¶æ€");
     }
   
   // ä¸»è¦é€»è¾‘
  }

// æ€§èƒ½è°ƒè¯•
void PerformanceTest()
  {
   uint startTime = GetTickCount();
   
   // æ‰§è¡Œéœ€è¦æµ‹è¯•çš„ä»£ç 
   for(int i = 0; i < 1000; i++)
     {
      double ma = iMA(Symbol(), PERIOD_CURRENT, 20, 0, MODE_SMA, PRICE_CLOSE, 0);
     }
   
   uint endTime = GetTickCount();
   uint elapsedTime = endTime - startTime;
   
   Print("æ‰§è¡Œæ—¶é—´: ", elapsedTime, " æ¯«ç§’");
  }
```

### Commentæ˜¾ç¤º

#### å›¾è¡¨ä¿¡æ¯æ˜¾ç¤º
```mql4
// åœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
void DisplayDebugInfo()
  {
   string debugInfo = "";
   
   // åŸºæœ¬ä¿¡æ¯
   debugInfo += "=== è°ƒè¯•ä¿¡æ¯ ===\n";
   debugInfo += "äº¤æ˜“å“ç§: " + Symbol() + "\n";
   debugInfo += "å½“å‰ä»·æ ¼: " + DoubleToString(Bid, 5) + "\n";
   debugInfo += "å½“å‰æ—¶é—´: " + TimeToString(TimeCurrent()) + "\n";
   
   // è´¦æˆ·ä¿¡æ¯
   debugInfo += "è´¦æˆ·ä½™é¢: " + DoubleToString(AccountBalance(), 2) + "\n";
   debugInfo += "æŒä»“æ•°é‡: " + IntegerToString(OrdersTotal()) + "\n";
   
   // æŒ‡æ ‡å€¼
   double rsi = iRSI(Symbol(), PERIOD_CURRENT, 14, PRICE_CLOSE, 0);
   debugInfo += "RSIå€¼: " + DoubleToString(rsi, 2) + "\n";
   
   // æ˜¾ç¤ºä¿¡æ¯
   Comment(debugInfo);
  }

void OnTick()
  {
   DisplayDebugInfo();
  }

void OnDeinit(const int reason)
  {
   Comment("");  // æ¸…é™¤å›¾è¡¨ä¿¡æ¯
  }
```

## ğŸ›‘ æ–­ç‚¹è°ƒè¯•

### è®¾ç½®å’Œä½¿ç”¨æ–­ç‚¹

#### æ–­ç‚¹è°ƒè¯•æ­¥éª¤
```mql4
// MetaEditorè°ƒè¯•æ–¹æ³•
// 1. åœ¨ä»£ç è¡Œå·å·¦ä¾§ç‚¹å‡»è®¾ç½®æ–­ç‚¹
// 2. æŒ‰F5å¯åŠ¨è°ƒè¯•
// 3. ä½¿ç”¨F10å•æ­¥æ‰§è¡Œ
// 4. æŒ‰F11è¿›å…¥å‡½æ•°
// 5. ä½¿ç”¨å˜é‡çª—å£æŸ¥çœ‹å˜é‡å€¼

int OnInit()
  {
   int x = 10;  // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹
   
   x = x + 5;   // å•æ­¥æ‰§è¡Œåˆ°è¿™é‡Œ
   Print("xçš„å€¼: ", x);
   
   return(INIT_SUCCEEDED);
  }

void ComplexCalculation()
  {
   double result = 0;
   
   for(int i = 0; i < 100; i++)  // åœ¨å¾ªç¯ä¸­è®¾ç½®æ–­ç‚¹
     {
      result += i;
      
      if(result > 1000)  // æ¡ä»¶æ–­ç‚¹
         break;
     }
   
   Print("æœ€ç»ˆç»“æœ: ", result);
  }
```

#### å˜é‡ç›‘è§†
```mql4
// ä½¿ç”¨ç›‘è§†çª—å£æŸ¥çœ‹å˜é‡
void MonitorVariables()
  {
   int counter = 0;
   double prices[10];
   
   for(int i = 0; i < 10; i++)
     {
      prices[i] = Close[i];
      counter++;  // ç›‘è§†è¿™ä¸ªå˜é‡
     }
   
   // åœ¨ç›‘è§†çª—å£ä¸­æ·»åŠ ä»¥ä¸‹è¡¨è¾¾å¼ï¼š
   // counter - æŸ¥çœ‹è®¡æ•°å™¨å€¼
   // prices[5] - æŸ¥çœ‹ç¬¬6ä¸ªä»·æ ¼
   // counter * 2 - æŸ¥çœ‹è¡¨è¾¾å¼ç»“æœ
  }
```

## ğŸ“Š æ—¥å¿—åˆ†æ

### æ—¥å¿—è®°å½•

#### è¯¦ç»†çš„æ—¥å¿—è®°å½•
```mql4
// æ—¥å¿—è®°å½•å‡½æ•°
void LogMessage(string message, int level = 0)
  {
   // level: 0=ä¿¡æ¯, 1=è­¦å‘Š, 2=é”™è¯¯
   string levelStr = "";
   color levelColor = clrBlack;
   
   switch(level)
     {
      case 0:
         levelStr = "[INFO]";
         levelColor = clrBlue;
         break;
      case 1:
         levelStr = "[WARNING]";
         levelColor = clrOrange;
         break;
      case 2:
         levelStr = "[ERROR]";
         levelColor = clrRed;
         break;
     }
   
   string logMessage = TimeToString(TimeCurrent()) + " " + levelStr + " " + message;
   Print(logMessage);
  }

// ä½¿ç”¨æ—¥å¿—å‡½æ•°
void LogExample()
  {
   LogMessage("ç¨‹åºå¯åŠ¨", 0);
   
   double price = Ask;
   if(price > 0)
     {
      LogMessage("å½“å‰ä»·æ ¼: " + DoubleToString(price, 5), 0);
     }
   else
     {
      LogMessage("ä»·æ ¼è·å–å¤±è´¥", 2);
     }
   
   int orders = OrdersTotal();
   if(orders > 10)
     {
      LogMessage("æŒä»“æ•°é‡è¿‡å¤š: " + IntegerToString(orders), 1);
     }
  }
```

### é”™è¯¯æ—¥å¿—

#### äº¤æ˜“é”™è¯¯è®°å½•
```mql4
// è®°å½•äº¤æ˜“é”™è¯¯
void LogTradeError(int error, string operation)
  {
   string errorMsg = ErrorDescription(error);
   string logMessage = StringFormat(
      "äº¤æ˜“é”™è¯¯ - æ“ä½œ: %s, é”™è¯¯ä»£ç : %d, é”™è¯¯æè¿°: %s",
      operation, error, errorMsg
   );
   
   Print(logMessage);
   
   // å¯ä»¥å°†é”™è¯¯è®°å½•åˆ°æ–‡ä»¶
   WriteLogToFile(logMessage);
  }

// å†™å…¥æ—¥å¿—æ–‡ä»¶
void WriteLogToFile(string message)
  {
   string filename = "TradingLog.txt";
   int handle = FileOpen(filename, FILE_WRITE|FILE_READ|FILE_TXT);
   
   if(handle != INVALID_HANDLE)
     {
      FileSeek(handle, 0, SEEK_END);
      FileWrite(handle, message);
      FileClose(handle);
     }
   else
     {
      Print("æ— æ³•æ‰“å¼€æ—¥å¿—æ–‡ä»¶");
     }
  }

// ä½¿ç”¨ç¤ºä¾‹
int ticket = OrderSend(Symbol(), OP_BUY, 0.1, Ask, 3, 0, 0, "Test", 0, 0, clrNONE);

if(ticket < 0)
  {
   int error = GetLastError();
   LogTradeError(error, "å¼€ä»“");
  }
```

## âš ï¸ é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç±»å‹

#### è¿è¡Œæ—¶é”™è¯¯
```mql4
// é™¤é›¶é”™è¯¯
void DivisionError()
  {
   int a = 10;
   int b = 0;
   
   // int result = a / b;  // è¿™ä¼šå¯¼è‡´é™¤é›¶é”™è¯¯
   
   // æ­£ç¡®å¤„ç†
   if(b != 0)
     {
      int result = a / b;
     }
   else
     {
      Print("é”™è¯¯: é™¤æ•°ä¸èƒ½ä¸ºé›¶");
     }
  }

// æ•°ç»„è¶Šç•Œé”™è¯¯
void ArrayOutOfBounds()
  {
   double prices[5];
   
   // prices[10] = 1.0;  // æ•°ç»„è¶Šç•Œé”™è¯¯
   
   // æ­£ç¡®å¤„ç†
   if(10 < ArraySize(prices))
     {
      prices[10] = 1.0;
     }
   else
     {
      Print("é”™è¯¯: æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´");
     }
  }

// ç©ºæŒ‡é’ˆé”™è¯¯
void NullPointer()
  {
   // ç¡®ä¿åœ¨ä½¿ç”¨å‰æ£€æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æ•ˆ
   int handle = FileOpen("test.txt", FILE_READ);
   
   if(handle != INVALID_HANDLE)
     {
      // å®‰å…¨ä½¿ç”¨æ–‡ä»¶å¥æŸ„
      string content = FileReadString(handle);
      FileClose(handle);
     }
   else
     {
      Print("é”™è¯¯: æ–‡ä»¶å¥æŸ„æ— æ•ˆ");
     }
  }
```

### äº¤æ˜“é”™è¯¯å¤„ç†

#### äº¤æ˜“å‡½æ•°é”™è¯¯å¤„ç†
```mql4
// å®‰å…¨çš„å¼€ä»“å‡½æ•°
bool SafeOpenBuyOrder(double lots, double sl, double tp)
  {
   // å‚æ•°æ£€æŸ¥
   if(lots <= 0)
     {
      Print("é”™è¯¯: æ‰‹æ•°å¿…é¡»å¤§äº0");
      return false;
     }
   
   // æ£€æŸ¥å¸‚åœºçŠ¶æ€
   if(!MarketInfo(Symbol(), MODE_TRADEALLOWED))
     {
      Print("é”™è¯¯: å¸‚åœºæœªå¼€æ”¾");
      return false;
     }
   
   // æ£€æŸ¥è´¦æˆ·èµ„é‡‘
   double freeMargin = AccountFreeMargin();
   double requiredMargin = MarketInfo(Symbol(), MODE_MARGINREQUIRED) * lots;
   
   if(freeMargin < requiredMargin)
     {
      Print("é”™è¯¯: ä¿è¯é‡‘ä¸è¶³");
      return false;
     }
   
   // æ‰§è¡Œäº¤æ˜“
   ResetLastError();
   int ticket = OrderSend(
      Symbol(), OP_BUY, lots, Ask, 3, sl, tp, 
      "Safe Order", 0, 0, clrBlue
   );
   
   // é”™è¯¯å¤„ç†
   if(ticket < 0)
     {
      int error = GetLastError();
      Print("è®¢å•å¤±è´¥: ", error, " - ", ErrorDescription(error));
      
      // ç‰¹å®šé”™è¯¯å¤„ç†
      switch(error)
        {
         case 6:  // æ²¡æœ‰è¿æ¥
            Print("é”™è¯¯: ä¸æœåŠ¡å™¨æ²¡æœ‰è¿æ¥");
            break;
         case 134:  // ä¿è¯é‡‘ä¸è¶³
            Print("é”™è¯¯: è´¦æˆ·èµ„é‡‘ä¸è¶³");
            break;
         case 128:  // äº¤æ˜“è¶…æ—¶
            Print("é”™è¯¯: äº¤æ˜“è¶…æ—¶");
            break;
        }
      
      return false;
     }
   
   Print("è®¢å•æˆåŠŸ: ", ticket);
   return true;
  }

// ä½¿ç”¨ç¤ºä¾‹
void OnTick()
  {
   double sl = Ask - 50 * Point;
   double tp = Ask + 100 * Point;
   
   bool success = SafeOpenBuyOrder(0.1, sl, tp);
   
   if(success)
     {
      Print("è®¢å•æ‰§è¡ŒæˆåŠŸ");
     }
  }
```

## ğŸ”§ é”™è¯¯ä»£ç å’Œæè¿°

### é”™è¯¯ä»£ç å¤„ç†

#### å¸¸ç”¨é”™è¯¯ä»£ç 
```mql4
// é”™è¯¯ä»£ç è½¬æ¢ä¸ºæè¿°å­—ç¬¦ä¸²
string ErrorDescription(int error)
  {
   switch(error)
     {
      case 0:   return "æ²¡æœ‰é”™è¯¯";
      case 1:   return "æ²¡æœ‰é”™è¯¯ï¼Œä½†ç»“æœæœªçŸ¥";
      case 2:   return "é€šç”¨é”™è¯¯";
      case 3:   return "é”™è¯¯çš„å‚æ•°";
      case 4:   return "äº¤æ˜“æœåŠ¡å™¨å¿™ç¢Œ";
      case 5:   return "æ—§ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ç»ˆç«¯";
      case 6:   return "æ²¡æœ‰è¿æ¥";
      case 7:   return "æƒé™ä¸è¶³";
      case 8:   return "è¯·æ±‚è¿‡äºé¢‘ç¹";
      case 9:   return "ä¸å…è®¸çš„æ“ä½œ";
      case 64:  return "è´¦æˆ·è¢«ç¦æ­¢";
      case 65:  return "é”™è¯¯çš„è´¦å·";
      case 128: return "äº¤æ˜“è¶…æ—¶";
      case 129: return "é”™è¯¯çš„ä»·æ ¼";
      case 130: return "é”™è¯¯çš„åœæ­¢";
      case 131: return "é”™è¯¯çš„æˆäº¤é‡";
      case 132: return "å¸‚åœºå·²å…³é—­";
      case 133: return "äº¤æ˜“è¢«ç¦æ­¢";
      case 134: return "ä¿è¯é‡‘ä¸è¶³";
      case 135: return "ä»·æ ¼æ”¹å˜äº†";
      case 136: return "æ²¡æœ‰ä»·æ ¼";
      case 137: return "ç»çºªå•†å¿™";
      case 138: return "æ–°æŠ¥ä»·";
      case 139: return "è®¢å•è¢«é”å®š";
      case 140: return "åªå…è®¸ä¹°å…¥";
      case 141: return "å¤ªå¤šè¯·æ±‚";
      case 145: return "ä¿®æ”¹è¢«ç¦æ­¢";
      case 146: return "äº¤æ˜“å­ç³»ç»Ÿå¿™ç¢Œ";
      case 147: return "ä½¿ç”¨åˆ°æœŸæ—¶é—´";
      case 148: return "è®¢å•å¤ªå¤š";
      case 149: return "å¯¹å†²è¢«ç¦æ­¢";
      case 150: return "ç¦æ­¢å¯¹å†²";
      case 4000: return "æ²¡æœ‰é”™è¯¯";
      case 4001: return "é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆ";
      case 4002: return "æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´";
      case 4003: return "æ²¡æœ‰å†…å­˜";
      case 4004: return "ç©ºæŒ‡é’ˆ";
      case 4005: return "æ ¼å¼åŒ–å­—ç¬¦ä¸²é”™è¯¯";
      case 4006: return "æ•°ç»„ä½œä¸ºå‚æ•°ä¸æ­£ç¡®";
      case 4007: return "å†…å­˜æº¢å‡º";
      case 4008: return "æ ˆæº¢å‡º";
      case 4009: return "æ•°ç»„ä¸æ˜¯æ­£ç¡®çš„å¤§å°";
      case 4010: return "é™¤ä»¥é›¶";
      case 4011: return "æœªçŸ¥çš„å‘½ä»¤";
      case 4012: return "é”™è¯¯çš„äº¤æ˜“";
      case 4013: return "æœªçŸ¥å¯¹è±¡å±æ€§";
      case 4014: return "æœªçŸ¥å¯¹è±¡ç±»å‹";
      case 4015: return "ä¸æ”¯æŒçš„å¯¹è±¡";
      case 4016: return "ä¸æ”¯æŒçš„å¯¹è±¡å±æ€§";
      case 4017: return "å­—ç¬¦ä¸²è¿æ¥é”™è¯¯";
      case 4018: return "å†…éƒ¨é”™è¯¯";
      case 4019: return "å­—ç¬¦ä¸²å‚æ•°é”™è¯¯";
      case 4020: return "ç©ºå­—ç¬¦ä¸²";
      case 4021: return "å­—ç¬¦ä¸²å¤ªé•¿";
      case 4022: return "æœªçŸ¥çš„é”™è¯¯";
      case 4050: return "ä¸æ­£ç¡®çš„å‡½æ•°å‚æ•°";
      case 4051: return "é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆ";
      case 4052: return "æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´";
      case 4053: return "æ²¡æœ‰å†…å­˜";
      case 4054: return "ç©ºæŒ‡é’ˆ";
      case 4055: return "æ ¼å¼åŒ–å­—ç¬¦ä¸²é”™è¯¯";
      case 4056: return "æ•°ç»„ä½œä¸ºå‚æ•°ä¸æ­£ç¡®";
      case 4057: return "å†…å­˜æº¢å‡º";
      case 4058: return "æ ˆæº¢å‡º";
      case 4059: return "æ•°ç»„ä¸æ˜¯æ­£ç¡®çš„å¤§å°";
      case 4060: return "é™¤ä»¥é›¶";
      case 4061: return "æœªçŸ¥çš„å‘½ä»¤";
      case 4062: return "é”™è¯¯çš„äº¤æ˜“";
      case 4063: return "æœªçŸ¥å¯¹è±¡å±æ€§";
      case 4064: return "æœªçŸ¥å¯¹è±¡ç±»å‹";
      case 4065: return "ä¸æ”¯æŒçš„å¯¹è±¡";
      case 4066: return "ä¸æ”¯æŒçš„å¯¹è±¡å±æ€§";
      case 4067: return "å­—ç¬¦ä¸²è¿æ¥é”™è¯¯";
      case 4068: return "å†…éƒ¨é”™è¯¯";
      case 4069: return "å­—ç¬¦ä¸²å‚æ•°é”™è¯¯";
      case 4070: return "ç©ºå­—ç¬¦ä¸²";
      case 4071: return "å­—ç¬¦ä¸²å¤ªé•¿";
      case 4072: return "æœªçŸ¥çš„é”™è¯¯";
      default:  return "æœªçŸ¥é”™è¯¯ä»£ç : " + IntegerToString(error);
     }
  }

// ä½¿ç”¨é”™è¯¯æè¿°å‡½æ•°
int ticket = OrderSend(Symbol(), OP_BUY, 0.1, Ask, 3, 0, 0, "Test", 0, 0, clrNONE);

if(ticket < 0)
  {
   int error = GetLastError();
   Print("é”™è¯¯ä»£ç : ", error);
   Print("é”™è¯¯æè¿°: ", ErrorDescription(error));
  }
```

## ğŸ›¡ï¸ é˜²å¾¡æ€§ç¼–ç¨‹

### å‚æ•°éªŒè¯

#### è¾“å…¥å‚æ•°æ£€æŸ¥
```mql4
// éªŒè¯è¾“å…¥å‚æ•°
bool ValidateParameters(double lotSize, int stopLoss, int takeProfit)
  {
   // éªŒè¯æ‰‹æ•°
   double minLot = MarketInfo(Symbol(), MODE_MINLOT);
   double maxLot = MarketInfo(Symbol(), MODE_MAXLOT);
   
   if(lotSize < minLot)
     {
      Print("é”™è¯¯: æ‰‹æ•°å°äºæœ€å°å€¼ ", minLot);
      return false;
     }
   
   if(lotSize > maxLot)
     {
      Print("é”™è¯¯: æ‰‹æ•°å¤§äºæœ€å¤§å€¼ ", maxLot);
      return false;
     }
   
   // éªŒè¯æ­¢æŸ
   int stopLevel = (int)MarketInfo(Symbol(), MODE_STOPLEVEL);
   if(stopLoss < stopLevel)
     {
      Print("é”™è¯¯: æ­¢æŸå°äºæœ€å°å€¼ ", stopLevel);
      return false;
     }
   
   // éªŒè¯æ­¢ç›ˆ
   if(takeProfit < stopLevel)
     {
      Print("é”™è¯¯: æ­¢ç›ˆå°äºæœ€å°å€¼ ", stopLevel);
      return false;
     }
   
   return true;
  }

// ä½¿ç”¨éªŒè¯å‡½æ•°
void SafeTrading()
  {
   double lotSize = 0.1;
   int stopLoss = 50;
   int takeProfit = 100;
   
   if(ValidateParameters(lotSize, stopLoss, takeProfit))
     {
      // å‚æ•°æœ‰æ•ˆï¼Œå¯ä»¥æ‰§è¡Œäº¤æ˜“
      int ticket = OrderSend(Symbol(), OP_BUY, lotSize, Ask, 3, 
                           Ask - stopLoss*Point, Ask + takeProfit*Point, 
                           "Validated Order", 0, 0, clrBlue);
      
      if(ticket > 0)
         Print("è®¢å•æˆåŠŸ: ", ticket);
     }
  }
```

### çŠ¶æ€æ£€æŸ¥

#### äº¤æ˜“ç¯å¢ƒæ£€æŸ¥
```mql4
// æ£€æŸ¥äº¤æ˜“ç¯å¢ƒ
bool CheckTradingEnvironment()
  {
   // æ£€æŸ¥è¿æ¥çŠ¶æ€
   if(!TerminalInfoInteger(TERMINAL_CONNECTED))
     {
      Print("é”™è¯¯: ç»ˆç«¯æœªè¿æ¥åˆ°æœåŠ¡å™¨");
      return false;
     }
   
   // æ£€æŸ¥äº¤æ˜“æ˜¯å¦å…è®¸
   if(!TerminalInfoInteger(TERMINAL_TRADE_ALLOWED))
     {
      Print("é”™è¯¯: ç»ˆç«¯äº¤æ˜“è¢«ç¦æ­¢");
      return false;
     }
   
   // æ£€æŸ¥EAäº¤æ˜“æ˜¯å¦å…è®¸
   if(!AccountInfoInteger(ACCOUNT_TRADE_EXPERT))
     {
      Print("é”™è¯¯: EAäº¤æ˜“æœªè¢«è´¦æˆ·å…è®¸");
      return false;
     }
   
   // æ£€æŸ¥å¸‚åœºçŠ¶æ€
   if(!MarketInfo(Symbol(), MODE_TRADEALLOWED))
     {
      Print("é”™è¯¯: å¸‚åœºäº¤æ˜“è¢«ç¦æ­¢");
      return false;
     }
   
   return true;
  }

// æ£€æŸ¥è´¦æˆ·çŠ¶æ€
bool CheckAccountStatus()
  {
   // æ£€æŸ¥è´¦æˆ·ç±»å‹
   bool isDemo = IsDemo();
   
   if(isDemo)
     {
      Print("è­¦å‘Š: ä½¿ç”¨æ¨¡æ‹Ÿè´¦æˆ·");
     }
   else
     {
      Print("è­¦å‘Š: ä½¿ç”¨çœŸå®è´¦æˆ·ï¼Œè¯·è°¨æ…æ“ä½œ");
     }
   
   // æ£€æŸ¥è´¦æˆ·èµ„é‡‘
   double balance = AccountBalance();
   if(balance < 100)
     {
      Print("è­¦å‘Š: è´¦æˆ·ä½™é¢è¿‡ä½: ", balance);
      return false;
     }
   
   // æ£€æŸ¥å¯ç”¨ä¿è¯é‡‘
   double freeMargin = AccountFreeMargin();
   if(freeMargin < 100)
     {
      Print("è­¦å‘Š: å¯ç”¨ä¿è¯é‡‘è¿‡ä½: ", freeMargin);
      return false;
     }
   
   return true;
  }

// ç»¼åˆæ£€æŸ¥
bool PreTradeCheck()
  {
   if(!CheckTradingEnvironment())
     {
      Print("äº¤æ˜“ç¯å¢ƒæ£€æŸ¥å¤±è´¥");
      return false;
     }
   
   if(!CheckAccountStatus())
     {
      Print("è´¦æˆ·çŠ¶æ€æ£€æŸ¥å¤±è´¥");
      return false;
     }
   
   return true;
  }

// ä½¿ç”¨æ£€æŸ¥å‡½æ•°
void OnTick()
  {
   if(PreTradeCheck())
     {
      // æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥æ‰§è¡Œäº¤æ˜“
      Print("æ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå¯ä»¥äº¤æ˜“");
     }
  }
```

## ğŸ¯ å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šè°ƒè¯•å¤æ‚å‡½æ•°

#### ä»»åŠ¡è¦æ±‚
```mql4
// è°ƒè¯•ä¸€ä¸ªå¤æ‚çš„è®¡ç®—å‡½æ•°
// åŠŸèƒ½ï¼š
// 1. æ·»åŠ è¯¦ç»†çš„Printè¯­å¥
// 2. ä½¿ç”¨æ–­ç‚¹è°ƒè¯•
// 3. è®°å½•é”™è¯¯ä¿¡æ¯
```

#### å‚è€ƒä»£ç 
```mql4
//+------------------------------------------------------------------+
//|                                    DebugPractice.mq4        |
//+------------------------------------------------------------------+
#property copyright "2026, Practice"
#property version   "1.00"
#property strict

// å¤æ‚çš„è®¡ç®—å‡½æ•°
double ComplexCalculation(int period)
  {
   Print("=== è¿›å…¥ ComplexCalculation ===");
   Print("å‚æ•°: ", period);
   
   if(period <= 0)
     {
      Print("é”™è¯¯: å‘¨æœŸå¿…é¡»å¤§äº0");
      return 0;
     }
   
   if(period > Bars)
     {
      Print("é”™è¯¯: å‘¨æœŸå¤§äºKçº¿æ•°é‡");
      return 0;
     }
   
   double sum = 0.0;
   double count = 0;
   
   for(int i = 0; i < period; i++)
     {
      if(i < Bars)
        {
         double price = Close[i];
         sum += price;
         count++;
         
         if(i % 10 == 0)  // æ¯éš”10æ¬¡è¾“å‡ºä¸€æ¬¡
           {
            Print("å¤„ç†è¿›åº¦: ", i, "/", period, " å½“å‰ä»·æ ¼: ", price);
           }
        }
     }
   
   double average = 0;
   if(count > 0)
     {
      average = sum / count;
      Print("æ€»å’Œ: ", sum, " æ•°é‡: ", count, " å¹³å‡å€¼: ", average);
     }
   else
     {
      Print("è­¦å‘Š: æ²¡æœ‰æœ‰æ•ˆçš„æ•°æ®");
     }
   
   Print("=== é€€å‡º ComplexCalculation ===");
   return average;
  }

int OnInit()
  {
   // è®¾ç½®æ–­ç‚¹åœ¨è¿™é‡Œå¼€å§‹è°ƒè¯•
   Print("å¼€å§‹è°ƒè¯•å¤æ‚è®¡ç®—å‡½æ•°");
   
   double result = ComplexCalculation(20);
   Print("æœ€ç»ˆç»“æœ: ", result);
   
   return(INIT_SUCCEEDED);
  }
```

## ğŸ’¡ æœ€ä½³å®è·µ

### è°ƒè¯•æŠ€å·§

#### é€æ­¥è°ƒè¯•
- âœ… **è®¾ç½®æ–­ç‚¹**ï¼šåœ¨å…³é”®ä½ç½®è®¾ç½®æ–­ç‚¹
- âœ… **å•æ­¥æ‰§è¡Œ**ï¼šé€æ­¥è·Ÿè¸ªä»£ç æ‰§è¡Œ
- âœ… **ç›‘è§†å˜é‡**ï¼šå®æ—¶æŸ¥çœ‹å˜é‡å€¼
- âŒ **ç›²ç›®çŒœæµ‹**ï¼šé¿å…æ²¡æœ‰æ ¹æ®çš„çŒœæµ‹

### é”™è¯¯å¤„ç†åŸåˆ™

#### é”™è¯¯é¢„é˜²
- âœ… **å‚æ•°éªŒè¯**ï¼šä¸¥æ ¼éªŒè¯æ‰€æœ‰è¾“å…¥å‚æ•°
- âœ… **ç¯å¢ƒæ£€æŸ¥**ï¼šæ£€æŸ¥äº¤æ˜“ç¯å¢ƒå’Œè´¦æˆ·çŠ¶æ€
- âœ… **é”™è¯¯è®°å½•**ï¼šè¯¦ç»†è®°å½•æ‰€æœ‰é”™è¯¯ä¿¡æ¯
- âŒ **å¿½ç•¥è­¦å‘Š**ï¼šé‡è§†æ‰€æœ‰è­¦å‘Šä¿¡æ¯

## ğŸ”— ç›¸å…³èµ„æº

- [[MQL4å‡½æ•°ä¸æ§åˆ¶æµ]] - å‡½æ•°å’Œæ§åˆ¶æµ
- [[MQL4äº¤æ˜“æ“ä½œåŸºç¡€]] - äº¤æ˜“æ“ä½œ
- [[Expert AdvisoråŸºç¡€]] - EAå¼€å‘
- [[ä»£ç è§„èŒƒä¸ä¼˜åŒ–]] - ä»£ç è´¨é‡

### å®˜æ–¹æ–‡æ¡£

- **é”™è¯¯ä»£ç **ï¼šhttps://www.mql5.com/en/docs/mql4/constants/errorswarnings/enum_error_codes
- **è°ƒè¯•å·¥å…·**ï¼šhttps://www.mql5.com/en/articles/133

---
*åˆ›å»ºæ—¶é—´: 2026-02-01*  
*åˆ†ç±»: 3 Resources*
