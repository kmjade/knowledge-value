---
title: é™¤éŒ¯ä¸é”™è¯¯è™•ç†
status: active
priority: high
tags: [resource/tech/programming/mql, mql4/debugging, mql4/error-handling]
aliases: [MQL4é™¤éŒ¯æŠ€å·§, MQL4é”™è¯¯è™•ç†]
created: 2026-02-01
---

# é™¤éŒ¯ä¸é”™è¯¯è™•ç†

# æ–¹æ³•

## ğŸ“š é™¤éŒ¯æ¦‚è¿°

# æ–¹æ³•
```mermaid
graph TB
# æ–¹æ³•
    A --> C[æ–­ç‚¹é™¤éŒ¯]
# åˆ†æ
    A --> E[é”™è¯¯è™•ç†]
    
    B --> B1[Printå‡½æ•°]
# é¡¯ç¤º
    B --> B3[Alertå¼¹çª—]
    
    C --> C1[è¨­ç½®æ–­ç‚¹]
    C --> C2[å•æ­¥æ‰§è¡Œ]
    C --> C3[å˜é‡ç›‘è§†]
    
    D --> D1[æ—¥å¿—æª”æ¡ˆ]
    D --> D2[é”™è¯¯ä»£ç¢¼]
# åˆ†æ
    
    E --> E1[é”™è¯¯æ£€æµ‹]
    E --> E2[å¼‚å¸¸è™•ç†]
    E --> E3[é”™è¯¯æ¢å¾©]
```

## ğŸ” Printé™¤éŒ¯æ³•

### Printå‡½æ•°ä½¿ç”¨

#### åŸºæœ¬Printç”¨æ³•
```mql4
// åŸºæœ¬Printè¼¸å‡º
void OnTick()
  {
   // è¼¸å‡ºç®€å•è³‡è¨Š
   Print("OnTickæ‰§è¡Œ");
   
   // è¼¸å‡ºå˜é‡å€¼
   double price = Bid;
   Print("å½“å‰ä»·æ ¼: ", price);
   
   // è¼¸å‡ºå¤šå€‹å˜é‡
   int ticket = 12345;
   double profit = 100.50;
   Print("è¨‚å–®: ", ticket, " åˆ©æ¶¦: ", profit);
   
   // æ ¼å¼åŒ–è¼¸å‡º
   string message = StringFormat("ä»·æ ¼: %.5f, æ‰‹æ•°: %.2f", Ask, 0.1);
   Print(message);
  }
```

#### é™¤éŒ¯è³‡è¨Šè¼¸å‡º
```mql4
// å‡½æ•°å…¥å£å’Œå‡ºå£é™¤éŒ¯
void MyFunction(double parameter)
  {
   Print("=== è¿›å…¥å‡½æ•° MyFunction ===");
   Print("å‚æ•°: ", parameter);
   
   // å‡½æ•°é€»è¾‘
   double result = parameter * 2;
   Print("è¨ˆç®—çµæœ: ", result);
   
   Print("=== é€€å‡ºå‡½æ•° MyFunction ===");
   return;
  }

// æ¡ä»¶é™¤éŒ¯
void ConditionalDebug()
  {
   bool debugMode = true;  // é™¤éŒ¯å¼€å…³
   
   if(debugMode)
     {
      Print("é™¤éŒ¯è³‡è¨Š: å½“å‰ç‹€æ…‹");
     }
   
   // ä¸»è¦é€»è¾‘
  }

// æ•ˆèƒ½é™¤éŒ¯
void PerformanceTest()
  {
   uint startTime = GetTickCount();
   
   // æ‰§è¡Œéœ€è¦æ¸¬è©¦çš„ä»£ç¢¼
   for(int i = 0; i < 1000; i++)
     {
      double ma = iMA(Symbol(), PERIOD_CURRENT, 20, 0, MODE_SMA, PRICE_CLOSE, 0);
     }
   
   uint endTime = GetTickCount();
   uint elapsedTime = endTime - startTime;
   
   Print("æ‰§è¡Œæ™‚é–“: ", elapsedTime, " æ¯«ç§’");
  }
```

# é¡¯ç¤º

# é¡¯ç¤º
```mql4
# é¡¯ç¤º
void DisplayDebugInfo()
  {
   string debugInfo = "";
   
   // åŸºæœ¬è³‡è¨Š
   debugInfo += "=== é™¤éŒ¯è³‡è¨Š ===\n";
   debugInfo += "äº¤æ˜“å“ç§: " + Symbol() + "\n";
   debugInfo += "å½“å‰ä»·æ ¼: " + DoubleToString(Bid, 5) + "\n";
   debugInfo += "å½“å‰æ™‚é–“: " + TimeToString(TimeCurrent()) + "\n";
   
   // å¸³æˆ¶è³‡è¨Š
   debugInfo += "å¸³æˆ¶ä½™é¢: " + DoubleToString(AccountBalance(), 2) + "\n";
   debugInfo += "æŒä»“æ•°é‡: " + IntegerToString(OrdersTotal()) + "\n";
   
   // æŒ‡æ ‡å€¼
   double rsi = iRSI(Symbol(), PERIOD_CURRENT, 14, PRICE_CLOSE, 0);
   debugInfo += "RSIå€¼: " + DoubleToString(rsi, 2) + "\n";
   
# é¡¯ç¤º
   Comment(debugInfo);
  }

void OnTick()
  {
   DisplayDebugInfo();
  }

void OnDeinit(const int reason)
  {
   Comment("");  // æ¸…é™¤åœ–è¡¨è³‡è¨Š
  }
```

## ğŸ›‘ æ–­ç‚¹é™¤éŒ¯

### è¨­ç½®å’Œä½¿ç”¨æ–­ç‚¹

#### æ–­ç‚¹é™¤éŒ¯æ­¥éª¤
```mql4
# æ–¹æ³•
// 1. åœ¨ä»£ç¢¼è¡Œå·å·¦ä¾§ç‚¹å‡»è¨­ç½®æ–­ç‚¹
// 2. æŒ‰F5å•Ÿå‹•é™¤éŒ¯
// 3. ä½¿ç”¨F10å•æ­¥æ‰§è¡Œ
// 4. æŒ‰F11è¿›å…¥å‡½æ•°
# æŸ¥çœ‹

int OnInit()
  {
   int x = 10;  // åœ¨è¿™é‡Œè¨­ç½®æ–­ç‚¹
   
   x = x + 5;   // å•æ­¥æ‰§è¡Œåˆ°è¿™é‡Œ
   Print("xçš„å€¼: ", x);
   
   return(INIT_SUCCEEDED);
  }

void ComplexCalculation()
  {
   double result = 0;
   
   for(int i = 0; i < 100; i++)  // åœ¨å¾ªç¯ä¸­è¨­ç½®æ–­ç‚¹
     {
      result += i;
      
      if(result > 1000)  // æ¡ä»¶æ–­ç‚¹
         break;
     }
   
   Print("æœ€ç»ˆçµæœ: ", result);
  }
```

#### å˜é‡ç›‘è§†
```mql4
# æŸ¥çœ‹
void MonitorVariables()
  {
   int counter = 0;
   double prices[10];
   
   for(int i = 0; i < 10; i++)
     {
      prices[i] = Close[i];
      counter++;  // ç›‘è§†é€™å€‹å˜é‡
     }
   
   // åœ¨ç›‘è§†è¦–çª—ä¸­æ–°å¢ä»¥ä¸‹è¡¨è¾¾å¼ï¼š
# æŸ¥çœ‹
# æŸ¥çœ‹
# æŸ¥çœ‹
  }
```

# åˆ†æ

### æ—¥å¿—è¨˜éŒ„

#### è©³ç´°çš„æ—¥å¿—è¨˜éŒ„
```mql4
// æ—¥å¿—è¨˜éŒ„å‡½æ•°
void LogMessage(string message, int level = 0)
  {
   // level: 0=è³‡è¨Š, 1=è­¦å‘Š, 2=é”™è¯¯
   string levelStr = "";
   color levelColor = clrBlack;
   
   switch(level)
     {
      case 0:
         levelStr = "[INFO]";
         levelColor = clrBlue;
         break;
      case 1:
         levelStr = "[WARNING]";
         levelColor = clrOrange;
         break;
      case 2:
         levelStr = "[ERROR]";
         levelColor = clrRed;
         break;
     }
   
   string logMessage = TimeToString(TimeCurrent()) + " " + levelStr + " " + message;
   Print(logMessage);
  }

// ä½¿ç”¨æ—¥å¿—å‡½æ•°
void LogExample()
  {
   LogMessage("ç¨‹å¼å•Ÿå‹•", 0);
   
   double price = Ask;
   if(price > 0)
     {
      LogMessage("å½“å‰ä»·æ ¼: " + DoubleToString(price, 5), 0);
     }
   else
     {
      LogMessage("ä»·æ ¼è·å–å¤±è´¥", 2);
     }
   
   int orders = OrdersTotal();
   if(orders > 10)
     {
      LogMessage("æŒä»“æ•°é‡è¿‡å¤š: " + IntegerToString(orders), 1);
     }
  }
```

### é”™è¯¯æ—¥å¿—

#### äº¤æ˜“é”™è¯¯è¨˜éŒ„
```mql4
// è¨˜éŒ„äº¤æ˜“é”™è¯¯
void LogTradeError(int error, string operation)
  {
   string errorMsg = ErrorDescription(error);
   string logMessage = StringFormat(
      "äº¤æ˜“é”™è¯¯ - æ“ä½œ: %s, é”™è¯¯ä»£ç¢¼: %d, é”™è¯¯æè¿°: %s",
      operation, error, errorMsg
   );
   
   Print(logMessage);
   
   // å¯ä»¥å°†é”™è¯¯è¨˜éŒ„åˆ°æª”æ¡ˆ
   WriteLogToFile(logMessage);
  }

// å¯«å…¥æ—¥å¿—æª”æ¡ˆ
void WriteLogToFile(string message)
  {
   string filename = "TradingLog.txt";
   int handle = FileOpen(filename, FILE_WRITE|FILE_READ|FILE_TXT);
   
   if(handle != INVALID_HANDLE)
     {
      FileSeek(handle, 0, SEEK_END);
      FileWrite(handle, message);
      FileClose(handle);
     }
   else
     {
      Print("ç„¡æ³•æ‰“é–‹æ—¥å¿—æª”æ¡ˆ");
     }
  }

// ä½¿ç”¨ç¤ºä¾‹
int ticket = OrderSend(Symbol(), OP_BUY, 0.1, Ask, 3, 0, 0, "Test", 0, 0, clrNONE);

if(ticket < 0)
  {
   int error = GetLastError();
   LogTradeError(error, "å¼€ä»“");
  }
```

## âš ï¸ é”™è¯¯è™•ç†

### å¸¸è§é”™è¯¯ç±»å‹

#### é‹è¡Œæ—¶é”™è¯¯
```mql4
// é™¤é›¶é”™è¯¯
void DivisionError()
  {
   int a = 10;
   int b = 0;
   
   // int result = a / b;  // è¿™ä¼šå¯¼è‡´é™¤é›¶é”™è¯¯
   
   // æ­£ç¡®è™•ç†
   if(b != 0)
     {
      int result = a / b;
     }
   else
     {
      Print("é”™è¯¯: é™¤æ•°ä¸èƒ½ä¸ºé›¶");
     }
  }

// æ•°ç»„è¶Šç•Œé”™è¯¯
void ArrayOutOfBounds()
  {
   double prices[5];
   
   // prices[10] = 1.0;  // æ•°ç»„è¶Šç•Œé”™è¯¯
   
   // æ­£ç¡®è™•ç†
   if(10 < ArraySize(prices))
     {
      prices[10] = 1.0;
     }
   else
     {
      Print("é”™è¯¯: æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´");
     }
  }

// ç©ºæŒ‡é’ˆé”™è¯¯
void NullPointer()
  {
   // ç¡®ä¿åœ¨ä½¿ç”¨å‰æª¢æŸ¥å¯¹è±¡æ˜¯å¦æœ‰æ•ˆ
   int handle = FileOpen("test.txt", FILE_READ);
   
   if(handle != INVALID_HANDLE)
     {
      // å®‰å…¨ä½¿ç”¨æª”æ¡ˆå¥æŸ„
      string content = FileReadString(handle);
      FileClose(handle);
     }
   else
     {
      Print("é”™è¯¯: æª”æ¡ˆå¥æŸ„ç„¡æ•ˆ");
     }
  }
```

### äº¤æ˜“é”™è¯¯è™•ç†

#### äº¤æ˜“å‡½æ•°é”™è¯¯è™•ç†
```mql4
// å®‰å…¨çš„å¼€ä»“å‡½æ•°
bool SafeOpenBuyOrder(double lots, double sl, double tp)
  {
   // å‚æ•°æª¢æŸ¥
   if(lots <= 0)
     {
      Print("é”™è¯¯: æ‰‹æ•°å¿…é¡»å¤§äº0");
      return false;
     }
   
   // æª¢æŸ¥å¸‚åœºç‹€æ…‹
   if(!MarketInfo(Symbol(), MODE_TRADEALLOWED))
     {
      Print("é”™è¯¯: å¸‚åœºæœªé–‹æ”¾");
      return false;
     }
   
   // æª¢æŸ¥å¸³æˆ¶èµ„é‡‘
   double freeMargin = AccountFreeMargin();
   double requiredMargin = MarketInfo(Symbol(), MODE_MARGINREQUIRED) * lots;
   
   if(freeMargin < requiredMargin)
     {
      Print("é”™è¯¯: ä¿è¯é‡‘ä¸è¶³");
      return false;
     }
   
   // æ‰§è¡Œäº¤æ˜“
   ResetLastError();
   int ticket = OrderSend(
      Symbol(), OP_BUY, lots, Ask, 3, sl, tp, 
      "Safe Order", 0, 0, clrBlue
   );
   
   // é”™è¯¯è™•ç†
   if(ticket < 0)
     {
      int error = GetLastError();
      Print("è¨‚å–®å¤±è´¥: ", error, " - ", ErrorDescription(error));
      
      // ç‰¹å®šé”™è¯¯è™•ç†
      switch(error)
        {
         case 6:  // æ²¡æœ‰é€£æ¥
            Print("é”™è¯¯: ä¸ä¼ºæœå™¨æ²¡æœ‰é€£æ¥");
            break;
         case 134:  // ä¿è¯é‡‘ä¸è¶³
            Print("é”™è¯¯: å¸³æˆ¶èµ„é‡‘ä¸è¶³");
            break;
         case 128:  // äº¤æ˜“è¶…æ—¶
            Print("é”™è¯¯: äº¤æ˜“è¶…æ—¶");
            break;
        }
      
      return false;
     }
   
   Print("è¨‚å–®æˆåŠŸ: ", ticket);
   return true;
  }

// ä½¿ç”¨ç¤ºä¾‹
void OnTick()
  {
   double sl = Ask - 50 * Point;
   double tp = Ask + 100 * Point;
   
   bool success = SafeOpenBuyOrder(0.1, sl, tp);
   
   if(success)
     {
      Print("è¨‚å–®æ‰§è¡ŒæˆåŠŸ");
     }
  }
```

## ğŸ”§ é”™è¯¯ä»£ç¢¼å’Œæè¿°

### é”™è¯¯ä»£ç¢¼è™•ç†

#### å¸¸ç”¨é”™è¯¯ä»£ç¢¼
```mql4
// é”™è¯¯ä»£ç¢¼è½¬æ¢ä¸ºæè¿°å­—ç¬¦ä¸²
string ErrorDescription(int error)
  {
   switch(error)
     {
      case 0:   return "æ²¡æœ‰é”™è¯¯";
      case 1:   return "æ²¡æœ‰é”™è¯¯ï¼Œä½†çµæœæœªçŸ¥";
      case 2:   return "é€šç”¨é”™è¯¯";
      case 3:   return "é”™è¯¯çš„å‚æ•°";
      case 4:   return "äº¤æ˜“ä¼ºæœå™¨å¿™ç¢Œ";
# ç‰ˆæœ¬
      case 6:   return "æ²¡æœ‰é€£æ¥";
      case 7:   return "æƒé™ä¸è¶³";
      case 8:   return "è¯·æ±‚è¿‡äºé¢‘ç¹";
      case 9:   return "ä¸å…è®¸çš„æ“ä½œ";
      case 64:  return "å¸³æˆ¶è¢«ç¦æ­¢";
      case 65:  return "é”™è¯¯çš„è´¦å·";
      case 128: return "äº¤æ˜“è¶…æ—¶";
      case 129: return "é”™è¯¯çš„ä»·æ ¼";
      case 130: return "é”™è¯¯çš„åœæ­¢";
      case 131: return "é”™è¯¯çš„æˆäº¤é‡";
      case 132: return "å¸‚åœºå·²é—œé–‰";
      case 133: return "äº¤æ˜“è¢«ç¦æ­¢";
      case 134: return "ä¿è¯é‡‘ä¸è¶³";
      case 135: return "ä»·æ ¼æ”¹å˜äº†";
      case 136: return "æ²¡æœ‰ä»·æ ¼";
      case 137: return "ç»çºªå•†å¿™";
      case 138: return "æ–°æŠ¥ä»·";
      case 139: return "è¨‚å–®è¢«é”å®š";
      case 140: return "åªå…è®¸ä¹°å…¥";
      case 141: return "å¤ªå¤šè¯·æ±‚";
# ä¿®æ”¹
      case 146: return "äº¤æ˜“å­ç³»çµ±å¿™ç¢Œ";
      case 147: return "ä½¿ç”¨åˆ°æœŸæ™‚é–“";
      case 148: return "è¨‚å–®å¤ªå¤š";
      case 149: return "å¯¹å†²è¢«ç¦æ­¢";
      case 150: return "ç¦æ­¢å¯¹å†²";
      case 4000: return "æ²¡æœ‰é”™è¯¯";
      case 4001: return "é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆ";
      case 4002: return "æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´";
      case 4003: return "æ²¡æœ‰è¨˜æ†¶é«”";
      case 4004: return "ç©ºæŒ‡é’ˆ";
      case 4005: return "æ ¼å¼åŒ–å­—ç¬¦ä¸²é”™è¯¯";
      case 4006: return "æ•°ç»„ä½œä¸ºå‚æ•°ä¸æ­£ç¡®";
      case 4007: return "è¨˜æ†¶é«”æº¢å‡º";
      case 4008: return "æ£§æº¢å‡º";
      case 4009: return "æ•°ç»„ä¸æ˜¯æ­£ç¡®çš„å¤§å°";
      case 4010: return "é™¤ä»¥é›¶";
      case 4011: return "æœªçŸ¥çš„å‘½ä»¤";
      case 4012: return "é”™è¯¯çš„äº¤æ˜“";
      case 4013: return "æœªçŸ¥å¯¹è±¡å±æ€§";
      case 4014: return "æœªçŸ¥å¯¹è±¡ç±»å‹";
      case 4015: return "ä¸æ”¯æŒçš„å¯¹è±¡";
      case 4016: return "ä¸æ”¯æŒçš„å¯¹è±¡å±æ€§";
      case 4017: return "å­—ç¬¦ä¸²é€£æ¥é”™è¯¯";
      case 4018: return "å†…éƒ¨é”™è¯¯";
      case 4019: return "å­—ç¬¦ä¸²å‚æ•°é”™è¯¯";
      case 4020: return "ç©ºå­—ç¬¦ä¸²";
      case 4021: return "å­—ç¬¦ä¸²å¤ªé•¿";
      case 4022: return "æœªçŸ¥çš„é”™è¯¯";
      case 4050: return "ä¸æ­£ç¡®çš„å‡½æ•°å‚æ•°";
      case 4051: return "é”™è¯¯çš„å‡½æ•°æŒ‡é’ˆ";
      case 4052: return "æ•°ç»„ç´¢å¼•è¶…å‡ºèŒƒå›´";
      case 4053: return "æ²¡æœ‰è¨˜æ†¶é«”";
      case 4054: return "ç©ºæŒ‡é’ˆ";
      case 4055: return "æ ¼å¼åŒ–å­—ç¬¦ä¸²é”™è¯¯";
      case 4056: return "æ•°ç»„ä½œä¸ºå‚æ•°ä¸æ­£ç¡®";
      case 4057: return "è¨˜æ†¶é«”æº¢å‡º";
      case 4058: return "æ£§æº¢å‡º";
      case 4059: return "æ•°ç»„ä¸æ˜¯æ­£ç¡®çš„å¤§å°";
      case 4060: return "é™¤ä»¥é›¶";
      case 4061: return "æœªçŸ¥çš„å‘½ä»¤";
      case 4062: return "é”™è¯¯çš„äº¤æ˜“";
      case 4063: return "æœªçŸ¥å¯¹è±¡å±æ€§";
      case 4064: return "æœªçŸ¥å¯¹è±¡ç±»å‹";
      case 4065: return "ä¸æ”¯æŒçš„å¯¹è±¡";
      case 4066: return "ä¸æ”¯æŒçš„å¯¹è±¡å±æ€§";
      case 4067: return "å­—ç¬¦ä¸²é€£æ¥é”™è¯¯";
      case 4068: return "å†…éƒ¨é”™è¯¯";
      case 4069: return "å­—ç¬¦ä¸²å‚æ•°é”™è¯¯";
      case 4070: return "ç©ºå­—ç¬¦ä¸²";
      case 4071: return "å­—ç¬¦ä¸²å¤ªé•¿";
      case 4072: return "æœªçŸ¥çš„é”™è¯¯";
      default:  return "æœªçŸ¥é”™è¯¯ä»£ç¢¼: " + IntegerToString(error);
     }
  }

// ä½¿ç”¨é”™è¯¯æè¿°å‡½æ•°
int ticket = OrderSend(Symbol(), OP_BUY, 0.1, Ask, 3, 0, 0, "Test", 0, 0, clrNONE);

if(ticket < 0)
  {
   int error = GetLastError();
   Print("é”™è¯¯ä»£ç¢¼: ", error);
   Print("é”™è¯¯æè¿°: ", ErrorDescription(error));
  }
```

## ğŸ›¡ï¸ é˜²å¾¡æ€§ç·¨ç¨‹

### å‚æ•°é©—è­‰

#### è¼¸å…¥å‚æ•°æª¢æŸ¥
```mql4
// é©—è­‰è¼¸å…¥å‚æ•°
bool ValidateParameters(double lotSize, int stopLoss, int takeProfit)
  {
   // é©—è­‰æ‰‹æ•°
   double minLot = MarketInfo(Symbol(), MODE_MINLOT);
   double maxLot = MarketInfo(Symbol(), MODE_MAXLOT);
   
   if(lotSize < minLot)
     {
      Print("é”™è¯¯: æ‰‹æ•°å°äºæœ€å°å€¼ ", minLot);
      return false;
     }
   
   if(lotSize > maxLot)
     {
      Print("é”™è¯¯: æ‰‹æ•°å¤§äºæœ€å¤§å€¼ ", maxLot);
      return false;
     }
   
   // é©—è­‰æ­¢æŸ
   int stopLevel = (int)MarketInfo(Symbol(), MODE_STOPLEVEL);
   if(stopLoss < stopLevel)
     {
      Print("é”™è¯¯: æ­¢æŸå°äºæœ€å°å€¼ ", stopLevel);
      return false;
     }
   
   // é©—è­‰æ­¢ç›ˆ
   if(takeProfit < stopLevel)
     {
      Print("é”™è¯¯: æ­¢ç›ˆå°äºæœ€å°å€¼ ", stopLevel);
      return false;
     }
   
   return true;
  }

// ä½¿ç”¨é©—è­‰å‡½æ•°
void SafeTrading()
  {
   double lotSize = 0.1;
   int stopLoss = 50;
   int takeProfit = 100;
   
   if(ValidateParameters(lotSize, stopLoss, takeProfit))
     {
      // å‚æ•°æœ‰æ•ˆï¼Œå¯ä»¥æ‰§è¡Œäº¤æ˜“
      int ticket = OrderSend(Symbol(), OP_BUY, lotSize, Ask, 3, 
                           Ask - stopLoss*Point, Ask + takeProfit*Point, 
                           "Validated Order", 0, 0, clrBlue);
      
      if(ticket > 0)
         Print("è¨‚å–®æˆåŠŸ: ", ticket);
     }
  }
```

### ç‹€æ…‹æª¢æŸ¥

#### äº¤æ˜“ç’°å¢ƒæª¢æŸ¥
```mql4
// æª¢æŸ¥äº¤æ˜“ç’°å¢ƒ
bool CheckTradingEnvironment()
  {
   // æª¢æŸ¥é€£æ¥ç‹€æ…‹
   if(!TerminalInfoInteger(TERMINAL_CONNECTED))
     {
      Print("é”™è¯¯: ç»ˆç«¯æœªé€£æ¥åˆ°ä¼ºæœå™¨");
      return false;
     }
   
   // æª¢æŸ¥äº¤æ˜“æ˜¯å¦å…è®¸
   if(!TerminalInfoInteger(TERMINAL_TRADE_ALLOWED))
     {
      Print("é”™è¯¯: ç»ˆç«¯äº¤æ˜“è¢«ç¦æ­¢");
      return false;
     }
   
   // æª¢æŸ¥EAäº¤æ˜“æ˜¯å¦å…è®¸
   if(!AccountInfoInteger(ACCOUNT_TRADE_EXPERT))
     {
      Print("é”™è¯¯: EAäº¤æ˜“æœªè¢«å¸³æˆ¶å…è®¸");
      return false;
     }
   
   // æª¢æŸ¥å¸‚åœºç‹€æ…‹
   if(!MarketInfo(Symbol(), MODE_TRADEALLOWED))
     {
      Print("é”™è¯¯: å¸‚åœºäº¤æ˜“è¢«ç¦æ­¢");
      return false;
     }
   
   return true;
  }

// æª¢æŸ¥å¸³æˆ¶ç‹€æ…‹
bool CheckAccountStatus()
  {
   // æª¢æŸ¥å¸³æˆ¶ç±»å‹
   bool isDemo = IsDemo();
   
   if(isDemo)
     {
      Print("è­¦å‘Š: ä½¿ç”¨æ¨¡æ‹Ÿå¸³æˆ¶");
     }
   else
     {
      Print("è­¦å‘Š: ä½¿ç”¨çœŸå®å¸³æˆ¶ï¼Œè¯·è°¨æ…æ“ä½œ");
     }
   
   // æª¢æŸ¥å¸³æˆ¶èµ„é‡‘
   double balance = AccountBalance();
   if(balance < 100)
     {
      Print("è­¦å‘Š: å¸³æˆ¶ä½™é¢è¿‡ä½: ", balance);
      return false;
     }
   
   // æª¢æŸ¥å¯ç”¨ä¿è¯é‡‘
   double freeMargin = AccountFreeMargin();
   if(freeMargin < 100)
     {
      Print("è­¦å‘Š: å¯ç”¨ä¿è¯é‡‘è¿‡ä½: ", freeMargin);
      return false;
     }
   
   return true;
  }

// ç»¼åˆæª¢æŸ¥
bool PreTradeCheck()
  {
   if(!CheckTradingEnvironment())
     {
      Print("äº¤æ˜“ç’°å¢ƒæª¢æŸ¥å¤±è´¥");
      return false;
     }
   
   if(!CheckAccountStatus())
     {
      Print("å¸³æˆ¶ç‹€æ…‹æª¢æŸ¥å¤±è´¥");
      return false;
     }
   
   return true;
  }

// ä½¿ç”¨æª¢æŸ¥å‡½æ•°
void OnTick()
  {
   if(PreTradeCheck())
     {
      // æª¢æŸ¥é€šéï¼Œå¯ä»¥æ‰§è¡Œäº¤æ˜“
      Print("æ‰€æœ‰æª¢æŸ¥é€šéï¼Œå¯ä»¥äº¤æ˜“");
     }
  }
```

## ğŸ¯ å®æˆ˜ç»ƒä¹ 

### ç»ƒä¹ 1ï¼šé™¤éŒ¯å¤æ‚å‡½æ•°

#### ä»»å‹™è¦æ±‚
```mql4
// é™¤éŒ¯ä¸€ä¸ªå¤æ‚çš„è¨ˆç®—å‡½æ•°
// åŠŸèƒ½ï¼š
// 1. æ–°å¢è©³ç´°çš„Printè¯­å¥
// 2. ä½¿ç”¨æ–­ç‚¹é™¤éŒ¯
// 3. è¨˜éŒ„é”™è¯¯è³‡è¨Š
```

#### åƒè€ƒä»£ç¢¼
```mql4
//+------------------------------------------------------------------+
//|                                    DebugPractice.mq4        |
//+------------------------------------------------------------------+
#property copyright "2026, Practice"
#property version   "1.00"
#property strict

// å¤æ‚çš„è¨ˆç®—å‡½æ•°
double ComplexCalculation(int period)
  {
   Print("=== è¿›å…¥ ComplexCalculation ===");
   Print("å‚æ•°: ", period);
   
   if(period <= 0)
     {
      Print("é”™è¯¯: å‘¨æœŸå¿…é¡»å¤§äº0");
      return 0;
     }
   
   if(period > Bars)
     {
      Print("é”™è¯¯: å‘¨æœŸå¤§äºKçº¿æ•°é‡");
      return 0;
     }
   
   double sum = 0.0;
   double count = 0;
   
   for(int i = 0; i < period; i++)
     {
      if(i < Bars)
        {
         double price = Close[i];
         sum += price;
         count++;
         
         if(i % 10 == 0)  // æ¯éš”10æ¬¡è¼¸å‡ºä¸€æ¬¡
           {
            Print("è™•ç†è¿›åº¦: ", i, "/", period, " å½“å‰ä»·æ ¼: ", price);
           }
        }
     }
   
   double average = 0;
   if(count > 0)
     {
      average = sum / count;
      Print("æ€»å’Œ: ", sum, " æ•°é‡: ", count, " å¹³å‡å€¼: ", average);
     }
   else
     {
      Print("è­¦å‘Š: æ²¡æœ‰æœ‰æ•ˆçš„æ•¸æ“š");
     }
   
   Print("=== é€€å‡º ComplexCalculation ===");
   return average;
  }

int OnInit()
  {
   // è¨­ç½®æ–­ç‚¹åœ¨è¿™é‡Œé–‹å§‹é™¤éŒ¯
   Print("é–‹å§‹é™¤éŒ¯å¤æ‚è¨ˆç®—å‡½æ•°");
   
   double result = ComplexCalculation(20);
   Print("æœ€ç»ˆçµæœ: ", result);
   
   return(INIT_SUCCEEDED);
  }
```

## ğŸ’¡ æœ€ä½³å¯¦è¸

### é™¤éŒ¯æŠ€å·§

#### é€æ­¥é™¤éŒ¯
- âœ… **è¨­ç½®æ–­ç‚¹**ï¼šåœ¨é—œéµä½ç½®è¨­ç½®æ–­ç‚¹
- âœ… **å•æ­¥æ‰§è¡Œ**ï¼šé€æ­¥è·Ÿè¸ªä»£ç¢¼æ‰§è¡Œ
# æŸ¥çœ‹
- âŒ **ç›²ç›®çŒœæµ‹**ï¼šé¿å…æ²¡æœ‰æ ¹æ®çš„çŒœæµ‹

### é”™è¯¯è™•ç†åŸå‰‡

#### é”™è¯¯é¢„é˜²
- âœ… **å‚æ•°é©—è­‰**ï¼šä¸¥æ ¼é©—è­‰æ‰€æœ‰è¼¸å…¥å‚æ•°
- âœ… **ç’°å¢ƒæª¢æŸ¥**ï¼šæª¢æŸ¥äº¤æ˜“ç’°å¢ƒå’Œå¸³æˆ¶ç‹€æ…‹
- âœ… **é”™è¯¯è¨˜éŒ„**ï¼šè©³ç´°è¨˜éŒ„æ‰€æœ‰é”™è¯¯è³‡è¨Š
- âŒ **å¿½ç•¥è­¦å‘Š**ï¼šé‡è§†æ‰€æœ‰è­¦å‘Šè³‡è¨Š

## ğŸ”— ç›¸é—œè³‡æº

- [[MQL4å‡½æ•°ä¸æ§åˆ¶æµ]] - å‡½æ•°å’Œæ§åˆ¶æµ
- [[MQL4äº¤æ˜“æ“ä½œåŸºç¤]] - äº¤æ˜“æ“ä½œ
- [[Expert AdvisoråŸºç¤]] - EAé–‹ç™¼
- [[ä»£ç¢¼è¦ç¯„ä¸å„ªåŒ–]] - ä»£ç¢¼å“è³ª

### å®˜æ–¹æ–‡æª”

- **é”™è¯¯ä»£ç¢¼**ï¼šhttps://www.mql5.com/en/docs/mql4/constants/errorswarnings/enum_error_codes
- **é™¤éŒ¯å·¥å…·**ï¼šhttps://www.mql5.com/en/articles/133

---
*å‰µå»ºæ™‚é–“: 2026-02-01*  
*åˆ†é¡: 3 Resources*
