---
title: è‡ªå®šä¹‰åˆ†åŒºè¡¨
status: active
priority: medium
tags: [esp32/examples, flash, partition]
aliases: [åˆ†åŒºè¡¨, custom-partition]
created: 2026-02-19
modified: 2026-02-19
source: https://www.yahboom.com/public/upload/upload-html/1706346912/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E5%8C%BA%E8%A1%A8.html
related:
  - [[MicroROSæœºå™¨äººæ§åˆ¶æ¿]]
  - [[Flashå­˜å–æ•°æ®]]
---

# è‡ªå®šä¹‰åˆ†åŒºè¡¨

> ä½¿ç”¨microROSæ§åˆ¶æ¿çš„ESP32S3æ ¸å¿ƒæ¨¡ç»„ï¼Œå­¦ä¹ ESP32è‡ªå®šä¹‰åˆ†åŒºè¡¨çš„åŠŸèƒ½ã€‚

---

## ğŸ“‹ ç›®å½•

- [å®éªŒç›®çš„](#ä¸€å®éªŒç›®çš„)
- [ç¡¬ä»¶è¿æ¥](#äºŒç¡¬ä»¶è¿æ¥)
- [æ ¸å¿ƒä»£ç è§£æ](#ä¸‰æ ¸å¿ƒä»£ç è§£æ)
- [ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶](#å››ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶)
- [å®éªŒæ•ˆæœ](#äº”å®éªŒæ•ˆæœ)

---

## ä¸€ã€å®éªŒç›®çš„

ä½¿ç”¨microROSæ§åˆ¶æ¿çš„ESP32S3æ ¸å¿ƒæ¨¡ç»„ï¼Œå­¦ä¹ ESP32è‡ªå®šä¹‰åˆ†åŒºè¡¨çš„åŠŸèƒ½ã€‚

---

## äºŒã€ç¡¬ä»¶è¿æ¥

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒmicroROSæ§åˆ¶æ¿é›†æˆäº†ESP32-S3-WROOM-1U-N4R2æ ¸å¿ƒæ¨¡ç»„ï¼Œä¸ä»…æœ‰å†…éƒ¨ç©ºé—´ï¼Œè¿˜æœ‰é¢å¤–4MB FLASHç¨‹åºç©ºé—´ï¼Œä»¥åŠ2MB PSRAMå†…å­˜ç©ºé—´ï¼Œåªéœ€è¦æŠŠtype-Cæ•°æ®çº¿è¿æ¥ç”µè„‘ä¸microROSæ§åˆ¶æ¿ä½œä¸ºçƒ§å½•å›ºä»¶åŠŸèƒ½ã€‚

![image-20240112174901940](https://www.yahboom.com/public/upload/upload-html/1706346912/image-20240112174901940.png)

---

## ä¸‰ã€æ ¸å¿ƒä»£ç è§£æ

ç¨‹åºæºç å¯¹åº”çš„è™šæ‹Ÿæœºè·¯å¾„ä¸ºï¼š

```
~/esp/Samples/esp32_samples/partition_table
```

### åˆ›å»ºè‡ªå®šä¹‰åˆ†åŒºè¡¨

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºpartitions.csvæ–‡ä»¶ï¼Œå¹¶å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š

```csv
# Name,   Type, SubType, Offset,  Size,   Flags
# Note: if you have increased the bootloader size, make sure to update offsets to avoid overlap

nvs,      data, nvs,      0x9000,  0x6000,
phy_init, data, phy,      0xf000,  0x1000,
factory,  app,  factory,  0x10000, 3M,
```

### æŒ‡å®šåˆ†åŒºè¡¨

ç„¶åæ‰“å¼€IDFé…ç½®å·¥å…·ï¼ŒæŠŠåˆ†åŒºè¡¨æŒ‡å®šä¸ºpartitions.csvã€‚

---

## å››ã€ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶

ä½¿ç”¨Type-Cæ•°æ®çº¿è¿æ¥è™šæ‹Ÿæœº/ç”µè„‘ä¸microROSæ§åˆ¶æ¿ï¼Œå¦‚æœç³»ç»Ÿå¼¹çª—é€‰æ‹©è¿æ¥åˆ°è™šæ‹Ÿæœºä¸Šã€‚

æ¿€æ´»ESP-IDFå¼€å‘ç¯å¢ƒï¼Œæ³¨æ„æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯éƒ½éœ€è¦å…ˆæ¿€æ´»ESP-IDFå¼€å‘ç¯å¢ƒæ‰å¯ä»¥ç¼–è¯‘å›ºä»¶ã€‚

```bash
source ~/esp/esp-idf/export.sh
```

è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd ~/esp/Samples/esp32_samples/partition_table
```

ç¼–è¯‘é¡¹ç›®

```bash
idf.py build
```

å¯ä»¥çœ‹åˆ°ç¼–è¯‘æ—¶æ‰“å°å‡ºæ¥çš„åˆ†åŒºè¡¨å’Œpartitions.csvæ–‡ä»¶é‡Œæ˜¯ä¸€è‡´çš„ã€‚

![image-20240115110522843](https://www.yahboom.com/public/upload/upload-html/1706346912/image-20240115110522843.png)

çƒ§å½•ã€æ‰“å¼€ä¸²å£æ¨¡æ‹Ÿå™¨

```bash
idf.py flash monitor
```

å¦‚æœéœ€è¦é€€å‡ºä¸²å£æ¨¡æ‹Ÿå™¨ï¼Œè¯·æŒ‰**Ctrl+]**ã€‚

---

## äº”ã€å®éªŒæ•ˆæœ

ä¸²å£æ¨¡æ‹Ÿå™¨æ‰“å°"hello yahboom"æ¬¢è¿è¯ã€‚

![image-20240115112425843](https://www.yahboom.com/public/upload/upload-html/1706346912/image-20240115112425843.png)

ç„¶åæ»‘åŠ¨é¼ æ ‡æ»šè½®å‘ä¸ŠæŸ¥çœ‹æ‰“å°çš„ç³»ç»Ÿä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°boot: Partition Tableæ æ˜¾ç¤ºçš„åˆ†åŒºè¡¨å†…å®¹ï¼Œä¸é¡¹ç›®æ ¹ç›®å½•çš„partitions.csvå†…å®¹ä¸€è‡´å³å¯ã€‚

![image-20240115112531589](https://www.yahboom.com/public/upload/upload-html/1706346912/image-20240115112531589.png)

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [[Flashå­˜å–æ•°æ®]] - Flashæ•°æ®å­˜å‚¨
- [[ESP32-IDFé…ç½®å·¥å…·]] - é…ç½®å·¥å…·ä½¿ç”¨
