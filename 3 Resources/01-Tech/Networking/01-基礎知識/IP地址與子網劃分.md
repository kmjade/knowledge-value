---
title: IP地址與子網劃分
aliases:
  - IP Addressing
  - Subnetting
  - CIDR
  - IP地址
para: resource
tags:
  - #para/resource/tech
  - #topic/networking
  - #topic/basics
  - #protocol/ip
  - #protocol/ipv4
  - #protocol/ipv6
  - #layer/network
  - #type/concept
  - #zettel/type/permanent
  - #difficulty/beginner
  - #learning/mastered
created: 2026-01-21
updated: 2026-02-15
---

> [!summary] IP地址概述
> IP地址是網路中设备的唯一标识符，子网划分是将一个網路划分为多個更小的子網路的技術。

---

## 📋 目錄

- [IPv4地址](#ipv4地址)
- [IPv6地址](#ipv6地址)
- [子网掩码](#子网掩码)
- [子网划分](#子网划分)
- [CIDR](#cidr)
- [路由与轉發](#路由与轉發)

---

## 🌐 IPv4地址

### 地址格式

IPv4地址是一个32位的二进制数，通常用点分十进制表示：

```
格式: xxx.xxx.xxx.xxx (每个xxx 0-255)

示例: 192.168.1.1
二进制: 11000000.10101000.00000001.00000001
```

### 地址分類

```
┌───────────────────────────────────────────────────────────────┐
│  类别   首位二进制   首字节范围       默认子网掩码   用途      │
├───────────────────────────────────────────────────────────────┤
│   A    0xxxxxxx     1.0.0.0-126.0.0.0  255.0.0.0    大型網路  │
│   B    10xxxxxx     128.0.0.0-191.255.0.0 255.255.0.0  中型網路│
│   C    110xxxxx     192.0.0.0-223.255.255.0 255.255.255.0  小型網路│
│   D    1110xxxx     224.0.0.0-239.255.255.255  -          组播   │
│   E    1111xxxx     240.0.0.0-255.255.255.255  -          保留   │
└───────────────────────────────────────────────────────────────┘
```

**注意**：
- 0.0.0.0 表示当前網路
- 127.0.0.1 表示本地回环地址（localhost）
- 255.255.255.255 表示受限广播地址

### 特殊地址

| 地址类型 | 范围 | 說明 |
|----------|------|------|
| 私有地址 | 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 | 内网使用，不路由到公网 |
| 环回地址 | 127.0.0.0/8 | 本地測試 |
| 广播地址 | 255.255.255.255 或 x.x.x.255 | 向网段内所有主机發送 |
# 配置

---

## 🌐 IPv6地址

### 地址格式

IPv6地址是一个128位的二进制数，用冒号分隔的十六进制数表示：

```
格式: xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx

示例: 2001:0db8:85a3:0000:0000:8a2e:0370:7334
缩写: 2001:db8:85a3::8a2e:370:7334
```

### 缩写规则

1. **前导零省略**：每组的四个十六进制数字中，前导的零可以省略
   - `2001:0db8:0000:0000:0000:0000:0000:0001` → `2001:db8:0:0:0:0:0:1`

2. **连续零组压缩**：连续的一组或多组全零可以压缩为 `::`（只能压缩一次）
   - `2001:db8:0:0:0:0:0:1` → `2001:db8::1`

### 地址类型

| 类型 | 前缀 | 說明 |
|------|------|------|
| 单播 | ::1/128 | 单一目標 |
| 组播 | ff00::/8 | 一组目標 |
| 任播 | - | 任意一个目標（最近的路由器） |

### 私有地址

- `fc00::/7` - 唯一本地地址（类似于 IPv4 私有地址）
- `fe80::/10` - 鏈路本地地址（仅在本地鏈路有效）

---

## 🔢 子网掩码

### 定义

子网掩码是一个32位的二进制数，用于区分IP地址中的**網路部分**和**主机部分**。

```
網路部分连续的 1，主机部分连续的 0

示例:
IP地址: 192.168.1.10
子网掩码: 255.255.255.0 (二进制: 11111111.11111111.11111111.00000000)

網路部分: 192.168.1
主机部分: 10
```

### 默认子网掩码

| 地址类 | 默认子网掩码 | 網路位 | 主机位 |
|--------|--------------|--------|--------|
| A类 | 255.0.0.0 (/8) | 8位 | 24位 |
| B类 | 255.255.0.0 (/16) | 16位 | 16位 |
| C类 | 255.255.255.0 (/24) | 24位 | 8位 |

---

## ✂️ 子网划分

### 基本概念

子网划分是将一个網路划分成多個更小的子網路，用于：
- 優化網路效能
- 增强安全性
# 管理
- 减少广播域

### 子网划分步骤

1. **確定需要划分的子网数**
2. **計算需要的子网位数**：2^n >= 子网数
3. **計算新的子网掩码**：原網路位 + 子网位数
4. **計算每个子网的范围**：
   - 子网地址：網路部分 + 子网部分 + 主机部分全0
   - 广播地址：網路部分 + 子网部分 + 主机部分全1
   - 可用主机范围：子网地址+1 ~ 广播地址-1

### 示例：将192.168.1.0/24划分为4个子网

```
原網路：192.168.1.0/24
需要子网数：4
所需位数：2 (2^2 = 4)
新子网掩码：/24 + 2 = /26 (255.255.255.192)

子网划分結果：
┌─────────────────────────────────────────────────────────┐
│ 子网    子网地址           可用IP范围             广播地址    │
├─────────────────────────────────────────────────────────┤
│ 子网1   192.168.1.0/26   192.168.1.1 - 192.168.1.62    │
│                                          192.168.1.63  │
│ 子网2   192.168.1.64/26  192.168.1.65 - 192.168.1.126   │
│                                          192.168.1.127 │
│ 子网3   192.168.1.128/26 192.168.1.129 - 192.168.1.190  │
│                                          192.168.1.191 │
│ 子网4   192.168.1.192/26 192.168.1.193 - 192.168.1.254  │
│                                          192.168.1.255 │
└─────────────────────────────────────────────────────────┘
```

### 計算公式

```
子网数 = 2^借位数
每个子网的主机数 = 2^(32 - 新子网掩码长度) - 2
可用IP数 = 每个子网的主机数
```

---

## 🎯 CIDR (無类别域间路由)

### 定义

CIDR (Classless Inter-Domain Routing) 是一种更灵活的IP地址分配方式，不限制于传统的A、B、C类划分。

# 方法

`IP地址/前缀长度`

示例：
- `192.168.1.0/24` - 192.168.1.0 - 192.168.1.255
- `10.0.0.0/8` - 10.0.0.0 - 10.255.255.255
- `172.16.0.0/12` - 172.16.0.0 - 172.31.255.255

### CIDR子网划分表

| CIDR | 子网掩码 | 可用主机数 | 适用場景 |
|------|----------|------------|----------|
| /8 | 255.0.0.0 | 16,777,214 | 超大型網路 |
| /16 | 255.255.0.0 | 65,534 | 大型網路 |
| /24 | 255.255.255.0 | 254 | 標準子网 |
| /25 | 255.255.255.128 | 126 | 中小子网 |
| /26 | 255.255.255.192 | 62 | 小型子网 |
| /27 | 255.255.255.224 | 30 | 小型办公室 |
| /28 | 255.255.255.240 | 14 | 小型團隊 |
| /29 | 255.255.255.248 | 6 | 点对点鏈路 |
| /30 | 255.255.255.252 | 2 | 2台设备的鏈路 |

---

## 🔄 路由与轉發

### 基本概念

**路由**：决定數據包从源到目的地的路徑

**轉發**：将數據包从接口發送出去

### 路由表

路由器根据路由表决定數據包的下一跳：

```
目標網路          子网掩码         下一跳        接口
192.168.1.0/24    255.255.255.0   192.168.1.1   eth0
10.0.0.0/8        255.0.0.0       10.0.0.1      eth1
0.0.0.0/0         0.0.0.0         192.168.1.254 eth0 (默认路由)
```

### 路由選擇算法

1. **最长前缀匹配**：選擇最长前缀的路由项
2. **度量值**：跳数、带宽、延遲、负载等

### 路由协议

| 协议 | 类型 | 度量值 | 适用場景 |
|------|------|--------|----------|
| RIP | 距离矢量 | 跳数（最大15） | 小型網路 |
| OSPF | 鏈路狀態 | 成本 | 大中型網路 |
| BGP | 路徑矢量 | 属性策略 | 網際網路核心 |
| EIGRP | 混合 | 复合度量 | Cisco专有 |

---

## 🛠️ 實踐示例

### 示例1：判斷两个IP是否在同一网段

```
IP1: 192.168.1.10
IP2: 192.168.1.20
子网掩码: 255.255.255.0

計算網路部分：
IP1 AND 子网掩码 = 192.168.1.0
IP2 AND 子网掩码 = 192.168.1.0

結果：在同一网段 ✅
```

### 示例2：計算子网

```
網路: 10.0.0.0
子网掩码: /20
子网数: 8

需要位数: 3 (2^3 = 8)
新前缀: /20 + 3 = /23

子网列表:
10.0.0.0/23
10.0.2.0/23
10.0.4.0/23
10.0.6.0/23
10.0.8.0/23
10.0.10.0/23
10.0.12.0/23
10.0.14.0/23
```

---

## 💡 记忆技巧

### 二进制转十进制快速計算

```
128 64 32 16 8 4 2 1
 ✓  ✓  ✓  ✓  ✓  ✓  ✓  ✓

示例: 11000000
= 128 + 64 = 192
```

### 主机数計算

```
/24 -> 256个地址，254个可用主机
/25 -> 128个地址，126个可用主机
/26 -> 64个地址，62个可用主机
/27 -> 32个地址，30个可用主机
/28 -> 16个地址，14个可用主机
/29 -> 8个地址，6个可用主机
/30 -> 4个地址，2个可用主机
```

---

## 📝 學習檢查清單

- [ ] 能说出IPv4地址的分類和范围
- [ ] 理解子网掩码的作用
- [ ] 能手動計算子网划分
# 方法
- [ ] 了解路由表的基本概念
- [ ] 知道常见的路由协议

---

## 🔗 相關連結

- 🔙 [[01-基礎知識|返回基礎知識]]
- 📖 [[OSI七層模型]]
- 🌐 [[IP协议与路由]]
- 🛠️ [[06-實踐工具]]

---

# 更新
