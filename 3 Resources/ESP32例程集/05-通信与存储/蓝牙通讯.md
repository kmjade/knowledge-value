---
title: è“ç‰™é€šè®¯
status: active
priority: medium
tags: [esp32/examples, bluetooth, communication]
aliases: [è“ç‰™é€šè®¯, BLEé€šè®¯]
created: 2026-02-19
modified: 2026-02-19
source: https://www.yahboom.com/public/upload/upload-html/1706346929/%E8%93%9D%E7%89%99%E9%80%9A%E8%AE%AF.html
related:
  - [[MicroROSæœºå™¨äººæ§åˆ¶æ¿]]
  - [[WiFiè”ç½‘]]
---

# è“ç‰™é€šè®¯

> ä½¿ç”¨microROSæ§åˆ¶æ¿çš„ESP32S3æ ¸å¿ƒæ¨¡ç»„ï¼Œå­¦ä¹ ESP32è“ç‰™é€šè®¯çš„åŠŸèƒ½ã€‚

---

## ğŸ“‹ ç›®å½•

- [å®éªŒç›®çš„](#ä¸€å®éªŒç›®çš„)
- [ç¡¬ä»¶è¿æ¥](#äºŒç¡¬ä»¶è¿æ¥)
- [æ ¸å¿ƒä»£ç è§£æ](#ä¸‰æ ¸å¿ƒä»£ç è§£æ)
- [ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶](#å››ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶)
- [å®éªŒæ•ˆæœ](#äº”å®éªŒæ•ˆæœ)

---

## ä¸€ã€å®éªŒç›®çš„

ä½¿ç”¨microROSæ§åˆ¶æ¿çš„ESP32S3æ ¸å¿ƒæ¨¡ç»„ï¼Œå­¦ä¹ ESP32è“ç‰™é€šè®¯çš„åŠŸèƒ½ã€‚

---

## äºŒã€ç¡¬ä»¶è¿æ¥

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒmicroROSæ§åˆ¶æ¿é›†æˆäº†ESP32-S3-WROOMæ ¸å¿ƒæ¨¡ç»„ï¼Œè‡ªå¸¦ä½åŠŸè€—è“ç‰™åŠŸèƒ½ï¼ŒESP32-S3æ ¸å¿ƒæ¨¡ç»„éœ€è¦è¿æ¥å¤©çº¿ï¼Œè¿˜éœ€è¦æŠŠtype-Cæ•°æ®çº¿è¿æ¥ç”µè„‘ä¸microROSæ§åˆ¶æ¿ä½œä¸ºçƒ§å½•å›ºä»¶åŠŸèƒ½ã€‚

![image-20240112174901940](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240112174901940.png)

---

## ä¸‰ã€æ ¸å¿ƒä»£ç è§£æ

ç¨‹åºæºç å¯¹åº”çš„è™šæ‹Ÿæœºè·¯å¾„ä¸ºï¼š

```
~/esp/Samples/esp32_samples/bluetooth
```

### è“ç‰™åˆå§‹åŒ–

é¦–å…ˆï¼Œè“ç‰™åŠŸèƒ½åœ¨ESP-IDFé»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨é…ç½®æ–‡ä»¶é‡Œä½¿èƒ½è“ç‰™ã€‚

![image-20240115142724859](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115142724859.png)

ç”±äºé»˜è®¤åªä½¿èƒ½äº†è“ç‰™BLE 5.0ç‰¹å¾ï¼Œä¸ºäº†ä½¿ç¼–è¯‘é€šè¿‡ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿èƒ½è“ç‰™BLE 4.2ç‰¹å¾ã€‚

![image-20240115143725513](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115143725513.png)

### è‡ªå®šä¹‰è“ç‰™åç§°

è¿™é‡Œä»¥è“ç‰™åç§°ä¸º"YahBoom_BL"ä¸ºä¾‹ã€‚å¦‚æœéœ€è¦ä¿®æ”¹è“ç‰™åç§°ï¼Œåœ¨SAMPLE_DEVICE_NAMEå®å®šä¹‰é‡Œä¿®æ”¹ä¸ºè‡ªå·±éœ€è¦çš„è“ç‰™åç§°ï¼Œç„¶ååœ¨spp_adv_dataé‡Œå°†è“ç‰™åç§°æ‹†åˆ†æˆå­—ç¬¦å¡«å……åˆ°"Complete Local Name in advertising"ä¸‹é¢ä¸€è¡Œã€‚

```c
#define SAMPLE_DEVICE_NAME  "YahBoom_BL"

static const uint8_t spp_adv_data[] = {
    /* Flags */
    0x02, 0x01, 0x06,

    /* Complete List of 16-bit Service Class UUIDs */
    0x03, 0x03, 0xF0, 0xAB,

    /* Complete Local Name in advertising */
    0x0B, 0x09, 'Y', 'a', 'h', 'B', 'o', 'o', 'm', '_', 'B', 'L'
};
```

### è“ç‰™æ•°æ®æ¥æ”¶

è“ç‰™æ¥æ”¶æ•°æ®å¤„ç†ï¼Œè¿™é‡ŒæŠŠæ¥æ”¶åˆ°çš„æ•°æ®é€šè¿‡ESP_LOGIæ‰“å°å‡ºæ¥ï¼Œåç»­å¦‚æœéœ€è¦å¢åŠ é€šè®¯åè®®ï¼Œå¯åœ¨BLE_Parse_Rx_Dataå‡½æ•°å†…æ·»åŠ ã€‚

```c
static void BLE_Parse_Rx_Data(char *rx_data, uint16_t len)
{
    ESP_LOGI(TAG, "BLE RX: %s", rx_data);
}
```

---

## å››ã€ç¼–è¯‘ä¸‹è½½çƒ§å½•å›ºä»¶

ä½¿ç”¨Type-Cæ•°æ®çº¿è¿æ¥è™šæ‹Ÿæœº/ç”µè„‘ä¸microROSæ§åˆ¶æ¿ï¼Œå¦‚æœç³»ç»Ÿå¼¹çª—é€‰æ‹©è¿æ¥åˆ°è™šæ‹Ÿæœºä¸Šã€‚

æ¿€æ´»ESP-IDFå¼€å‘ç¯å¢ƒï¼Œæ³¨æ„æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯éƒ½éœ€è¦å…ˆæ¿€æ´»ESP-IDFå¼€å‘ç¯å¢ƒæ‰å¯ä»¥ç¼–è¯‘å›ºä»¶ã€‚

```bash
source ~/esp/esp-idf/export.sh
```

è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd ~/esp/Samples/esp32_samples/bluetooth
```

ç¼–è¯‘ã€çƒ§å½•ã€æ‰“å¼€ä¸²å£æ¨¡æ‹Ÿå™¨

```bash
idf.py build flash monitor
```

å¦‚æœéœ€è¦é€€å‡ºä¸²å£æ¨¡æ‹Ÿå™¨ï¼Œè¯·æŒ‰**Ctrl+]**ã€‚

---

## äº”ã€å®éªŒæ•ˆæœ

ä¸²å£æ¨¡æ‹Ÿå™¨æ‰“å°"hello yahboom"æ¬¢è¿è¯ï¼Œå¹¶æ‰“å°"BLE_SERVER: BLE_Init init bluetooth"è¡¨ç¤ºè“ç‰™BLEå¯åŠ¨æˆåŠŸã€‚

![image-20240115144305303](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115144305303.png)

æ­¤æ—¶æ‰“å¼€è“ç‰™BLEè°ƒè¯•åŠ©æ‰‹è¿æ¥è“ç‰™ã€‚

> **æ³¨æ„**: ç”±äºè“ç‰™BLEè°ƒè¯•åŠ©æ‰‹APPè¾ƒå¤šï¼Œè¿™é‡Œä»¥LightBlueä¸ºä¾‹ï¼Œå¯ä»æ‰‹æœºåº”ç”¨å•†åº—ä¸‹è½½LightBlueè½¯ä»¶ã€‚

æ‰“å¼€LightBlueæœç´¢é™„è¿‘çš„è“ç‰™è®¾å¤‡ï¼Œæ‰¾åˆ°åç§°ä¸º"YahBoom_BL"çš„è®¾å¤‡ï¼Œç‚¹å‡»å³ä¾§"CONNECT"è¿æ¥"YahBoom_BL"ã€‚

![image-20240115152129309](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115152129309.png)

è¿æ¥å®Œæˆåï¼Œä¼šæ˜¾ç¤ºè¿æ¥çŠ¶æ€å’Œä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚

![image-20240115152408944](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115152408944.png)

å‘ä¸‹æ»‘åŠ¨ï¼Œæ‰¾åˆ°0000ffe1è¿™ä¸ªæœåŠ¡ï¼Œç‚¹å‡»è¿›å…¥0000ffe1æœåŠ¡ã€‚

![image-20240115152628838](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115152628838.png)

å‘ä¸‹æ»‘åŠ¨ï¼Œæ‰¾åˆ°Data formatï¼Œè¿™é‡Œä¸ºäº†æ˜¾ç¤ºæ–¹ä¾¿ä¿®æ”¹ä¸ºUTF-8 Stringæ ¼å¼ï¼Œåœ¨WRITE VALUESæ å¹¶åœ¨ä¸‹æ–¹å¯¹è¯æ¡†å¡«å…¥è¦å‘é€çš„å†…å®¹ï¼Œç„¶åç‚¹å‡»"WRITE"æŒ‰é’®å‘é€æ•°æ®ã€‚ä¾‹å¦‚è¿™é‡Œå‘é€ä¸¤æ¬¡"hello yahboom"ã€‚

![image-20240115153655093](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115153655093.png)

æ­¤æ—¶å¯ä»¥æŸ¥çœ‹ä¸²å£æ¨¡æ‹Ÿå™¨æ‰“å°çš„ä¿¡æ¯ï¼Œå·²ç»å°†æ¥æ”¶åˆ°çš„"hello yahboom"æ‰“å°å‡ºæ¥ã€‚

![image-20240115154049494](https://www.yahboom.com/public/upload/upload-html/1706346929/image-20240115154049494.png)

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [[WiFiè”ç½‘]] - WiFiç½‘ç»œè¿æ¥
- [[ä¸²å£é€šè®¯]] - ä¸²å£é€šè®¯
