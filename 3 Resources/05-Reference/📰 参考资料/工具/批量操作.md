---
title: 批量操作
aliases:
  - Batch Operations
  - 批量處理
tags:
  - quick-action
  - batch
---

> [!note] 批量操作系統 / Batch Operations System
> 高效處理多個 InBox 檔案的批量操作功能

---

## 操作类型 / Operation Types
---

### 批量移动

一次性移动多個檔案到指定 PARA 分類：

```dataview
TABLE WITHOUT ID
  operation as "操作",
  description as "說明",
  command as "命令"
FROM ""
WHERE contains(tags, "batch-operation")
```

| 操作 | 說明 | 命令示例 |
|------|------|---------|
| 移动到 Projects | 移动到專案資料夾 | `/批量移动: 1 Projects` |
| 移动到 Areas | 移动到领域資料夾 | `/批量移动: 2 Areas` |
| 移动到 Resources | 移动到資源資料夾 | `/批量移动: 3 Resources` |
| 移动到 Archives | 移动到歸檔資料夾 | `/批量移动: 4 Archives` |

### 批量新增標籤

为多個檔案同时新增標籤：

```
/批量加標籤: #completed - 2024-W3
```

为本周所有檔案新增 `#completed` 和 `#2024-W3` 標籤。

### 批量刪除標籤

```
/批量删標籤: #todo
```

刪除所有檔案的 `#todo` 標籤。

### 批量重命名

根据规则批量重命名檔案：

```
/批量重命名: prefix-[日期]-原名
```

### 批量創建連結

在指定檔案中批量創建指向多個檔案的連結：

```
/批量連結: [[彙總筆記.md]] - from: "0 Personals/📥 00_InBox"
```

---

## 選擇方式 / Selection Methods
---

### 按資料夾選擇

```
/批量操作: folder - "0 Personals/📥 00_InBox/0-待辦"
```

### 按標籤選擇

```
/批量操作: tag - #todo
```

### 按時間選擇

```
/批量操作: time - "2024-01-15..2024-01-20"
```

### 按条件選擇

```
/批量操作: where - file.mtime > date(subdays, -7) AND contains(tags, "#urgent")
```

### 手動選擇

交互式選擇多個檔案：

```
/批量操作: select
```

# 顯示

---

# 工作流
---

### 快速清理流程

```
/批量清理
```

执行以下操作：
1. 標記超过 14 天的檔案
2. 提供處理建議（歸檔/分類/刪除）
3. 使用者確認后批量执行

# 整理

```
# 整理
```

执行以下操作：
# 分析
2. 按智能分類結果分组
# 顯示
4. 批量移动到对应 PARA 分類

### 標籤規範化

```
/規範化標籤
```

执行以下操作：
1. 尋找所有使用频率低的標籤（< 2 次）
2. 尋找同义词標籤（如 `#todo` 和 `#待辦`）
3. 提供合并建議
4. 批量合并標籤

---

## 預覽与確認 / Preview & Confirm
---

### 操作預覽

# 顯示

```
┌────────────────────────────────────────┐
│  📋 批量操作預覽                      │
├────────────────────────────────────────┤
│  操作类型: 移动到 Projects             │
│  影响檔案: 15 个                      │
├────────────────────────────────────────┤
│  檔案列表:                            │
│  - [ ] 筆記1.md → 1 Projects/         │
│  - [ ] 筆記2.md → 1 Projects/         │
│  - [ ] 筆記3.md → 1 Projects/         │
│  ... (共 15 个)                       │
├────────────────────────────────────────┤
│  [ ] 全选                             │
│  [ ] 取消不想要的                     │
│  [✓] 確認执行                         │
└────────────────────────────────────────┘
```

### 执行確認

確認后，系統会：
# 顯示
2. 記錄操作日志
3. 生成操作報告

---

## 操作歷史 / Operation History
---

# 查看

```dataview
TABLE WITHOUT ID
  timestamp as "時間",
  operation as "操作",
  affected_files as "影响檔案数",
  status as "狀態"
FROM ""
WHERE contains(tags, "batch-log")
SORT timestamp DESC
LIMIT 20
```

### 操作報告

每次批量操作完成後生成報告：

```
---
title: "批量操作報告 - 2024-01-20"
timestamp: 2024-01-20T10:30:00
operation: 移动到 Projects
affected: 15
success: 15
failed: 0
details:
  - 成功: [[筆記1.md]] → [[1 Projects/筆記1.md]]
  - 成功: [[筆記2.md]] → [[1 Projects/筆記2.md]]
  ...
---
```

---

## 撤銷操作 / Undo Operations
---

### 撤銷最近操作

```
/撤銷: 最近
```

撤銷最近一次批量操作。

### 撤銷指定操作

```
/撤銷: [[批量操作報告 - 2024-01-20]]
```

撤銷指定操作報告中的所有更改。

---

## 快捷批量命令 / Quick Batch Commands
---

### 快速歸檔本周完成

```
/歸檔本周
```

将本周所有標記为 `#completed` 的檔案移动到 Archives。

### 快速新增專案標籤

```
/專案標籤: "公众号"
```

为所有相關檔案新增 `#project-公众号` 標籤。

### 快速清空 InBox

```
/清空InBox
```

将所有檔案移动到临时歸檔位置，需要二次確認。

---

## 安全機制 / Safety Mechanisms
---

### 操作限制

- 单次操作最多處理 50 个檔案
- 刪除操作需要二次確認
- 移动操作前檢查目標資料夾

### 備份機制

```
/批量操作: backup - true
```

执行批量操作前自動創建備份。

### 驗證模式

```
/批量操作: dry-run
```

只預覽不执行，用于測試操作规则。

---

> [!warning] 注意事項
> - 批量操作前务必備份
> - 使用預覽功能確認操作范围
> - 复杂操作建議分批执行
> - 定期檢查操作歷史記錄
